(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const yw={context:void 0,registry:void 0},bw=(n,e)=>n===e,kn=Symbol("solid-proxy"),Ju=Symbol("solid-track"),Qa={equals:bw};let Cv=Tv;const pr=1,Ja=2,_v={owned:null,cleanups:null,context:null,owner:null};var Re=null;let Ac=null,Pe=null,kt=null,ar=null,zl=0;const[xw,bV]=tt(!1);function so(n,e){const t=Pe,r=Re,i=n.length===0,s=i?_v:{owned:null,cleanups:null,context:null,owner:e===void 0?r:e},o=i?n:()=>n(()=>Ht(()=>ql(s)));Re=s,Pe=null;try{return zr(o,!0)}finally{Pe=t,Re=r}}function tt(n,e){e=e?Object.assign({},Qa,e):Qa;const t={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},r=i=>(typeof i=="function"&&(i=i(t.value)),Pv(t,i));return[Av.bind(t),r]}function ww(n,e,t){const r=Wl(n,e,!0,pr);hs(r)}function ut(n,e,t){const r=Wl(n,e,!1,pr);hs(r)}function yo(n,e,t){Cv=Aw;const r=Wl(n,e,!1,pr);(!t||!t.render)&&(r.user=!0),ar?ar.push(r):hs(r)}function _e(n,e,t){t=t?Object.assign({},Qa,t):Qa;const r=Wl(n,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,hs(r),Av.bind(r)}function Zu(n){return zr(n,!1)}function Ht(n){if(Pe===null)return n();const e=Pe;Pe=null;try{return n()}finally{Pe=e}}function Sw(n,e,t){const r=Array.isArray(n);let i,s=t&&t.defer;return o=>{let a;if(r){a=Array(n.length);for(let c=0;c<n.length;c++)a[c]=n[c]()}else a=n();if(s){s=!1;return}const l=Ht(()=>e(a,i,o));return i=a,l}}function wi(n){yo(()=>Ht(n))}function bo(n){return Re===null||(Re.cleanups===null?Re.cleanups=[n]:Re.cleanups.push(n)),n}function $v(){return Pe}function kw(){return Re}function Cw(n,e){const t=Re,r=Pe;Re=n,Pe=null;try{return zr(e,!0)}catch(i){kh(i)}finally{Re=t,Pe=r}}function _w(n){const e=Pe,t=Re;return Promise.resolve().then(()=>{Pe=e,Re=t;let r;return zr(n,!1),Pe=Re=null,r?r.done:void 0})}function $w(){return[xw,_w]}function Ev(n,e){const t=Symbol("context");return{id:t,Provider:Tw(t),defaultValue:n}}function Mr(n){let e;return(e=Iv(Re,n.id))!==void 0?e:n.defaultValue}function Ov(n){const e=_e(n),t=_e(()=>ef(e()));return t.toArray=()=>{const r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}function Av(){if(this.sources&&this.state)if(this.state===pr)hs(this);else{const n=kt;kt=null,zr(()=>el(this),!1),kt=n}if(Pe){const n=this.observers?this.observers.length:0;Pe.sources?(Pe.sources.push(this),Pe.sourceSlots.push(n)):(Pe.sources=[this],Pe.sourceSlots=[n]),this.observers?(this.observers.push(Pe),this.observerSlots.push(Pe.sources.length-1)):(this.observers=[Pe],this.observerSlots=[Pe.sources.length-1])}return this.value}function Pv(n,e,t){let r=n.value;return(!n.comparator||!n.comparator(r,e))&&(n.value=e,n.observers&&n.observers.length&&zr(()=>{for(let i=0;i<n.observers.length;i+=1){const s=n.observers[i],o=Ac&&Ac.running;o&&Ac.disposed.has(s),(o?!s.tState:!s.state)&&(s.pure?kt.push(s):ar.push(s),s.observers&&Dv(s)),o||(s.state=pr)}if(kt.length>1e6)throw kt=[],new Error},!1)),e}function hs(n){if(!n.fn)return;ql(n);const e=Re,t=Pe,r=zl;Pe=Re=n,Ew(n,n.value,r),Pe=t,Re=e}function Ew(n,e,t){let r;try{r=n.fn(e)}catch(i){return n.pure&&(n.state=pr,n.owned&&n.owned.forEach(ql),n.owned=null),n.updatedAt=t+1,kh(i)}(!n.updatedAt||n.updatedAt<=t)&&(n.updatedAt!=null&&"observers"in n?Pv(n,r):n.value=r,n.updatedAt=t)}function Wl(n,e,t,r=pr,i){const s={fn:n,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:Re,context:null,pure:t};return Re===null||Re!==_v&&(Re.owned?Re.owned.push(s):Re.owned=[s]),s}function Za(n){if(n.state===0)return;if(n.state===Ja)return el(n);if(n.suspense&&Ht(n.suspense.inFallback))return n.suspense.effects.push(n);const e=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<zl);)n.state&&e.push(n);for(let t=e.length-1;t>=0;t--)if(n=e[t],n.state===pr)hs(n);else if(n.state===Ja){const r=kt;kt=null,zr(()=>el(n,e[0]),!1),kt=r}}function zr(n,e){if(kt)return n();let t=!1;e||(kt=[]),ar?t=!0:ar=[],zl++;try{const r=n();return Ow(t),r}catch(r){t||(ar=null),kt=null,kh(r)}}function Ow(n){if(kt&&(Tv(kt),kt=null),n)return;const e=ar;ar=null,e.length&&zr(()=>Cv(e),!1)}function Tv(n){for(let e=0;e<n.length;e++)Za(n[e])}function Aw(n){let e,t=0;for(e=0;e<n.length;e++){const r=n[e];r.user?n[t++]=r:Za(r)}for(e=0;e<t;e++)Za(n[e])}function el(n,e){n.state=0;for(let t=0;t<n.sources.length;t+=1){const r=n.sources[t];if(r.sources){const i=r.state;i===pr?r!==e&&(!r.updatedAt||r.updatedAt<zl)&&Za(r):i===Ja&&el(r,e)}}}function Dv(n){for(let e=0;e<n.observers.length;e+=1){const t=n.observers[e];t.state||(t.state=Ja,t.pure?kt.push(t):ar.push(t),t.observers&&Dv(t))}}function ql(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),r=n.sourceSlots.pop(),i=t.observers;if(i&&i.length){const s=i.pop(),o=t.observerSlots.pop();r<i.length&&(s.sourceSlots[o]=r,i[r]=s,t.observerSlots[r]=o)}}if(n.owned){for(e=n.owned.length-1;e>=0;e--)ql(n.owned[e]);n.owned=null}if(n.cleanups){for(e=n.cleanups.length-1;e>=0;e--)n.cleanups[e]();n.cleanups=null}n.state=0,n.context=null}function Pw(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function kh(n,e=Re){throw Pw(n)}function Iv(n,e){return n?n.context&&n.context[e]!==void 0?n.context[e]:Iv(n.owner,e):void 0}function ef(n){if(typeof n=="function"&&!n.length)return ef(n());if(Array.isArray(n)){const e=[];for(let t=0;t<n.length;t++){const r=ef(n[t]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return n}function Tw(n,e){return function(r){let i;return ut(()=>i=Ht(()=>(Re.context={[n]:r.value},Ov(()=>r.children))),void 0),i}}const Dw=Symbol("fallback");function b0(n){for(let e=0;e<n.length;e++)n[e]()}function Iw(n,e,t={}){let r=[],i=[],s=[],o=0,a=e.length>1?[]:null;return bo(()=>b0(s)),()=>{let l=n()||[],c,u;return l[Ju],Ht(()=>{let h=l.length,d,p,g,m,v,y,b,w,k;if(h===0)o!==0&&(b0(s),s=[],r=[],i=[],o=0,a&&(a=[])),t.fallback&&(r=[Dw],i[0]=so(x=>(s[0]=x,t.fallback())),o=1);else if(o===0){for(i=new Array(h),u=0;u<h;u++)r[u]=l[u],i[u]=so(f);o=h}else{for(g=new Array(h),m=new Array(h),a&&(v=new Array(h)),y=0,b=Math.min(o,h);y<b&&r[y]===l[y];y++);for(b=o-1,w=h-1;b>=y&&w>=y&&r[b]===l[w];b--,w--)g[w]=i[b],m[w]=s[b],a&&(v[w]=a[b]);for(d=new Map,p=new Array(w+1),u=w;u>=y;u--)k=l[u],c=d.get(k),p[u]=c===void 0?-1:c,d.set(k,u);for(c=y;c<=b;c++)k=r[c],u=d.get(k),u!==void 0&&u!==-1?(g[u]=i[c],m[u]=s[c],a&&(v[u]=a[c]),u=p[u],d.set(k,u)):s[c]();for(u=y;u<h;u++)u in g?(i[u]=g[u],s[u]=m[u],a&&(a[u]=v[u],a[u](u))):i[u]=so(f);i=i.slice(0,o=h),r=l.slice(0)}return i});function f(h){if(s[u]=h,a){const[d,p]=tt(u);return a[u]=p,e(l[u],d)}return e(l[u])}}}function G(n,e){return Ht(()=>n(e||{}))}function ra(){return!0}const tf={get(n,e,t){return e===kn?t:n.get(e)},has(n,e){return e===kn?!0:n.has(e)},set:ra,deleteProperty:ra,getOwnPropertyDescriptor(n,e){return{configurable:!0,enumerable:!0,get(){return n.get(e)},set:ra,deleteProperty:ra}},ownKeys(n){return n.keys()}};function Pc(n){return(n=typeof n=="function"?n():n)?n:{}}function Rw(){for(let n=0,e=this.length;n<e;++n){const t=this[n]();if(t!==void 0)return t}}function xe(...n){let e=!1;for(let s=0;s<n.length;s++){const o=n[s];e=e||!!o&&kn in o,n[s]=typeof o=="function"?(e=!0,_e(o)):o}if(e)return new Proxy({get(s){for(let o=n.length-1;o>=0;o--){const a=Pc(n[o])[s];if(a!==void 0)return a}},has(s){for(let o=n.length-1;o>=0;o--)if(s in Pc(n[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<n.length;o++)s.push(...Object.keys(Pc(n[o])));return[...new Set(s)]}},tf);const t={},r={},i=new Set;for(let s=n.length-1;s>=0;s--){const o=n[s];if(!o)continue;const a=Object.getOwnPropertyNames(o);for(let l=0,c=a.length;l<c;l++){const u=a[l];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(o,u);if(!i.has(u))f.get?(i.add(u),Object.defineProperty(t,u,{enumerable:!0,configurable:!0,get:Rw.bind(r[u]=[f.get.bind(o)])})):(f.value!==void 0&&i.add(u),t[u]=f.value);else{const h=r[u];h?f.get?h.push(f.get.bind(o)):f.value!==void 0&&h.push(()=>f.value):t[u]===void 0&&(t[u]=f.value)}}}return t}function Mo(n,...e){if(kn in n){const i=new Set(e.length>1?e.flat():e[0]),s=e.map(o=>new Proxy({get(a){return o.includes(a)?n[a]:void 0},has(a){return o.includes(a)&&a in n},keys(){return o.filter(a=>a in n)}},tf));return s.push(new Proxy({get(o){return i.has(o)?void 0:n[o]},has(o){return i.has(o)?!1:o in n},keys(){return Object.keys(n).filter(o=>!i.has(o))}},tf)),s}const t={},r=e.map(()=>({}));for(const i of Object.getOwnPropertyNames(n)){const s=Object.getOwnPropertyDescriptor(n,i),o=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let a=!1,l=0;for(const c of e)c.includes(i)&&(a=!0,o?r[l][i]=s.value:Object.defineProperty(r[l],i,s)),++l;a||(o?t[i]=s.value:Object.defineProperty(t,i,s))}return[...r,t]}let Nw=0;function ds(){return`cl-${Nw++}`}const Mw=n=>`Stale read from <${n}>.`;function Rv(n){const e="fallback"in n&&{fallback:()=>n.fallback};return _e(Iw(()=>n.each,n.children,e||void 0))}function Pt(n){const e=n.keyed,t=_e(()=>n.when,void 0,{equals:(r,i)=>e?r===i:!r==!i});return _e(()=>{const r=t();if(r){const i=n.children;return typeof i=="function"&&i.length>0?Ht(()=>i(e?r:()=>{if(!Ht(t))throw Mw("Show");return n.when})):i}return n.fallback},void 0,void 0)}const Bw=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Lw=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Bw]),Fw=new Set(["innerHTML","textContent","innerText","children"]),jw=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Vw=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Hw(n,e){const t=Vw[n];return typeof t=="object"?t[e]?t.$:void 0:t}const zw=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Ww={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function qw(n,e,t){let r=t.length,i=e.length,s=r,o=0,a=0,l=e[i-1].nextSibling,c=null;for(;o<i||a<s;){if(e[o]===t[a]){o++,a++;continue}for(;e[i-1]===t[s-1];)i--,s--;if(i===o){const u=s<r?a?t[a-1].nextSibling:t[s-a]:l;for(;a<s;)n.insertBefore(t[a++],u)}else if(s===a)for(;o<i;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[s-1]&&t[a]===e[i-1]){const u=e[--i].nextSibling;n.insertBefore(t[a++],e[o++].nextSibling),n.insertBefore(t[--s],u),e[i]=t[s]}else{if(!c){c=new Map;let f=a;for(;f<s;)c.set(t[f],f++)}const u=c.get(e[o]);if(u!=null)if(a<u&&u<s){let f=o,h=1,d;for(;++f<i&&f<s&&!((d=c.get(e[f]))==null||d!==u+h);)h++;if(h>u-a){const p=e[o];for(;a<u;)n.insertBefore(t[a++],p)}else n.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}const x0="_$DX_DELEGATE";function Uw(n,e,t,r={}){let i;return so(s=>{i=s,e===document?n():Q(e,n(),e.firstChild?null:void 0,t)},r.owner),()=>{i(),e.textContent=""}}function we(n,e,t){let r;const i=()=>{const o=document.createElement("template");return o.innerHTML=n,t?o.content.firstChild.firstChild:o.content.firstChild},s=e?()=>Ht(()=>document.importNode(r||(r=i()),!0)):()=>(r||(r=i())).cloneNode(!0);return s.cloneNode=s,s}function Ul(n,e=window.document){const t=e[x0]||(e[x0]=new Set);for(let r=0,i=n.length;r<i;r++){const s=n[r];t.has(s)||(t.add(s),e.addEventListener(s,Jw))}}function Qi(n,e,t){t==null?n.removeAttribute(e):n.setAttribute(e,t)}function Kw(n,e,t,r){r==null?n.removeAttributeNS(e,t):n.setAttributeNS(e,t,r)}function Si(n,e){e==null?n.removeAttribute("class"):n.className=e}function Gw(n,e,t,r){if(r)Array.isArray(t)?(n[`$$${e}`]=t[0],n[`$$${e}Data`]=t[1]):n[`$$${e}`]=t;else if(Array.isArray(t)){const i=t[0];n.addEventListener(e,t[0]=s=>i.call(n,t[1],s))}else n.addEventListener(e,t)}function Nv(n,e,t={}){const r=Object.keys(e||{}),i=Object.keys(t);let s,o;for(s=0,o=i.length;s<o;s++){const a=i[s];!a||a==="undefined"||e[a]||(w0(n,a,!1),delete t[a])}for(s=0,o=r.length;s<o;s++){const a=r[s],l=!!e[a];!a||a==="undefined"||t[a]===l||!l||(w0(n,a,!0),t[a]=l)}return t}function Xw(n,e,t){if(!e)return t?Qi(n,"style"):e;const r=n.style;if(typeof e=="string")return r.cssText=e;typeof t=="string"&&(r.cssText=t=void 0),t||(t={}),e||(e={});let i,s;for(s in t)e[s]==null&&r.removeProperty(s),delete t[s];for(s in e)i=e[s],i!==t[s]&&(r.setProperty(s,i),t[s]=i);return t}function Ee(n,e={},t,r){const i={};return r||ut(()=>i.children=Ji(n,e.children,i.children)),ut(()=>e.ref&&e.ref(n)),ut(()=>Yw(n,e,t,!0,i,!0)),i}function Ch(n,e,t){return Ht(()=>n(e,t))}function Q(n,e,t,r){if(t!==void 0&&!r&&(r=[]),typeof e!="function")return Ji(n,e,r,t);ut(i=>Ji(n,e(),i,t),r)}function Yw(n,e,t,r,i={},s=!1){e||(e={});for(const o in i)if(!(o in e)){if(o==="children")continue;i[o]=S0(n,o,null,i[o],t,s)}for(const o in e){if(o==="children"){r||Ji(n,e.children);continue}const a=e[o];i[o]=S0(n,o,a,i[o],t,s)}}function Qw(n){return n.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function w0(n,e,t){const r=e.trim().split(/\s+/);for(let i=0,s=r.length;i<s;i++)n.classList.toggle(r[i],t)}function S0(n,e,t,r,i,s){let o,a,l,c,u;if(e==="style")return Xw(n,t,r);if(e==="classList")return Nv(n,t,r);if(t===r)return r;if(e==="ref")s||t(n);else if(e.slice(0,3)==="on:"){const f=e.slice(3);r&&n.removeEventListener(f,r),t&&n.addEventListener(f,t)}else if(e.slice(0,10)==="oncapture:"){const f=e.slice(10);r&&n.removeEventListener(f,r,!0),t&&n.addEventListener(f,t,!0)}else if(e.slice(0,2)==="on"){const f=e.slice(2).toLowerCase(),h=zw.has(f);if(!h&&r){const d=Array.isArray(r)?r[0]:r;n.removeEventListener(f,d)}(h||t)&&(Gw(n,f,t,h),h&&Ul([f]))}else if(e.slice(0,5)==="attr:")Qi(n,e.slice(5),t);else if((u=e.slice(0,5)==="prop:")||(l=Fw.has(e))||!i&&((c=Hw(e,n.tagName))||(a=Lw.has(e)))||(o=n.nodeName.includes("-")))u&&(e=e.slice(5),a=!0),e==="class"||e==="className"?Si(n,t):o&&!a&&!l?n[Qw(e)]=t:n[c||e]=t;else{const f=i&&e.indexOf(":")>-1&&Ww[e.split(":")[0]];f?Kw(n,f,e,t):Qi(n,jw[e]||e,t)}return t}function Jw(n){const e=`$$${n.type}`;let t=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==t&&Object.defineProperty(n,"target",{configurable:!0,value:t}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return t||document}});t;){const r=t[e];if(r&&!t.disabled){const i=t[`${e}Data`];if(i!==void 0?r.call(t,i,n):r.call(t,n),n.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Ji(n,e,t,r,i){for(;typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,o=r!==void 0;if(n=o&&t[0]&&t[0].parentNode||n,s==="string"||s==="number")if(s==="number"&&(e=e.toString()),o){let a=t[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),t=Ai(n,t,r,a)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e;else if(e==null||s==="boolean")t=Ai(n,t,r);else{if(s==="function")return ut(()=>{let a=e();for(;typeof a=="function";)a=a();t=Ji(n,a,t,r)}),()=>t;if(Array.isArray(e)){const a=[],l=t&&Array.isArray(t);if(nf(a,e,t,i))return ut(()=>t=Ji(n,a,t,r,!0)),()=>t;if(a.length===0){if(t=Ai(n,t,r),o)return t}else l?t.length===0?k0(n,a,r):qw(n,t,a):(t&&Ai(n),k0(n,a));t=a}else if(e.nodeType){if(Array.isArray(t)){if(o)return t=Ai(n,t,r,e);Ai(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}else console.warn("Unrecognized value. Skipped inserting",e)}return t}function nf(n,e,t,r){let i=!1;for(let s=0,o=e.length;s<o;s++){let a=e[s],l=t&&t[s],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)n.push(a);else if(Array.isArray(a))i=nf(n,a,l)||i;else if(c==="function")if(r){for(;typeof a=="function";)a=a();i=nf(n,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||i}else n.push(a),i=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?n.push(l):n.push(document.createTextNode(u))}}return i}function k0(n,e,t=null){for(let r=0,i=e.length;r<i;r++)n.insertBefore(e[r],t)}function Ai(n,e,t,r){if(t===void 0)return n.textContent="";const i=r||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(i!==a){const l=a.parentNode===n;!s&&!o?l?n.replaceChild(i,a):n.insertBefore(i,t):l&&a.remove()}else s=!0}}else n.insertBefore(i,t);return[i]}const Zw=!1,eS="http://www.w3.org/2000/svg";function tS(n,e=!1){return e?document.createElementNS(eS,n):document.createElement(n)}function nS(n){const{useShadow:e}=n,t=document.createTextNode(""),r=()=>n.mount||document.body,i=kw();let s,o=!!yw.context;return yo(()=>{s||(s=Cw(i,()=>_e(()=>n.children)));const a=r();if(a instanceof HTMLHeadElement){const[l,c]=tt(!1),u=()=>c(!0);so(f=>Q(a,()=>l()?f():s(),null)),bo(u)}else{const l=tS(n.isSVG?"g":"div",n.isSVG),c=e&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return t.parentNode},configurable:!0}),Q(c,s),a.appendChild(l),n.ref&&n.ref(l),bo(()=>a.removeChild(l))}},void 0,{render:!o}),t}const rS=we('<svg stroke-width="0"></svg>',2),iS=we("<title></title>",2);function ki(n,e){const t=xe(n.a,e),[r,i]=Mo(t,["src"]);return(()=>{const s=rS.cloneNode(!0);return Ee(s,xe({get stroke(){return n.a.stroke},get color(){return e.color||"currentColor"},get style(){return{...e.style,overflow:"visible"}}},i,{get height(){return e.size||"1em"},get width(){return e.size||"1em"},get innerHTML(){return n.c},xmlns:"http://www.w3.org/2000/svg"}),!0,!0),Q(s,()=>Zw,null),Q(s,(()=>{const o=_e(()=>!!e.title);return()=>o()&&(()=>{const a=iS.cloneNode(!0);return Q(a,()=>e.title),a})()})(),null),s})()}function _h(n){return ki({a:{viewBox:"0 0 448 512"},c:'<path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32v144H48c-17.7 0-32 14.3-32 32s14.3 32 32 32h144v144c0 17.7 14.3 32 32 32s32-14.3 32-32V288h144c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/>'},n)}function Mv(n){return ki({a:{viewBox:"0 0 448 512"},c:'<path d="M135.2 17.7 128 32H32C14.3 32 0 46.3 0 64s14.3 32 32 32h384c17.7 0 32-14.3 32-32s-14.3-32-32-32h-96l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32l21.2 339c1.6 25.3 22.6 45 47.9 45h245.8c25.3 0 46.3-19.7 47.9-45L416 128z"/>'},n)}var fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function sS(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var s=Function.bind.apply(e,i);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Bv={exports:{}};function oS(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tc={exports:{}};const aS={},lS=Object.freeze(Object.defineProperty({__proto__:null,default:aS},Symbol.toStringTag,{value:"Module"})),cS=sS(lS);var C0;function ke(){return C0||(C0=1,function(n,e){(function(t,r){n.exports=r()})(fe,function(){var t=t||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof fe<"u"&&fe.crypto&&(s=fe.crypto),!s&&typeof oS=="function")try{s=cS}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function y(){}return function(b){var w;return y.prototype=b,w=new y,y.prototype=null,w}}(),l={},c=l.lib={},u=c.Base=function(){return{extend:function(y){var b=a(this);return y&&b.mixIn(y),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var b in y)y.hasOwnProperty(b)&&(this[b]=y[b]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=c.WordArray=u.extend({init:function(y,b){y=this.words=y||[],b!=i?this.sigBytes=b:this.sigBytes=y.length*4},toString:function(y){return(y||d).stringify(this)},concat:function(y){var b=this.words,w=y.words,k=this.sigBytes,x=y.sigBytes;if(this.clamp(),k%4)for(var C=0;C<x;C++){var P=w[C>>>2]>>>24-C%4*8&255;b[k+C>>>2]|=P<<24-(k+C)%4*8}else for(var I=0;I<x;I+=4)b[k+I>>>2]=w[I>>>2];return this.sigBytes+=x,this},clamp:function(){var y=this.words,b=this.sigBytes;y[b>>>2]&=4294967295<<32-b%4*8,y.length=r.ceil(b/4)},clone:function(){var y=u.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var b=[],w=0;w<y;w+=4)b.push(o());return new f.init(b,y)}}),h=l.enc={},d=h.Hex={stringify:function(y){for(var b=y.words,w=y.sigBytes,k=[],x=0;x<w;x++){var C=b[x>>>2]>>>24-x%4*8&255;k.push((C>>>4).toString(16)),k.push((C&15).toString(16))}return k.join("")},parse:function(y){for(var b=y.length,w=[],k=0;k<b;k+=2)w[k>>>3]|=parseInt(y.substr(k,2),16)<<24-k%8*4;return new f.init(w,b/2)}},p=h.Latin1={stringify:function(y){for(var b=y.words,w=y.sigBytes,k=[],x=0;x<w;x++){var C=b[x>>>2]>>>24-x%4*8&255;k.push(String.fromCharCode(C))}return k.join("")},parse:function(y){for(var b=y.length,w=[],k=0;k<b;k++)w[k>>>2]|=(y.charCodeAt(k)&255)<<24-k%4*8;return new f.init(w,b)}},g=h.Utf8={stringify:function(y){try{return decodeURIComponent(escape(p.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return p.parse(unescape(encodeURIComponent(y)))}},m=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=g.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var b,w=this._data,k=w.words,x=w.sigBytes,C=this.blockSize,P=C*4,I=x/P;y?I=r.ceil(I):I=r.max((I|0)-this._minBufferSize,0);var $=I*C,_=r.min($*4,x);if($){for(var O=0;O<$;O+=C)this._doProcessBlock(k,O);b=k.splice(0,$),w.sigBytes-=_}return new f.init(b,_)},clone:function(){var y=u.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});c.Hasher=m.extend({cfg:u.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(y){return function(b,w){return new y.init(w).finalize(b)}},_createHmacHelper:function(y){return function(b,w){return new v.HMAC.init(y,w).finalize(b)}}});var v=l.algo={};return l}(Math);return t})}(Tc)),Tc.exports}var Dc={exports:{}},_0;function Gl(){return _0||(_0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){return function(r){var i=t,s=i.lib,o=s.Base,a=s.WordArray,l=i.x64={};l.Word=o.extend({init:function(c,u){this.high=c,this.low=u}}),l.WordArray=o.extend({init:function(c,u){c=this.words=c||[],u!=r?this.sigBytes=u:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,u=c.length,f=[],h=0;h<u;h++){var d=c[h];f.push(d.high),f.push(d.low)}return a.create(f,this.sigBytes)},clone:function(){for(var c=o.clone.call(this),u=c.words=this.words.slice(0),f=u.length,h=0;h<f;h++)u[h]=u[h].clone();return c}})}(),t})}(Dc)),Dc.exports}var Ic={exports:{}},$0;function uS(){return $0||($0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){return function(){if(typeof ArrayBuffer=="function"){var r=t,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var c=l.byteLength,u=[],f=0;f<c;f++)u[f>>>2]|=l[f]<<24-f%4*8;o.call(this,u,c)}else o.apply(this,arguments)};a.prototype=s}}(),t.lib.WordArray})}(Ic)),Ic.exports}var Rc={exports:{}},E0;function fS(){return E0||(E0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],h=0;h<u;h+=2){var d=c[h>>>2]>>>16-h%4*8&65535;f.push(String.fromCharCode(d))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=l.charCodeAt(f)<<16-f%2*16;return s.create(u,c*2)}},o.Utf16LE={stringify:function(l){for(var c=l.words,u=l.sigBytes,f=[],h=0;h<u;h+=2){var d=a(c[h>>>2]>>>16-h%4*8&65535);f.push(String.fromCharCode(d))}return f.join("")},parse:function(l){for(var c=l.length,u=[],f=0;f<c;f++)u[f>>>1]|=a(l.charCodeAt(f)<<16-f%2*16);return s.create(u,c*2)}};function a(l){return l<<8&4278255360|l>>>8&16711935}}(),t.enc.Utf16})}(Rc)),Rc.exports}var Nc={exports:{}},O0;function ps(){return O0||(O0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(l){var c=l.words,u=l.sigBytes,f=this._map;l.clamp();for(var h=[],d=0;d<u;d+=3)for(var p=c[d>>>2]>>>24-d%4*8&255,g=c[d+1>>>2]>>>24-(d+1)%4*8&255,m=c[d+2>>>2]>>>24-(d+2)%4*8&255,v=p<<16|g<<8|m,y=0;y<4&&d+y*.75<u;y++)h.push(f.charAt(v>>>6*(3-y)&63));var b=f.charAt(64);if(b)for(;h.length%4;)h.push(b);return h.join("")},parse:function(l){var c=l.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<u.length;h++)f[u.charCodeAt(h)]=h}var d=u.charAt(64);if(d){var p=l.indexOf(d);p!==-1&&(c=p)}return a(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var f=[],h=0,d=0;d<c;d++)if(d%4){var p=u[l.charCodeAt(d-1)]<<d%4*2,g=u[l.charCodeAt(d)]>>>6-d%4*2,m=p|g;f[h>>>2]|=m<<24-h%4*8,h++}return s.create(f,h)}}(),t.enc.Base64})}(Nc)),Nc.exports}var Mc={exports:{}},A0;function hS(){return A0||(A0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(l,c=!0){var u=l.words,f=l.sigBytes,h=c?this._safe_map:this._map;l.clamp();for(var d=[],p=0;p<f;p+=3)for(var g=u[p>>>2]>>>24-p%4*8&255,m=u[p+1>>>2]>>>24-(p+1)%4*8&255,v=u[p+2>>>2]>>>24-(p+2)%4*8&255,y=g<<16|m<<8|v,b=0;b<4&&p+b*.75<f;b++)d.push(h.charAt(y>>>6*(3-b)&63));var w=h.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(l,c=!0){var u=l.length,f=c?this._safe_map:this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var d=0;d<f.length;d++)h[f.charCodeAt(d)]=d}var p=f.charAt(64);if(p){var g=l.indexOf(p);g!==-1&&(u=g)}return a(l,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var f=[],h=0,d=0;d<c;d++)if(d%4){var p=u[l.charCodeAt(d-1)]<<d%4*2,g=u[l.charCodeAt(d)]>>>6-d%4*2,m=p|g;f[h>>>2]|=m<<24-h%4*8,h++}return s.create(f,h)}}(),t.enc.Base64url})}(Mc)),Mc.exports}var Bc={exports:{}},P0;function gs(){return P0||(P0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){return function(r){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=[];(function(){for(var g=0;g<64;g++)c[g]=r.abs(r.sin(g+1))*4294967296|0})();var u=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,m){for(var v=0;v<16;v++){var y=m+v,b=g[y];g[y]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var w=this._hash.words,k=g[m+0],x=g[m+1],C=g[m+2],P=g[m+3],I=g[m+4],$=g[m+5],_=g[m+6],O=g[m+7],M=g[m+8],V=g[m+9],W=g[m+10],q=g[m+11],te=g[m+12],ee=g[m+13],J=g[m+14],H=g[m+15],E=w[0],R=w[1],T=w[2],S=w[3];E=f(E,R,T,S,k,7,c[0]),S=f(S,E,R,T,x,12,c[1]),T=f(T,S,E,R,C,17,c[2]),R=f(R,T,S,E,P,22,c[3]),E=f(E,R,T,S,I,7,c[4]),S=f(S,E,R,T,$,12,c[5]),T=f(T,S,E,R,_,17,c[6]),R=f(R,T,S,E,O,22,c[7]),E=f(E,R,T,S,M,7,c[8]),S=f(S,E,R,T,V,12,c[9]),T=f(T,S,E,R,W,17,c[10]),R=f(R,T,S,E,q,22,c[11]),E=f(E,R,T,S,te,7,c[12]),S=f(S,E,R,T,ee,12,c[13]),T=f(T,S,E,R,J,17,c[14]),R=f(R,T,S,E,H,22,c[15]),E=h(E,R,T,S,x,5,c[16]),S=h(S,E,R,T,_,9,c[17]),T=h(T,S,E,R,q,14,c[18]),R=h(R,T,S,E,k,20,c[19]),E=h(E,R,T,S,$,5,c[20]),S=h(S,E,R,T,W,9,c[21]),T=h(T,S,E,R,H,14,c[22]),R=h(R,T,S,E,I,20,c[23]),E=h(E,R,T,S,V,5,c[24]),S=h(S,E,R,T,J,9,c[25]),T=h(T,S,E,R,P,14,c[26]),R=h(R,T,S,E,M,20,c[27]),E=h(E,R,T,S,ee,5,c[28]),S=h(S,E,R,T,C,9,c[29]),T=h(T,S,E,R,O,14,c[30]),R=h(R,T,S,E,te,20,c[31]),E=d(E,R,T,S,$,4,c[32]),S=d(S,E,R,T,M,11,c[33]),T=d(T,S,E,R,q,16,c[34]),R=d(R,T,S,E,J,23,c[35]),E=d(E,R,T,S,x,4,c[36]),S=d(S,E,R,T,I,11,c[37]),T=d(T,S,E,R,O,16,c[38]),R=d(R,T,S,E,W,23,c[39]),E=d(E,R,T,S,ee,4,c[40]),S=d(S,E,R,T,k,11,c[41]),T=d(T,S,E,R,P,16,c[42]),R=d(R,T,S,E,_,23,c[43]),E=d(E,R,T,S,V,4,c[44]),S=d(S,E,R,T,te,11,c[45]),T=d(T,S,E,R,H,16,c[46]),R=d(R,T,S,E,C,23,c[47]),E=p(E,R,T,S,k,6,c[48]),S=p(S,E,R,T,O,10,c[49]),T=p(T,S,E,R,J,15,c[50]),R=p(R,T,S,E,$,21,c[51]),E=p(E,R,T,S,te,6,c[52]),S=p(S,E,R,T,P,10,c[53]),T=p(T,S,E,R,W,15,c[54]),R=p(R,T,S,E,x,21,c[55]),E=p(E,R,T,S,M,6,c[56]),S=p(S,E,R,T,H,10,c[57]),T=p(T,S,E,R,_,15,c[58]),R=p(R,T,S,E,ee,21,c[59]),E=p(E,R,T,S,I,6,c[60]),S=p(S,E,R,T,q,10,c[61]),T=p(T,S,E,R,C,15,c[62]),R=p(R,T,S,E,V,21,c[63]),w[0]=w[0]+E|0,w[1]=w[1]+R|0,w[2]=w[2]+T|0,w[3]=w[3]+S|0},_doFinalize:function(){var g=this._data,m=g.words,v=this._nDataBytes*8,y=g.sigBytes*8;m[y>>>5]|=128<<24-y%32;var b=r.floor(v/4294967296),w=v;m[(y+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,m[(y+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,g.sigBytes=(m.length+1)*4,this._process();for(var k=this._hash,x=k.words,C=0;C<4;C++){var P=x[C];x[C]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return k},clone:function(){var g=a.clone.call(this);return g._hash=this._hash.clone(),g}});function f(g,m,v,y,b,w,k){var x=g+(m&v|~m&y)+b+k;return(x<<w|x>>>32-w)+m}function h(g,m,v,y,b,w,k){var x=g+(m&y|v&~y)+b+k;return(x<<w|x>>>32-w)+m}function d(g,m,v,y,b,w,k){var x=g+(m^v^y)+b+k;return(x<<w|x>>>32-w)+m}function p(g,m,v,y,b,w,k){var x=g+(v^(m|~y))+b+k;return(x<<w|x>>>32-w)+m}i.MD5=a._createHelper(u),i.HmacMD5=a._createHmacHelper(u)}(Math),t.MD5})}(Bc)),Bc.exports}var Lc={exports:{}},T0;function $h(){return T0||(T0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,l=[],c=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var h=this._hash.words,d=h[0],p=h[1],g=h[2],m=h[3],v=h[4],y=0;y<80;y++){if(y<16)l[y]=u[f+y]|0;else{var b=l[y-3]^l[y-8]^l[y-14]^l[y-16];l[y]=b<<1|b>>>31}var w=(d<<5|d>>>27)+v+l[y];y<20?w+=(p&g|~p&m)+1518500249:y<40?w+=(p^g^m)+1859775393:y<60?w+=(p&g|p&m|g&m)-1894007588:w+=(p^g^m)-899497514,v=m,m=g,g=p<<30|p>>>2,p=d,d=w}h[0]=h[0]+d|0,h[1]=h[1]+p|0,h[2]=h[2]+g|0,h[3]=h[3]+m|0,h[4]=h[4]+v|0},_doFinalize:function(){var u=this._data,f=u.words,h=this._nDataBytes*8,d=u.sigBytes*8;return f[d>>>5]|=128<<24-d%32,f[(d+64>>>9<<4)+14]=Math.floor(h/4294967296),f[(d+64>>>9<<4)+15]=h,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=o._createHelper(c),r.HmacSHA1=o._createHmacHelper(c)}(),t.SHA1})}(Lc)),Lc.exports}var Fc={exports:{}},D0;function Lv(){return D0||(D0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){return function(r){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=[],u=[];(function(){function d(v){for(var y=r.sqrt(v),b=2;b<=y;b++)if(!(v%b))return!1;return!0}function p(v){return(v-(v|0))*4294967296|0}for(var g=2,m=0;m<64;)d(g)&&(m<8&&(c[m]=p(r.pow(g,1/2))),u[m]=p(r.pow(g,1/3)),m++),g++})();var f=[],h=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(d,p){for(var g=this._hash.words,m=g[0],v=g[1],y=g[2],b=g[3],w=g[4],k=g[5],x=g[6],C=g[7],P=0;P<64;P++){if(P<16)f[P]=d[p+P]|0;else{var I=f[P-15],$=(I<<25|I>>>7)^(I<<14|I>>>18)^I>>>3,_=f[P-2],O=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;f[P]=$+f[P-7]+O+f[P-16]}var M=w&k^~w&x,V=m&v^m&y^v&y,W=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),q=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),te=C+q+M+u[P]+f[P],ee=W+V;C=x,x=k,k=w,w=b+te|0,b=y,y=v,v=m,m=te+ee|0}g[0]=g[0]+m|0,g[1]=g[1]+v|0,g[2]=g[2]+y|0,g[3]=g[3]+b|0,g[4]=g[4]+w|0,g[5]=g[5]+k|0,g[6]=g[6]+x|0,g[7]=g[7]+C|0},_doFinalize:function(){var d=this._data,p=d.words,g=this._nDataBytes*8,m=d.sigBytes*8;return p[m>>>5]|=128<<24-m%32,p[(m+64>>>9<<4)+14]=r.floor(g/4294967296),p[(m+64>>>9<<4)+15]=g,d.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});i.SHA256=a._createHelper(h),i.HmacSHA256=a._createHmacHelper(h)}(Math),t.SHA256})}(Fc)),Fc.exports}var jc={exports:{}},I0;function dS(){return I0||(I0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),Lv())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,l=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=a._doFinalize.call(this);return c.sigBytes-=4,c}});r.SHA224=a._createHelper(l),r.HmacSHA224=a._createHmacHelper(l)}(),t.SHA224})}(jc)),jc.exports}var Vc={exports:{}},R0;function Fv(){return R0||(R0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),Gl())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,l=o.WordArray,c=r.algo;function u(){return a.create.apply(a,arguments)}var f=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],h=[];(function(){for(var p=0;p<80;p++)h[p]=u()})();var d=c.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,g){for(var m=this._hash.words,v=m[0],y=m[1],b=m[2],w=m[3],k=m[4],x=m[5],C=m[6],P=m[7],I=v.high,$=v.low,_=y.high,O=y.low,M=b.high,V=b.low,W=w.high,q=w.low,te=k.high,ee=k.low,J=x.high,H=x.low,E=C.high,R=C.low,T=P.high,S=P.low,D=I,L=$,X=_,U=O,he=M,de=V,Te=W,yt=q,lt=te,it=ee,On=J,st=H,An=E,Yt=R,Pn=T,Qt=S,ft=0;ft<80;ft++){var We,qe,un=h[ft];if(ft<16)qe=un.high=p[g+ft*2]|0,We=un.low=p[g+ft*2+1]|0;else{var mr=h[ft-15],Dt=mr.high,fn=mr.low,Ei=(Dt>>>1|fn<<31)^(Dt>>>8|fn<<24)^Dt>>>7,_t=(fn>>>1|Dt<<31)^(fn>>>8|Dt<<24)^(fn>>>7|Dt<<25),Tn=h[ft-2],er=Tn.high,vr=Tn.low,Kr=(er>>>19|vr<<13)^(er<<3|vr>>>29)^er>>>6,Ps=(vr>>>19|er<<13)^(vr<<3|er>>>29)^(vr>>>6|er<<26),Xo=h[ft-7],Yo=Xo.high,Jt=Xo.low,Qo=h[ft-16],kc=Qo.high,Jo=Qo.low;We=_t+Jt,qe=Ei+Yo+(We>>>0<_t>>>0?1:0),We=We+Ps,qe=qe+Kr+(We>>>0<Ps>>>0?1:0),We=We+Jo,qe=qe+kc+(We>>>0<Jo>>>0?1:0),un.high=qe,un.low=We}var Cc=lt&On^~lt&An,Zo=it&st^~it&Yt,_c=D&X^D&he^X&he,yr=L&U^L&de^U&de,$c=(D>>>28|L<<4)^(D<<30|L>>>2)^(D<<25|L>>>7),Ts=(L>>>28|D<<4)^(L<<30|D>>>2)^(L<<25|D>>>7),Ec=(lt>>>14|it<<18)^(lt>>>18|it<<14)^(lt<<23|it>>>9),Ds=(it>>>14|lt<<18)^(it>>>18|lt<<14)^(it<<23|lt>>>9),Is=f[ft],Oc=Is.high,Rs=Is.low,$t=Qt+Ds,hn=Pn+Ec+($t>>>0<Qt>>>0?1:0),$t=$t+Zo,hn=hn+Cc+($t>>>0<Zo>>>0?1:0),$t=$t+Rs,hn=hn+Oc+($t>>>0<Rs>>>0?1:0),$t=$t+We,hn=hn+qe+($t>>>0<We>>>0?1:0),N=Ts+yr,A=$c+_c+(N>>>0<Ts>>>0?1:0);Pn=An,Qt=Yt,An=On,Yt=st,On=lt,st=it,it=yt+$t|0,lt=Te+hn+(it>>>0<yt>>>0?1:0)|0,Te=he,yt=de,he=X,de=U,X=D,U=L,L=$t+N|0,D=hn+A+(L>>>0<$t>>>0?1:0)|0}$=v.low=$+L,v.high=I+D+($>>>0<L>>>0?1:0),O=y.low=O+U,y.high=_+X+(O>>>0<U>>>0?1:0),V=b.low=V+de,b.high=M+he+(V>>>0<de>>>0?1:0),q=w.low=q+yt,w.high=W+Te+(q>>>0<yt>>>0?1:0),ee=k.low=ee+it,k.high=te+lt+(ee>>>0<it>>>0?1:0),H=x.low=H+st,x.high=J+On+(H>>>0<st>>>0?1:0),R=C.low=R+Yt,C.high=E+An+(R>>>0<Yt>>>0?1:0),S=P.low=S+Qt,P.high=T+Pn+(S>>>0<Qt>>>0?1:0)},_doFinalize:function(){var p=this._data,g=p.words,m=this._nDataBytes*8,v=p.sigBytes*8;g[v>>>5]|=128<<24-v%32,g[(v+128>>>10<<5)+30]=Math.floor(m/4294967296),g[(v+128>>>10<<5)+31]=m,p.sigBytes=g.length*4,this._process();var y=this._hash.toX32();return y},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(d),r.HmacSHA512=s._createHmacHelper(d)}(),t.SHA512})}(Vc)),Vc.exports}var Hc={exports:{}},N0;function pS(){return N0||(N0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),Gl(),Fv())})(fe,function(t){return function(){var r=t,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,l=a.SHA512,c=a.SHA384=l.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=l._createHelper(c),r.HmacSHA384=l._createHmacHelper(c)}(),t.SHA384})}(Hc)),Hc.exports}var zc={exports:{}},M0;function gS(){return M0||(M0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),Gl())})(fe,function(t){return function(r){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.x64,c=l.Word,u=i.algo,f=[],h=[],d=[];(function(){for(var m=1,v=0,y=0;y<24;y++){f[m+5*v]=(y+1)*(y+2)/2%64;var b=v%5,w=(2*m+3*v)%5;m=b,v=w}for(var m=0;m<5;m++)for(var v=0;v<5;v++)h[m+5*v]=v+(2*m+3*v)%5*5;for(var k=1,x=0;x<24;x++){for(var C=0,P=0,I=0;I<7;I++){if(k&1){var $=(1<<I)-1;$<32?P^=1<<$:C^=1<<$-32}k&128?k=k<<1^113:k<<=1}d[x]=c.create(C,P)}})();var p=[];(function(){for(var m=0;m<25;m++)p[m]=c.create()})();var g=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var m=this._state=[],v=0;v<25;v++)m[v]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(m,v){for(var y=this._state,b=this.blockSize/2,w=0;w<b;w++){var k=m[v+2*w],x=m[v+2*w+1];k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,x=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360;var C=y[w];C.high^=x,C.low^=k}for(var P=0;P<24;P++){for(var I=0;I<5;I++){for(var $=0,_=0,O=0;O<5;O++){var C=y[I+5*O];$^=C.high,_^=C.low}var M=p[I];M.high=$,M.low=_}for(var I=0;I<5;I++)for(var V=p[(I+4)%5],W=p[(I+1)%5],q=W.high,te=W.low,$=V.high^(q<<1|te>>>31),_=V.low^(te<<1|q>>>31),O=0;O<5;O++){var C=y[I+5*O];C.high^=$,C.low^=_}for(var ee=1;ee<25;ee++){var $,_,C=y[ee],J=C.high,H=C.low,E=f[ee];E<32?($=J<<E|H>>>32-E,_=H<<E|J>>>32-E):($=H<<E-32|J>>>64-E,_=J<<E-32|H>>>64-E);var R=p[h[ee]];R.high=$,R.low=_}var T=p[0],S=y[0];T.high=S.high,T.low=S.low;for(var I=0;I<5;I++)for(var O=0;O<5;O++){var ee=I+5*O,C=y[ee],D=p[ee],L=p[(I+1)%5+5*O],X=p[(I+2)%5+5*O];C.high=D.high^~L.high&X.high,C.low=D.low^~L.low&X.low}var C=y[0],U=d[P];C.high^=U.high,C.low^=U.low}},_doFinalize:function(){var m=this._data,v=m.words;this._nDataBytes*8;var y=m.sigBytes*8,b=this.blockSize*32;v[y>>>5]|=1<<24-y%32,v[(r.ceil((y+1)/b)*b>>>5)-1]|=128,m.sigBytes=v.length*4,this._process();for(var w=this._state,k=this.cfg.outputLength/8,x=k/8,C=[],P=0;P<x;P++){var I=w[P],$=I.high,_=I.low;$=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360,_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,C.push(_),C.push($)}return new o.init(C,k)},clone:function(){for(var m=a.clone.call(this),v=m._state=this._state.slice(0),y=0;y<25;y++)v[y]=v[y].clone();return m}});i.SHA3=a._createHelper(g),i.HmacSHA3=a._createHmacHelper(g)}(Math),t.SHA3})}(zc)),zc.exports}var Wc={exports:{}},B0;function mS(){return B0||(B0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){/** @preserve
			(c) 2012 by CÃ©dric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=t,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,c=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),g=l.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,C){for(var P=0;P<16;P++){var I=C+P,$=x[I];x[I]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}var _=this._hash.words,O=d.words,M=p.words,V=c.words,W=u.words,q=f.words,te=h.words,ee,J,H,E,R,T,S,D,L,X;T=ee=_[0],S=J=_[1],D=H=_[2],L=E=_[3],X=R=_[4];for(var U,P=0;P<80;P+=1)U=ee+x[C+V[P]]|0,P<16?U+=m(J,H,E)+O[0]:P<32?U+=v(J,H,E)+O[1]:P<48?U+=y(J,H,E)+O[2]:P<64?U+=b(J,H,E)+O[3]:U+=w(J,H,E)+O[4],U=U|0,U=k(U,q[P]),U=U+R|0,ee=R,R=E,E=k(H,10),H=J,J=U,U=T+x[C+W[P]]|0,P<16?U+=w(S,D,L)+M[0]:P<32?U+=b(S,D,L)+M[1]:P<48?U+=y(S,D,L)+M[2]:P<64?U+=v(S,D,L)+M[3]:U+=m(S,D,L)+M[4],U=U|0,U=k(U,te[P]),U=U+X|0,T=X,X=L,L=k(D,10),D=S,S=U;U=_[1]+H+L|0,_[1]=_[2]+E+X|0,_[2]=_[3]+R+T|0,_[3]=_[4]+ee+S|0,_[4]=_[0]+J+D|0,_[0]=U},_doFinalize:function(){var x=this._data,C=x.words,P=this._nDataBytes*8,I=x.sigBytes*8;C[I>>>5]|=128<<24-I%32,C[(I+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,x.sigBytes=(C.length+1)*4,this._process();for(var $=this._hash,_=$.words,O=0;O<5;O++){var M=_[O];_[O]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return $},clone:function(){var x=a.clone.call(this);return x._hash=this._hash.clone(),x}});function m(x,C,P){return x^C^P}function v(x,C,P){return x&C|~x&P}function y(x,C,P){return(x|~C)^P}function b(x,C,P){return x&P|C&~P}function w(x,C,P){return x^(C|~P)}function k(x,C){return x<<C|x>>>32-C}i.RIPEMD160=a._createHelper(g),i.HmacRIPEMD160=a._createHmacHelper(g)}(),t.RIPEMD160})}(Wc)),Wc.exports}var qc={exports:{}},L0;function Eh(){return L0||(L0=1,function(n,e){(function(t,r){n.exports=r(ke())})(fe,function(t){(function(){var r=t,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,l=r.algo;l.HMAC=s.extend({init:function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=a.parse(u));var f=c.blockSize,h=f*4;u.sigBytes>h&&(u=c.finalize(u)),u.clamp();for(var d=this._oKey=u.clone(),p=this._iKey=u.clone(),g=d.words,m=p.words,v=0;v<f;v++)g[v]^=1549556828,m[v]^=909522486;d.sigBytes=p.sigBytes=h,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var u=this._hasher,f=u.finalize(c);u.reset();var h=u.finalize(this._oKey.clone().concat(f));return h}})})()})}(qc)),qc.exports}var Uc={exports:{}},F0;function vS(){return F0||(F0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),$h(),Eh())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.SHA1,c=a.HMAC,u=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,h){for(var d=this.cfg,p=c.create(d.hasher,f),g=o.create(),m=o.create([1]),v=g.words,y=m.words,b=d.keySize,w=d.iterations;v.length<b;){var k=p.update(h).finalize(m);p.reset();for(var x=k.words,C=x.length,P=k,I=1;I<w;I++){P=p.finalize(P),p.reset();for(var $=P.words,_=0;_<C;_++)x[_]^=$[_]}g.concat(k),y[0]++}return g.sigBytes=b*4,g}});r.PBKDF2=function(f,h,d){return u.create(d).compute(f,h)}}(),t.PBKDF2})}(Uc)),Uc.exports}var Kc={exports:{}},j0;function Ci(){return j0||(j0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),$h(),Eh())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.MD5,c=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,f){for(var h,d=this.cfg,p=d.hasher.create(),g=o.create(),m=g.words,v=d.keySize,y=d.iterations;m.length<v;){h&&p.update(h),h=p.update(u).finalize(f),p.reset();for(var b=1;b<y;b++)h=p.finalize(h),p.reset();g.concat(h)}return g.sigBytes=v*4,g}});r.EvpKDF=function(u,f,h){return c.create(h).compute(u,f)}}(),t.EvpKDF})}(Kc)),Kc.exports}var Gc={exports:{}},V0;function vt(){return V0||(V0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),Ci())})(fe,function(t){t.lib.Cipher||function(r){var i=t,s=i.lib,o=s.Base,a=s.WordArray,l=s.BufferedBlockAlgorithm,c=i.enc;c.Utf8;var u=c.Base64,f=i.algo,h=f.EvpKDF,d=s.Cipher=l.extend({cfg:o.extend(),createEncryptor:function($,_){return this.create(this._ENC_XFORM_MODE,$,_)},createDecryptor:function($,_){return this.create(this._DEC_XFORM_MODE,$,_)},init:function($,_,O){this.cfg=this.cfg.extend(O),this._xformMode=$,this._key=_,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function($){return this._append($),this._process()},finalize:function($){$&&this._append($);var _=this._doFinalize();return _},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function $(_){return typeof _=="string"?I:x}return function(_){return{encrypt:function(O,M,V){return $(M).encrypt(_,O,M,V)},decrypt:function(O,M,V){return $(M).decrypt(_,O,M,V)}}}}()});s.StreamCipher=d.extend({_doFinalize:function(){var $=this._process(!0);return $},blockSize:1});var p=i.mode={},g=s.BlockCipherMode=o.extend({createEncryptor:function($,_){return this.Encryptor.create($,_)},createDecryptor:function($,_){return this.Decryptor.create($,_)},init:function($,_){this._cipher=$,this._iv=_}}),m=p.CBC=function(){var $=g.extend();$.Encryptor=$.extend({processBlock:function(O,M){var V=this._cipher,W=V.blockSize;_.call(this,O,M,W),V.encryptBlock(O,M),this._prevBlock=O.slice(M,M+W)}}),$.Decryptor=$.extend({processBlock:function(O,M){var V=this._cipher,W=V.blockSize,q=O.slice(M,M+W);V.decryptBlock(O,M),_.call(this,O,M,W),this._prevBlock=q}});function _(O,M,V){var W,q=this._iv;q?(W=q,this._iv=r):W=this._prevBlock;for(var te=0;te<V;te++)O[M+te]^=W[te]}return $}(),v=i.pad={},y=v.Pkcs7={pad:function($,_){for(var O=_*4,M=O-$.sigBytes%O,V=M<<24|M<<16|M<<8|M,W=[],q=0;q<M;q+=4)W.push(V);var te=a.create(W,M);$.concat(te)},unpad:function($){var _=$.words[$.sigBytes-1>>>2]&255;$.sigBytes-=_}};s.BlockCipher=d.extend({cfg:d.cfg.extend({mode:m,padding:y}),reset:function(){var $;d.reset.call(this);var _=this.cfg,O=_.iv,M=_.mode;this._xformMode==this._ENC_XFORM_MODE?$=M.createEncryptor:($=M.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==$?this._mode.init(this,O&&O.words):(this._mode=$.call(M,this,O&&O.words),this._mode.__creator=$)},_doProcessBlock:function($,_){this._mode.processBlock($,_)},_doFinalize:function(){var $,_=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(_.pad(this._data,this.blockSize),$=this._process(!0)):($=this._process(!0),_.unpad($)),$},blockSize:128/32});var b=s.CipherParams=o.extend({init:function($){this.mixIn($)},toString:function($){return($||this.formatter).stringify(this)}}),w=i.format={},k=w.OpenSSL={stringify:function($){var _,O=$.ciphertext,M=$.salt;return M?_=a.create([1398893684,1701076831]).concat(M).concat(O):_=O,_.toString(u)},parse:function($){var _,O=u.parse($),M=O.words;return M[0]==1398893684&&M[1]==1701076831&&(_=a.create(M.slice(2,4)),M.splice(0,4),O.sigBytes-=16),b.create({ciphertext:O,salt:_})}},x=s.SerializableCipher=o.extend({cfg:o.extend({format:k}),encrypt:function($,_,O,M){M=this.cfg.extend(M);var V=$.createEncryptor(O,M),W=V.finalize(_),q=V.cfg;return b.create({ciphertext:W,key:O,iv:q.iv,algorithm:$,mode:q.mode,padding:q.padding,blockSize:$.blockSize,formatter:M.format})},decrypt:function($,_,O,M){M=this.cfg.extend(M),_=this._parse(_,M.format);var V=$.createDecryptor(O,M).finalize(_.ciphertext);return V},_parse:function($,_){return typeof $=="string"?_.parse($,this):$}}),C=i.kdf={},P=C.OpenSSL={execute:function($,_,O,M){M||(M=a.random(64/8));var V=h.create({keySize:_+O}).compute($,M),W=a.create(V.words.slice(_),O*4);return V.sigBytes=_*4,b.create({key:V,iv:W,salt:M})}},I=s.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:P}),encrypt:function($,_,O,M){M=this.cfg.extend(M);var V=M.kdf.execute(O,$.keySize,$.ivSize);M.iv=V.iv;var W=x.encrypt.call(this,$,_,V.key,M);return W.mixIn(V),W},decrypt:function($,_,O,M){M=this.cfg.extend(M),_=this._parse(_,M.format);var V=M.kdf.execute(O,$.keySize,$.ivSize,_.salt);M.iv=V.iv;var W=x.decrypt.call(this,$,_,V.key,M);return W}})}()})}(Gc)),Gc.exports}var Xc={exports:{}},H0;function yS(){return H0||(H0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.mode.CFB=function(){var r=t.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize;i.call(this,s,o,l,a),this._prevBlock=s.slice(o,o+l)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=s.slice(o,o+l);i.call(this,s,o,l,a),this._prevBlock=c}});function i(s,o,a,l){var c,u=this._iv;u?(c=u.slice(0),this._iv=void 0):c=this._prevBlock,l.encryptBlock(c,0);for(var f=0;f<a;f++)s[o+f]^=c[f]}return r}(),t.mode.CFB})}(Xc)),Xc.exports}var Yc={exports:{}},z0;function bS(){return z0||(z0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.mode.CTR=function(){var r=t.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._counter;c&&(u=this._counter=c.slice(0),this._iv=void 0);var f=u.slice(0);a.encryptBlock(f,0),u[l-1]=u[l-1]+1|0;for(var h=0;h<l;h++)s[o+h]^=f[h]}});return r.Decryptor=i,r}(),t.mode.CTR})}(Yc)),Yc.exports}var Qc={exports:{}},W0;function xS(){return W0||(W0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var r=t.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var l=a>>16&255,c=a>>8&255,u=a&255;l===255?(l=0,c===255?(c=0,u===255?u=0:++u):++c):++l,a=0,a+=l<<16,a+=c<<8,a+=u}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,l){var c=this._cipher,u=c.blockSize,f=this._iv,h=this._counter;f&&(h=this._counter=f.slice(0),this._iv=void 0),s(h);var d=h.slice(0);c.encryptBlock(d,0);for(var p=0;p<u;p++)a[l+p]^=d[p]}});return r.Decryptor=o,r}(),t.mode.CTRGladman})}(Qc)),Qc.exports}var Jc={exports:{}},q0;function wS(){return q0||(q0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.mode.OFB=function(){var r=t.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,c=this._iv,u=this._keystream;c&&(u=this._keystream=c.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var f=0;f<l;f++)s[o+f]^=u[f]}});return r.Decryptor=i,r}(),t.mode.OFB})}(Jc)),Jc.exports}var Zc={exports:{}},U0;function SS(){return U0||(U0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.mode.ECB=function(){var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),t.mode.ECB})}(Zc)),Zc.exports}var eu={exports:{}},K0;function kS(){return K0||(K0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,l=s+a-1;r.clamp(),r.words[l>>>2]|=a<<24-l%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},t.pad.Ansix923})}(eu)),eu.exports}var tu={exports:{}},G0;function CS(){return G0||(G0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(t.lib.WordArray.random(o-1)).concat(t.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},t.pad.Iso10126})}(tu)),tu.exports}var nu={exports:{}},X0;function _S(){return X0||(X0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.pad.Iso97971={pad:function(r,i){r.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(r,i)},unpad:function(r){t.pad.ZeroPadding.unpad(r),r.sigBytes--}},t.pad.Iso97971})}(nu)),nu.exports}var ru={exports:{}},Y0;function $S(){return Y0||(Y0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},t.pad.ZeroPadding})}(ru)),ru.exports}var iu={exports:{}},Q0;function ES(){return Q0||(Q0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(iu)),iu.exports}var su={exports:{}},J0;function OS(){return J0||(J0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),vt())})(fe,function(t){return function(r){var i=t,s=i.lib,o=s.CipherParams,a=i.enc,l=a.Hex,c=i.format;c.Hex={stringify:function(u){return u.ciphertext.toString(l)},parse:function(u){var f=l.parse(u);return o.create({ciphertext:f})}}}(),t.format.Hex})}(su)),su.exports}var ou={exports:{}},Z0;function AS(){return Z0||(Z0=1,function(n,e){(function(t,r,i){n.exports=r(ke(),ps(),gs(),Ci(),vt())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],l=[],c=[],u=[],f=[],h=[],d=[],p=[],g=[],m=[];(function(){for(var b=[],w=0;w<256;w++)w<128?b[w]=w<<1:b[w]=w<<1^283;for(var k=0,x=0,w=0;w<256;w++){var C=x^x<<1^x<<2^x<<3^x<<4;C=C>>>8^C&255^99,a[k]=C,l[C]=k;var P=b[k],I=b[P],$=b[I],_=b[C]*257^C*16843008;c[k]=_<<24|_>>>8,u[k]=_<<16|_>>>16,f[k]=_<<8|_>>>24,h[k]=_;var _=$*16843009^I*65537^P*257^k*16843008;d[C]=_<<24|_>>>8,p[C]=_<<16|_>>>16,g[C]=_<<8|_>>>24,m[C]=_,k?(k=P^b[b[b[$^P]]],x^=b[b[x]]):k=x=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],y=o.AES=s.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,k=w.words,x=w.sigBytes/4,C=this._nRounds=x+6,P=(C+1)*4,I=this._keySchedule=[],$=0;$<P;$++)$<x?I[$]=k[$]:(b=I[$-1],$%x?x>6&&$%x==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=v[$/x|0]<<24),I[$]=I[$-x]^b);for(var _=this._invKeySchedule=[],O=0;O<P;O++){var $=P-O;if(O%4)var b=I[$];else var b=I[$-4];O<4||$<=4?_[O]=b:_[O]=d[a[b>>>24]]^p[a[b>>>16&255]]^g[a[b>>>8&255]]^m[a[b&255]]}}},encryptBlock:function(b,w){this._doCryptBlock(b,w,this._keySchedule,c,u,f,h,a)},decryptBlock:function(b,w){var k=b[w+1];b[w+1]=b[w+3],b[w+3]=k,this._doCryptBlock(b,w,this._invKeySchedule,d,p,g,m,l);var k=b[w+1];b[w+1]=b[w+3],b[w+3]=k},_doCryptBlock:function(b,w,k,x,C,P,I,$){for(var _=this._nRounds,O=b[w]^k[0],M=b[w+1]^k[1],V=b[w+2]^k[2],W=b[w+3]^k[3],q=4,te=1;te<_;te++){var ee=x[O>>>24]^C[M>>>16&255]^P[V>>>8&255]^I[W&255]^k[q++],J=x[M>>>24]^C[V>>>16&255]^P[W>>>8&255]^I[O&255]^k[q++],H=x[V>>>24]^C[W>>>16&255]^P[O>>>8&255]^I[M&255]^k[q++],E=x[W>>>24]^C[O>>>16&255]^P[M>>>8&255]^I[V&255]^k[q++];O=ee,M=J,V=H,W=E}var ee=($[O>>>24]<<24|$[M>>>16&255]<<16|$[V>>>8&255]<<8|$[W&255])^k[q++],J=($[M>>>24]<<24|$[V>>>16&255]<<16|$[W>>>8&255]<<8|$[O&255])^k[q++],H=($[V>>>24]<<24|$[W>>>16&255]<<16|$[O>>>8&255]<<8|$[M&255])^k[q++],E=($[W>>>24]<<24|$[O>>>16&255]<<16|$[M>>>8&255]<<8|$[V&255])^k[q++];b[w]=ee,b[w+1]=J,b[w+2]=H,b[w+3]=E},keySize:256/32});r.AES=s._createHelper(y)}(),t.AES})}(ou)),ou.exports}var au={exports:{}},ep;function PS(){return ep||(ep=1,function(n,e){(function(t,r,i){n.exports=r(ke(),ps(),gs(),Ci(),vt())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=a.DES=o.extend({_doReset:function(){for(var v=this._key,y=v.words,b=[],w=0;w<56;w++){var k=l[w]-1;b[w]=y[k>>>5]>>>31-k%32&1}for(var x=this._subKeys=[],C=0;C<16;C++){for(var P=x[C]=[],I=u[C],w=0;w<24;w++)P[w/6|0]|=b[(c[w]-1+I)%28]<<31-w%6,P[4+(w/6|0)]|=b[28+(c[w+24]-1+I)%28]<<31-w%6;P[0]=P[0]<<1|P[0]>>>31;for(var w=1;w<7;w++)P[w]=P[w]>>>(w-1)*4+3;P[7]=P[7]<<5|P[7]>>>27}for(var $=this._invSubKeys=[],w=0;w<16;w++)$[w]=x[15-w]},encryptBlock:function(v,y){this._doCryptBlock(v,y,this._subKeys)},decryptBlock:function(v,y){this._doCryptBlock(v,y,this._invSubKeys)},_doCryptBlock:function(v,y,b){this._lBlock=v[y],this._rBlock=v[y+1],p.call(this,4,252645135),p.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),p.call(this,1,1431655765);for(var w=0;w<16;w++){for(var k=b[w],x=this._lBlock,C=this._rBlock,P=0,I=0;I<8;I++)P|=f[I][((C^k[I])&h[I])>>>0];this._lBlock=C,this._rBlock=x^P}var $=this._lBlock;this._lBlock=this._rBlock,this._rBlock=$,p.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),v[y]=this._lBlock,v[y+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(v,y){var b=(this._lBlock>>>v^this._rBlock)&y;this._rBlock^=b,this._lBlock^=b<<v}function g(v,y){var b=(this._rBlock>>>v^this._lBlock)&y;this._lBlock^=b,this._rBlock^=b<<v}r.DES=o._createHelper(d);var m=a.TripleDES=o.extend({_doReset:function(){var v=this._key,y=v.words;if(y.length!==2&&y.length!==4&&y.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=y.slice(0,2),w=y.length<4?y.slice(0,2):y.slice(2,4),k=y.length<6?y.slice(0,2):y.slice(4,6);this._des1=d.createEncryptor(s.create(b)),this._des2=d.createEncryptor(s.create(w)),this._des3=d.createEncryptor(s.create(k))},encryptBlock:function(v,y){this._des1.encryptBlock(v,y),this._des2.decryptBlock(v,y),this._des3.encryptBlock(v,y)},decryptBlock:function(v,y){this._des3.decryptBlock(v,y),this._des2.encryptBlock(v,y),this._des1.decryptBlock(v,y)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(m)}(),t.TripleDES})}(au)),au.exports}var lu={exports:{}},tp;function TS(){return tp||(tp=1,function(n,e){(function(t,r,i){n.exports=r(ke(),ps(),gs(),Ci(),vt())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var u=this._key,f=u.words,h=u.sigBytes,d=this._S=[],p=0;p<256;p++)d[p]=p;for(var p=0,g=0;p<256;p++){var m=p%h,v=f[m>>>2]>>>24-m%4*8&255;g=(g+d[p]+v)%256;var y=d[p];d[p]=d[g],d[g]=y}this._i=this._j=0},_doProcessBlock:function(u,f){u[f]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var u=this._S,f=this._i,h=this._j,d=0,p=0;p<4;p++){f=(f+1)%256,h=(h+u[f])%256;var g=u[f];u[f]=u[h],u[h]=g,d|=u[(u[f]+u[h])%256]<<24-p*8}return this._i=f,this._j=h,d}r.RC4=s._createHelper(a);var c=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)l.call(this)}});r.RC4Drop=s._createHelper(c)}(),t.RC4})}(lu)),lu.exports}var cu={exports:{}},np;function DS(){return np||(np=1,function(n,e){(function(t,r,i){n.exports=r(ke(),ps(),gs(),Ci(),vt())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],c=[],u=o.Rabbit=s.extend({_doReset:function(){for(var h=this._key.words,d=this.cfg.iv,p=0;p<4;p++)h[p]=(h[p]<<8|h[p]>>>24)&16711935|(h[p]<<24|h[p]>>>8)&4278255360;var g=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],m=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)m[p]^=g[p+4&7];if(d){var v=d.words,y=v[0],b=v[1],w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,k=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,x=w>>>16|k&4294901760,C=k<<16|w&65535;m[0]^=w,m[1]^=x,m[2]^=k,m[3]^=C,m[4]^=w,m[5]^=x,m[6]^=k,m[7]^=C;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(h,d){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var g=0;g<4;g++)a[g]=(a[g]<<8|a[g]>>>24)&16711935|(a[g]<<24|a[g]>>>8)&4278255360,h[d+g]^=a[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,d=this._C,p=0;p<8;p++)l[p]=d[p];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<l[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<l[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<l[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<l[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<l[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<l[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<l[6]>>>0?1:0)|0,this._b=d[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var g=h[p]+d[p],m=g&65535,v=g>>>16,y=((m*m>>>17)+m*v>>>15)+v*v,b=((g&4294901760)*g|0)+((g&65535)*g|0);c[p]=y^b}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.Rabbit=s._createHelper(u)}(),t.Rabbit})}(cu)),cu.exports}var uu={exports:{}},rp;function IS(){return rp||(rp=1,function(n,e){(function(t,r,i){n.exports=r(ke(),ps(),gs(),Ci(),vt())})(fe,function(t){return function(){var r=t,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],c=[],u=o.RabbitLegacy=s.extend({_doReset:function(){var h=this._key.words,d=this.cfg.iv,p=this._X=[h[0],h[3]<<16|h[2]>>>16,h[1],h[0]<<16|h[3]>>>16,h[2],h[1]<<16|h[0]>>>16,h[3],h[2]<<16|h[1]>>>16],g=this._C=[h[2]<<16|h[2]>>>16,h[0]&4294901760|h[1]&65535,h[3]<<16|h[3]>>>16,h[1]&4294901760|h[2]&65535,h[0]<<16|h[0]>>>16,h[2]&4294901760|h[3]&65535,h[1]<<16|h[1]>>>16,h[3]&4294901760|h[0]&65535];this._b=0;for(var m=0;m<4;m++)f.call(this);for(var m=0;m<8;m++)g[m]^=p[m+4&7];if(d){var v=d.words,y=v[0],b=v[1],w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,k=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,x=w>>>16|k&4294901760,C=k<<16|w&65535;g[0]^=w,g[1]^=x,g[2]^=k,g[3]^=C,g[4]^=w,g[5]^=x,g[6]^=k,g[7]^=C;for(var m=0;m<4;m++)f.call(this)}},_doProcessBlock:function(h,d){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var g=0;g<4;g++)a[g]=(a[g]<<8|a[g]>>>24)&16711935|(a[g]<<24|a[g]>>>8)&4278255360,h[d+g]^=a[g]},blockSize:128/32,ivSize:64/32});function f(){for(var h=this._X,d=this._C,p=0;p<8;p++)l[p]=d[p];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<l[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<l[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<l[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<l[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<l[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<l[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<l[6]>>>0?1:0)|0,this._b=d[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var g=h[p]+d[p],m=g&65535,v=g>>>16,y=((m*m>>>17)+m*v>>>15)+v*v,b=((g&4294901760)*g|0)+((g&65535)*g|0);c[p]=y^b}h[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,h[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,h[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,h[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,h[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,h[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,h[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,h[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.RabbitLegacy=s._createHelper(u)}(),t.RabbitLegacy})}(uu)),uu.exports}(function(n,e){(function(t,r,i){n.exports=r(ke(),Gl(),uS(),fS(),ps(),hS(),gs(),$h(),Lv(),dS(),Fv(),pS(),gS(),mS(),Eh(),vS(),Ci(),vt(),yS(),bS(),xS(),wS(),SS(),kS(),CS(),_S(),$S(),ES(),OS(),AS(),PS(),TS(),DS(),IS())})(fe,function(t){return t})})(Bv);var rf=Bv.exports;function Oh(n,e){try{window.localStorage.setItem(n,e)}catch(t){console.error(t)}}function Ah(n,e=""){try{return window.localStorage.getItem(n)??e}catch(t){console.error(t)}return e}function RS(n){try{window.localStorage.removeItem(n)}catch(e){console.error(e)}}function NS(n,e){try{window.sessionStorage.setItem(n,e)}catch(t){console.error(t)}}function MS(n,e=""){try{return window.sessionStorage.getItem(n)??e}catch(t){console.error(t)}return e}function BS(n){return rf.AES.encrypt(n,"This is not cryptographically secure.").toString()}function LS(n){return rf.AES.decrypt(n,"This is not cryptographically secure.").toString(rf.enc.Utf8)}function ip(n){return n.normalize("NFKD").replace(/\p{Diacritic}/gu,"").toLowerCase()}function FS(n){return n.toLowerCase()!=="false"&&!!n}function _n(n,e){return xe(e,n)}function Ot(n,e,t){yo(Sw(n,e),void 0,t)}const hr={API_KEY:"apiKey",REMEMBER_API_KEY:"rememberAPIKey",PRESETS:"presets",STATE:"state"},[Zi,jS]=tt(zS()),[Da,VS]=tt(FS(Ah(hr.REMEMBER_API_KEY)));Ot([Zi,Da],()=>{Oh(hr.REMEMBER_API_KEY,Da()?"true":"false"),Da()?HS(Zi()):RS(hr.API_KEY)});function HS(n){const e=n?BS(n):"";Oh(hr.API_KEY,e)}function zS(){const n=Ah(hr.API_KEY);return n?LS(n):""}const sf=Symbol("store-raw"),xo=Symbol("store-node");function jv(n){let e=n[kn];if(!e&&(Object.defineProperty(n,kn,{value:e=new Proxy(n,US)}),!Array.isArray(n))){const t=Object.keys(n),r=Object.getOwnPropertyDescriptors(n);for(let i=0,s=t.length;i<s;i++){const o=t[i];r[o].get&&Object.defineProperty(n,o,{enumerable:r[o].enumerable,get:r[o].get.bind(e)})}}return e}function Br(n){let e;return n!=null&&typeof n=="object"&&(n[kn]||!(e=Object.getPrototypeOf(n))||e===Object.prototype||Array.isArray(n))}function es(n,e=new Set){let t,r,i,s;if(t=n!=null&&n[sf])return t;if(!Br(n)||e.has(n))return n;if(Array.isArray(n)){Object.isFrozen(n)?n=n.slice(0):e.add(n);for(let o=0,a=n.length;o<a;o++)i=n[o],(r=es(i,e))!==i&&(n[o]=r)}else{Object.isFrozen(n)?n=Object.assign({},n):e.add(n);const o=Object.keys(n),a=Object.getOwnPropertyDescriptors(n);for(let l=0,c=o.length;l<c;l++)s=o[l],!a[s].get&&(i=n[s],(r=es(i,e))!==i&&(n[s]=r))}return n}function Ph(n){let e=n[xo];return e||Object.defineProperty(n,xo,{value:e=Object.create(null)}),e}function of(n,e,t){return n[e]||(n[e]=Hv(t))}function WS(n,e){const t=Reflect.getOwnPropertyDescriptor(n,e);return!t||t.get||!t.configurable||e===kn||e===xo||(delete t.value,delete t.writable,t.get=()=>n[kn][e]),t}function Vv(n){if($v()){const e=Ph(n);(e._||(e._=Hv()))()}}function qS(n){return Vv(n),Reflect.ownKeys(n)}function Hv(n){const[e,t]=tt(n,{equals:!1,internal:!0});return e.$=t,e}const US={get(n,e,t){if(e===sf)return n;if(e===kn)return t;if(e===Ju)return Vv(n),t;const r=Ph(n),i=r[e];let s=i?i():n[e];if(e===xo||e==="__proto__")return s;if(!i){const o=Object.getOwnPropertyDescriptor(n,e);$v()&&(typeof s!="function"||n.hasOwnProperty(e))&&!(o&&o.get)&&(s=of(r,e,s)())}return Br(s)?jv(s):s},has(n,e){return e===sf||e===kn||e===Ju||e===xo||e==="__proto__"?!0:(this.get(n,e,n),e in n)},set(){return!0},deleteProperty(){return!0},ownKeys:qS,getOwnPropertyDescriptor:WS};function tn(n,e,t,r=!1){if(!r&&n[e]===t)return;const i=n[e],s=n.length;t===void 0?delete n[e]:n[e]=t;let o=Ph(n),a;if((a=of(o,e,i))&&a.$(()=>t),Array.isArray(n)&&n.length!==s){for(let l=n.length;l<s;l++)(a=o[l])&&a.$();(a=of(o,"length",s))&&a.$(n.length)}(a=o._)&&a.$()}function zv(n,e){const t=Object.keys(e);for(let r=0;r<t.length;r+=1){const i=t[r];tn(n,i,e[i])}}function KS(n,e){if(typeof e=="function"&&(e=e(n)),e=es(e),Array.isArray(e)){if(n===e)return;let t=0,r=e.length;for(;t<r;t++){const i=e[t];n[t]!==i&&tn(n,t,i)}tn(n,"length",r)}else zv(n,e)}function Qs(n,e,t=[]){let r,i=n;if(e.length>1){r=e.shift();const o=typeof r,a=Array.isArray(n);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Qs(n,[r[l]].concat(e),t);return}else if(a&&o==="function"){for(let l=0;l<n.length;l++)r(n[l],l)&&Qs(n,[l].concat(e),t);return}else if(a&&o==="object"){const{from:l=0,to:c=n.length-1,by:u=1}=r;for(let f=l;f<=c;f+=u)Qs(n,[f].concat(e),t);return}else if(e.length>1){Qs(n[r],e,[r].concat(t));return}i=n[r],t=[r].concat(t)}let s=e[0];typeof s=="function"&&(s=s(i,t),s===i)||r===void 0&&s==null||(s=es(s),r===void 0||Br(i)&&Br(s)&&!Array.isArray(s)?zv(i,s):tn(n,r,s))}function Th(...[n,e]){const t=es(n||{}),r=Array.isArray(t),i=jv(t);function s(...o){Zu(()=>{r&&o.length===1?KS(t,o[0]):Qs(t,o)})}return[i,s]}const af=Symbol("store-root");function Ni(n,e,t,r,i){const s=e[t];if(n===s)return;if(t!==af&&(!Br(n)||!Br(s)||i&&n[i]!==s[i])){tn(e,t,n);return}if(Array.isArray(n)){if(n.length&&s.length&&(!r||i&&n[0]&&n[0][i]!=null)){let l,c,u,f,h,d,p,g;for(u=0,f=Math.min(s.length,n.length);u<f&&(s[u]===n[u]||i&&s[u]&&n[u]&&s[u][i]===n[u][i]);u++)Ni(n[u],s,u,r,i);const m=new Array(n.length),v=new Map;for(f=s.length-1,h=n.length-1;f>=u&&h>=u&&(s[f]===n[h]||i&&s[u]&&n[u]&&s[f][i]===n[h][i]);f--,h--)m[h]=s[f];if(u>h||u>f){for(c=u;c<=h;c++)tn(s,c,n[c]);for(;c<n.length;c++)tn(s,c,m[c]),Ni(n[c],s,c,r,i);s.length>n.length&&tn(s,"length",n.length);return}for(p=new Array(h+1),c=h;c>=u;c--)d=n[c],g=i&&d?d[i]:d,l=v.get(g),p[c]=l===void 0?-1:l,v.set(g,c);for(l=u;l<=f;l++)d=s[l],g=i&&d?d[i]:d,c=v.get(g),c!==void 0&&c!==-1&&(m[c]=s[l],c=p[c],v.set(g,c));for(c=u;c<n.length;c++)c in m?(tn(s,c,m[c]),Ni(n[c],s,c,r,i)):tn(s,c,n[c])}else for(let l=0,c=n.length;l<c;l++)Ni(n[l],s,l,r,i);s.length>n.length&&tn(s,"length",n.length);return}const o=Object.keys(n);for(let l=0,c=o.length;l<c;l++)Ni(n[o[l]],s,o[l],r,i);const a=Object.keys(s);for(let l=0,c=a.length;l<c;l++)n[a[l]]===void 0&&tn(s,a[l],void 0)}function GS(n,e={}){const{merge:t,key:r="id"}=e,i=es(n);return s=>{if(!Br(s)||!Br(i))return i;const o=Ni(i,{[af]:s},af,t,r);return o===void 0?s:o}}let Wv=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function XS(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Qn=XS,YS=typeof fe=="object"&&fe&&fe.Object===Object&&fe,qv=YS,QS=qv,JS=typeof self=="object"&&self&&self.Object===Object&&self,ZS=QS||JS||Function("return this")(),$n=ZS,ek=$n,tk=function(){return ek.Date.now()},nk=tk,rk=/\s/;function ik(n){for(var e=n.length;e--&&rk.test(n.charAt(e)););return e}var sk=ik,ok=sk,ak=/^\s+/;function lk(n){return n&&n.slice(0,ok(n)+1).replace(ak,"")}var ck=lk,uk=$n,fk=uk.Symbol,Dh=fk,sp=Dh,Uv=Object.prototype,hk=Uv.hasOwnProperty,dk=Uv.toString,Bs=sp?sp.toStringTag:void 0;function pk(n){var e=hk.call(n,Bs),t=n[Bs];try{n[Bs]=void 0;var r=!0}catch{}var i=dk.call(n);return r&&(e?n[Bs]=t:delete n[Bs]),i}var gk=pk,mk=Object.prototype,vk=mk.toString;function yk(n){return vk.call(n)}var bk=yk,op=Dh,xk=gk,wk=bk,Sk="[object Null]",kk="[object Undefined]",ap=op?op.toStringTag:void 0;function Ck(n){return n==null?n===void 0?kk:Sk:ap&&ap in Object(n)?xk(n):wk(n)}var ms=Ck;function _k(n){return n!=null&&typeof n=="object"}var Wr=_k,$k=ms,Ek=Wr,Ok="[object Symbol]";function Ak(n){return typeof n=="symbol"||Ek(n)&&$k(n)==Ok}var Pk=Ak,Tk=ck,lp=Qn,Dk=Pk,cp=0/0,Ik=/^[-+]0x[0-9a-f]+$/i,Rk=/^0b[01]+$/i,Nk=/^0o[0-7]+$/i,Mk=parseInt;function Bk(n){if(typeof n=="number")return n;if(Dk(n))return cp;if(lp(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=lp(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Tk(n);var t=Rk.test(n);return t||Nk.test(n)?Mk(n.slice(2),t?2:8):Ik.test(n)?cp:+n}var Lk=Bk,Fk=Qn,fu=nk,up=Lk,jk="Expected a function",Vk=Math.max,Hk=Math.min;function zk(n,e,t){var r,i,s,o,a,l,c=0,u=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(jk);e=up(e)||0,Fk(t)&&(u=!!t.leading,f="maxWait"in t,s=f?Vk(up(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h);function d(x){var C=r,P=i;return r=i=void 0,c=x,o=n.apply(P,C),o}function p(x){return c=x,a=setTimeout(v,e),u?d(x):o}function g(x){var C=x-l,P=x-c,I=e-C;return f?Hk(I,s-P):I}function m(x){var C=x-l,P=x-c;return l===void 0||C>=e||C<0||f&&P>=s}function v(){var x=fu();if(m(x))return y(x);a=setTimeout(v,g(x))}function y(x){return a=void 0,h&&r?d(x):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function w(){return a===void 0?o:y(fu())}function k(){var x=fu(),C=m(x);if(r=arguments,i=this,l=x,C){if(a===void 0)return p(l);if(f)return clearTimeout(a),a=setTimeout(v,e),d(l)}return a===void 0&&(a=setTimeout(v,e)),o}return k.cancel=b,k.flush=w,k}var Wk=zk;const Kv=Kl(Wk);function qk(){this.__data__=[],this.size=0}var Uk=qk;function Kk(n,e){return n===e||n!==n&&e!==e}var Xl=Kk,Gk=Xl;function Xk(n,e){for(var t=n.length;t--;)if(Gk(n[t][0],e))return t;return-1}var Yl=Xk,Yk=Yl,Qk=Array.prototype,Jk=Qk.splice;function Zk(n){var e=this.__data__,t=Yk(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Jk.call(e,t,1),--this.size,!0}var eC=Zk,tC=Yl;function nC(n){var e=this.__data__,t=tC(e,n);return t<0?void 0:e[t][1]}var rC=nC,iC=Yl;function sC(n){return iC(this.__data__,n)>-1}var oC=sC,aC=Yl;function lC(n,e){var t=this.__data__,r=aC(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var cC=lC,uC=Uk,fC=eC,hC=rC,dC=oC,pC=cC;function vs(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}vs.prototype.clear=uC;vs.prototype.delete=fC;vs.prototype.get=hC;vs.prototype.has=dC;vs.prototype.set=pC;var Ql=vs,gC=Ql;function mC(){this.__data__=new gC,this.size=0}var vC=mC;function yC(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var bC=yC;function xC(n){return this.__data__.get(n)}var wC=xC;function SC(n){return this.__data__.has(n)}var kC=SC,CC=ms,_C=Qn,$C="[object AsyncFunction]",EC="[object Function]",OC="[object GeneratorFunction]",AC="[object Proxy]";function PC(n){if(!_C(n))return!1;var e=CC(n);return e==EC||e==OC||e==$C||e==AC}var Ih=PC,TC=$n,DC=TC["__core-js_shared__"],IC=DC,hu=IC,fp=function(){var n=/[^.]+$/.exec(hu&&hu.keys&&hu.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function RC(n){return!!fp&&fp in n}var NC=RC,MC=Function.prototype,BC=MC.toString;function LC(n){if(n!=null){try{return BC.call(n)}catch{}try{return n+""}catch{}}return""}var Gv=LC,FC=Ih,jC=NC,VC=Qn,HC=Gv,zC=/[\\^$.*+?()[\]{}|]/g,WC=/^\[object .+?Constructor\]$/,qC=Function.prototype,UC=Object.prototype,KC=qC.toString,GC=UC.hasOwnProperty,XC=RegExp("^"+KC.call(GC).replace(zC,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function YC(n){if(!VC(n)||jC(n))return!1;var e=FC(n)?XC:WC;return e.test(HC(n))}var QC=YC;function JC(n,e){return n?.[e]}var ZC=JC,e2=QC,t2=ZC;function n2(n,e){var t=t2(n,e);return e2(t)?t:void 0}var _i=n2,r2=_i,i2=$n,s2=r2(i2,"Map"),Rh=s2,o2=_i,a2=o2(Object,"create"),Jl=a2,hp=Jl;function l2(){this.__data__=hp?hp(null):{},this.size=0}var c2=l2;function u2(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var f2=u2,h2=Jl,d2="__lodash_hash_undefined__",p2=Object.prototype,g2=p2.hasOwnProperty;function m2(n){var e=this.__data__;if(h2){var t=e[n];return t===d2?void 0:t}return g2.call(e,n)?e[n]:void 0}var v2=m2,y2=Jl,b2=Object.prototype,x2=b2.hasOwnProperty;function w2(n){var e=this.__data__;return y2?e[n]!==void 0:x2.call(e,n)}var S2=w2,k2=Jl,C2="__lodash_hash_undefined__";function _2(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=k2&&e===void 0?C2:e,this}var $2=_2,E2=c2,O2=f2,A2=v2,P2=S2,T2=$2;function ys(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ys.prototype.clear=E2;ys.prototype.delete=O2;ys.prototype.get=A2;ys.prototype.has=P2;ys.prototype.set=T2;var D2=ys,dp=D2,I2=Ql,R2=Rh;function N2(){this.size=0,this.__data__={hash:new dp,map:new(R2||I2),string:new dp}}var M2=N2;function B2(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var L2=B2,F2=L2;function j2(n,e){var t=n.__data__;return F2(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Zl=j2,V2=Zl;function H2(n){var e=V2(this,n).delete(n);return this.size-=e?1:0,e}var z2=H2,W2=Zl;function q2(n){return W2(this,n).get(n)}var U2=q2,K2=Zl;function G2(n){return K2(this,n).has(n)}var X2=G2,Y2=Zl;function Q2(n,e){var t=Y2(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var J2=Q2,Z2=M2,e_=z2,t_=U2,n_=X2,r_=J2;function bs(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}bs.prototype.clear=Z2;bs.prototype.delete=e_;bs.prototype.get=t_;bs.prototype.has=n_;bs.prototype.set=r_;var i_=bs,s_=Ql,o_=Rh,a_=i_,l_=200;function c_(n,e){var t=this.__data__;if(t instanceof s_){var r=t.__data__;if(!o_||r.length<l_-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new a_(r)}return t.set(n,e),this.size=t.size,this}var u_=c_,f_=Ql,h_=vC,d_=bC,p_=wC,g_=kC,m_=u_;function xs(n){var e=this.__data__=new f_(n);this.size=e.size}xs.prototype.clear=h_;xs.prototype.delete=d_;xs.prototype.get=p_;xs.prototype.has=g_;xs.prototype.set=m_;var Xv=xs,v_=_i,y_=function(){try{var n=v_(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Yv=y_,pp=Yv;function b_(n,e,t){e=="__proto__"&&pp?pp(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Nh=b_,x_=Nh,w_=Xl;function S_(n,e,t){(t!==void 0&&!w_(n[e],t)||t===void 0&&!(e in n))&&x_(n,e,t)}var Qv=S_;function k_(n){return function(e,t,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[n?a:++i];if(t(s[l],l,s)===!1)break}return e}}var C_=k_,__=C_,$_=__(),E_=$_,tl={exports:{}};tl.exports;(function(n,e){var t=$n,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var f=c.length,h=a?a(f):new c.constructor(f);return c.copy(h),h}n.exports=l})(tl,tl.exports);var Jv=tl.exports,O_=$n,A_=O_.Uint8Array,P_=A_,gp=P_;function T_(n){var e=new n.constructor(n.byteLength);return new gp(e).set(new gp(n)),e}var Mh=T_,D_=Mh;function I_(n,e){var t=e?D_(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Zv=I_;function R_(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var ey=R_,N_=Qn,mp=Object.create,M_=function(){function n(){}return function(e){if(!N_(e))return{};if(mp)return mp(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),B_=M_;function L_(n,e){return function(t){return n(e(t))}}var ty=L_,F_=ty,j_=F_(Object.getPrototypeOf,Object),Bh=j_,V_=Object.prototype;function H_(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||V_;return n===t}var Lh=H_,z_=B_,W_=Bh,q_=Lh;function U_(n){return typeof n.constructor=="function"&&!q_(n)?z_(W_(n)):{}}var ny=U_,K_=ms,G_=Wr,X_="[object Arguments]";function Y_(n){return G_(n)&&K_(n)==X_}var Q_=Y_,vp=Q_,J_=Wr,ry=Object.prototype,Z_=ry.hasOwnProperty,e$=ry.propertyIsEnumerable,t$=vp(function(){return arguments}())?vp:function(n){return J_(n)&&Z_.call(n,"callee")&&!e$.call(n,"callee")},iy=t$,n$=Array.isArray,ec=n$,r$=9007199254740991;function i$(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=r$}var sy=i$,s$=Ih,o$=sy;function a$(n){return n!=null&&o$(n.length)&&!s$(n)}var tc=a$,l$=tc,c$=Wr;function u$(n){return c$(n)&&l$(n)}var f$=u$,nl={exports:{}};function h$(){return!1}var d$=h$;nl.exports;(function(n,e){var t=$n,r=d$,i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;n.exports=c})(nl,nl.exports);var Fh=nl.exports,p$=ms,g$=Bh,m$=Wr,v$="[object Object]",y$=Function.prototype,b$=Object.prototype,oy=y$.toString,x$=b$.hasOwnProperty,w$=oy.call(Object);function S$(n){if(!m$(n)||p$(n)!=v$)return!1;var e=g$(n);if(e===null)return!0;var t=x$.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&oy.call(t)==w$}var k$=S$,C$=ms,_$=sy,$$=Wr,E$="[object Arguments]",O$="[object Array]",A$="[object Boolean]",P$="[object Date]",T$="[object Error]",D$="[object Function]",I$="[object Map]",R$="[object Number]",N$="[object Object]",M$="[object RegExp]",B$="[object Set]",L$="[object String]",F$="[object WeakMap]",j$="[object ArrayBuffer]",V$="[object DataView]",H$="[object Float32Array]",z$="[object Float64Array]",W$="[object Int8Array]",q$="[object Int16Array]",U$="[object Int32Array]",K$="[object Uint8Array]",G$="[object Uint8ClampedArray]",X$="[object Uint16Array]",Y$="[object Uint32Array]",Le={};Le[H$]=Le[z$]=Le[W$]=Le[q$]=Le[U$]=Le[K$]=Le[G$]=Le[X$]=Le[Y$]=!0;Le[E$]=Le[O$]=Le[j$]=Le[A$]=Le[V$]=Le[P$]=Le[T$]=Le[D$]=Le[I$]=Le[R$]=Le[N$]=Le[M$]=Le[B$]=Le[L$]=Le[F$]=!1;function Q$(n){return $$(n)&&_$(n.length)&&!!Le[C$(n)]}var J$=Q$;function Z$(n){return function(e){return n(e)}}var jh=Z$,rl={exports:{}};rl.exports;(function(n,e){var t=qv,r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a})(rl,rl.exports);var Vh=rl.exports,eE=J$,tE=jh,yp=Vh,bp=yp&&yp.isTypedArray,nE=bp?tE(bp):eE,ay=nE;function rE(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var ly=rE,iE=Nh,sE=Xl,oE=Object.prototype,aE=oE.hasOwnProperty;function lE(n,e,t){var r=n[e];(!(aE.call(n,e)&&sE(r,t))||t===void 0&&!(e in n))&&iE(n,e,t)}var cy=lE,cE=cy,uE=Nh;function fE(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?uE(t,a,l):cE(t,a,l)}return t}var Bo=fE;function hE(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var dE=hE,pE=9007199254740991,gE=/^(?:0|[1-9]\d*)$/;function mE(n,e){var t=typeof n;return e=e??pE,!!e&&(t=="number"||t!="symbol"&&gE.test(n))&&n>-1&&n%1==0&&n<e}var uy=mE,vE=dE,yE=iy,bE=ec,xE=Fh,wE=uy,SE=ay,kE=Object.prototype,CE=kE.hasOwnProperty;function _E(n,e){var t=bE(n),r=!t&&yE(n),i=!t&&!r&&xE(n),s=!t&&!r&&!i&&SE(n),o=t||r||i||s,a=o?vE(n.length,String):[],l=a.length;for(var c in n)(e||CE.call(n,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||wE(c,l)))&&a.push(c);return a}var fy=_E;function $E(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var EE=$E,OE=Qn,AE=Lh,PE=EE,TE=Object.prototype,DE=TE.hasOwnProperty;function IE(n){if(!OE(n))return PE(n);var e=AE(n),t=[];for(var r in n)r=="constructor"&&(e||!DE.call(n,r))||t.push(r);return t}var RE=IE,NE=fy,ME=RE,BE=tc;function LE(n){return BE(n)?NE(n,!0):ME(n)}var Lo=LE,FE=Bo,jE=Lo;function VE(n){return FE(n,jE(n))}var HE=VE,xp=Qv,zE=Jv,WE=Zv,qE=ey,UE=ny,wp=iy,Sp=ec,KE=f$,GE=Fh,XE=Ih,YE=Qn,QE=k$,JE=ay,kp=ly,ZE=HE;function eO(n,e,t,r,i,s,o){var a=kp(n,t),l=kp(e,t),c=o.get(l);if(c){xp(n,t,c);return}var u=s?s(a,l,t+"",n,e,o):void 0,f=u===void 0;if(f){var h=Sp(l),d=!h&&GE(l),p=!h&&!d&&JE(l);u=l,h||d||p?Sp(a)?u=a:KE(a)?u=qE(a):d?(f=!1,u=zE(l,!0)):p?(f=!1,u=WE(l,!0)):u=[]:QE(l)||wp(l)?(u=a,wp(a)?u=ZE(a):(!YE(a)||XE(a))&&(u=UE(l))):f=!1}f&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),xp(n,t,u)}var tO=eO,nO=Xv,rO=Qv,iO=E_,sO=tO,oO=Qn,aO=Lo,lO=ly;function hy(n,e,t,r,i){n!==e&&iO(e,function(s,o){if(i||(i=new nO),oO(s))sO(n,e,o,t,hy,r,i);else{var a=r?r(lO(n,o),s,o+"",n,e,i):void 0;a===void 0&&(a=s),rO(n,o,a)}},aO)}var cO=hy;function uO(n){return n}var dy=uO;function fO(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var hO=fO,dO=hO,Cp=Math.max;function pO(n,e,t){return e=Cp(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,s=Cp(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(o),dO(n,this,a)}}var gO=pO;function mO(n){return function(){return n}}var vO=mO,yO=vO,_p=Yv,bO=dy,xO=_p?function(n,e){return _p(n,"toString",{configurable:!0,enumerable:!1,value:yO(e),writable:!0})}:bO,wO=xO,SO=800,kO=16,CO=Date.now;function _O(n){var e=0,t=0;return function(){var r=CO(),i=kO-(r-t);if(t=r,i>0){if(++e>=SO)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var $O=_O,EO=wO,OO=$O,AO=OO(EO),PO=AO,TO=dy,DO=gO,IO=PO;function RO(n,e){return IO(DO(n,e,TO),n+"")}var NO=RO,MO=Xl,BO=tc,LO=uy,FO=Qn;function jO(n,e,t){if(!FO(t))return!1;var r=typeof e;return(r=="number"?BO(t)&&LO(e,t.length):r=="string"&&e in t)?MO(t[e],n):!1}var VO=jO,HO=NO,zO=VO;function WO(n){return HO(function(e,t){var r=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&zO(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,s)}return e})}var qO=WO,UO=cO,KO=qO,GO=KO(function(n,e,t){UO(n,e,t)}),XO=GO;const YO=Kl(XO);function QO(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var JO=QO,ZO=ty,eA=ZO(Object.keys,Object),tA=eA,nA=Lh,rA=tA,iA=Object.prototype,sA=iA.hasOwnProperty;function oA(n){if(!nA(n))return rA(n);var e=[];for(var t in Object(n))sA.call(n,t)&&t!="constructor"&&e.push(t);return e}var aA=oA,lA=fy,cA=aA,uA=tc;function fA(n){return uA(n)?lA(n):cA(n)}var Hh=fA,hA=Bo,dA=Hh;function pA(n,e){return n&&hA(e,dA(e),n)}var gA=pA,mA=Bo,vA=Lo;function yA(n,e){return n&&mA(e,vA(e),n)}var bA=yA;function xA(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}var wA=xA;function SA(){return[]}var py=SA,kA=wA,CA=py,_A=Object.prototype,$A=_A.propertyIsEnumerable,$p=Object.getOwnPropertySymbols,EA=$p?function(n){return n==null?[]:(n=Object(n),kA($p(n),function(e){return $A.call(n,e)}))}:CA,zh=EA,OA=Bo,AA=zh;function PA(n,e){return OA(n,AA(n),e)}var TA=PA;function DA(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var gy=DA,IA=gy,RA=Bh,NA=zh,MA=py,BA=Object.getOwnPropertySymbols,LA=BA?function(n){for(var e=[];n;)IA(e,NA(n)),n=RA(n);return e}:MA,my=LA,FA=Bo,jA=my;function VA(n,e){return FA(n,jA(n),e)}var HA=VA,zA=gy,WA=ec;function qA(n,e,t){var r=e(n);return WA(n)?r:zA(r,t(n))}var vy=qA,UA=vy,KA=zh,GA=Hh;function XA(n){return UA(n,GA,KA)}var YA=XA,QA=vy,JA=my,ZA=Lo;function eP(n){return QA(n,ZA,JA)}var tP=eP,nP=_i,rP=$n,iP=nP(rP,"DataView"),sP=iP,oP=_i,aP=$n,lP=oP(aP,"Promise"),cP=lP,uP=_i,fP=$n,hP=uP(fP,"Set"),dP=hP,pP=_i,gP=$n,mP=pP(gP,"WeakMap"),vP=mP,lf=sP,cf=Rh,uf=cP,ff=dP,hf=vP,yy=ms,ws=Gv,Ep="[object Map]",yP="[object Object]",Op="[object Promise]",Ap="[object Set]",Pp="[object WeakMap]",Tp="[object DataView]",bP=ws(lf),xP=ws(cf),wP=ws(uf),SP=ws(ff),kP=ws(hf),Zr=yy;(lf&&Zr(new lf(new ArrayBuffer(1)))!=Tp||cf&&Zr(new cf)!=Ep||uf&&Zr(uf.resolve())!=Op||ff&&Zr(new ff)!=Ap||hf&&Zr(new hf)!=Pp)&&(Zr=function(n){var e=yy(n),t=e==yP?n.constructor:void 0,r=t?ws(t):"";if(r)switch(r){case bP:return Tp;case xP:return Ep;case wP:return Op;case SP:return Ap;case kP:return Pp}return e});var Wh=Zr,CP=Object.prototype,_P=CP.hasOwnProperty;function $P(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&_P.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var EP=$P,OP=Mh;function AP(n,e){var t=e?OP(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var PP=AP,TP=/\w*$/;function DP(n){var e=new n.constructor(n.source,TP.exec(n));return e.lastIndex=n.lastIndex,e}var IP=DP,Dp=Dh,Ip=Dp?Dp.prototype:void 0,Rp=Ip?Ip.valueOf:void 0;function RP(n){return Rp?Object(Rp.call(n)):{}}var NP=RP,MP=Mh,BP=PP,LP=IP,FP=NP,jP=Zv,VP="[object Boolean]",HP="[object Date]",zP="[object Map]",WP="[object Number]",qP="[object RegExp]",UP="[object Set]",KP="[object String]",GP="[object Symbol]",XP="[object ArrayBuffer]",YP="[object DataView]",QP="[object Float32Array]",JP="[object Float64Array]",ZP="[object Int8Array]",eT="[object Int16Array]",tT="[object Int32Array]",nT="[object Uint8Array]",rT="[object Uint8ClampedArray]",iT="[object Uint16Array]",sT="[object Uint32Array]";function oT(n,e,t){var r=n.constructor;switch(e){case XP:return MP(n);case VP:case HP:return new r(+n);case YP:return BP(n,t);case QP:case JP:case ZP:case eT:case tT:case nT:case rT:case iT:case sT:return jP(n,t);case zP:return new r;case WP:case KP:return new r(n);case qP:return LP(n);case UP:return new r;case GP:return FP(n)}}var aT=oT,lT=Wh,cT=Wr,uT="[object Map]";function fT(n){return cT(n)&&lT(n)==uT}var hT=fT,dT=hT,pT=jh,Np=Vh,Mp=Np&&Np.isMap,gT=Mp?pT(Mp):dT,mT=gT,vT=Wh,yT=Wr,bT="[object Set]";function xT(n){return yT(n)&&vT(n)==bT}var wT=xT,ST=wT,kT=jh,Bp=Vh,Lp=Bp&&Bp.isSet,CT=Lp?kT(Lp):ST,_T=CT,$T=Xv,ET=JO,OT=cy,AT=gA,PT=bA,TT=Jv,DT=ey,IT=TA,RT=HA,NT=YA,MT=tP,BT=Wh,LT=EP,FT=aT,jT=ny,VT=ec,HT=Fh,zT=mT,WT=Qn,qT=_T,UT=Hh,KT=Lo,GT=1,XT=2,YT=4,by="[object Arguments]",QT="[object Array]",JT="[object Boolean]",ZT="[object Date]",eD="[object Error]",xy="[object Function]",tD="[object GeneratorFunction]",nD="[object Map]",rD="[object Number]",wy="[object Object]",iD="[object RegExp]",sD="[object Set]",oD="[object String]",aD="[object Symbol]",lD="[object WeakMap]",cD="[object ArrayBuffer]",uD="[object DataView]",fD="[object Float32Array]",hD="[object Float64Array]",dD="[object Int8Array]",pD="[object Int16Array]",gD="[object Int32Array]",mD="[object Uint8Array]",vD="[object Uint8ClampedArray]",yD="[object Uint16Array]",bD="[object Uint32Array]",Ie={};Ie[by]=Ie[QT]=Ie[cD]=Ie[uD]=Ie[JT]=Ie[ZT]=Ie[fD]=Ie[hD]=Ie[dD]=Ie[pD]=Ie[gD]=Ie[nD]=Ie[rD]=Ie[wy]=Ie[iD]=Ie[sD]=Ie[oD]=Ie[aD]=Ie[mD]=Ie[vD]=Ie[yD]=Ie[bD]=!0;Ie[eD]=Ie[xy]=Ie[lD]=!1;function Ia(n,e,t,r,i,s){var o,a=e&GT,l=e&XT,c=e&YT;if(t&&(o=i?t(n,r,i,s):t(n)),o!==void 0)return o;if(!WT(n))return n;var u=VT(n);if(u){if(o=LT(n),!a)return DT(n,o)}else{var f=BT(n),h=f==xy||f==tD;if(HT(n))return TT(n,a);if(f==wy||f==by||h&&!i){if(o=l||h?{}:jT(n),!a)return l?RT(n,PT(o,n)):IT(n,AT(o,n))}else{if(!Ie[f])return i?n:{};o=FT(n,f,a)}}s||(s=new $T);var d=s.get(n);if(d)return d;s.set(n,o),qT(n)?n.forEach(function(m){o.add(Ia(m,e,t,m,n,s))}):zT(n)&&n.forEach(function(m,v){o.set(v,Ia(m,e,t,v,n,s))});var p=c?l?MT:NT:l?KT:UT,g=u?void 0:p(n);return ET(g||n,function(m,v){g&&(v=m,m=n[v]),OT(o,v,Ia(m,e,t,v,n,s))}),o}var xD=Ia,wD=xD,SD=1,kD=4;function CD(n){return wD(n,SD|kD)}var _D=CD;const qh=Kl(_D);function Sy(n){const e={model:n.modelOptions.model,temperature:n.modelOptions.temperature,max_tokens:n.modelOptions.maxTokens,top_p:n.modelOptions.topP,frequency_penalty:n.modelOptions.frequencyPenalty,presence_penalty:n.modelOptions.presencePenalty,messages:$D(n)},t=ED(n);return t.length&&(e.functions=t),e}function $D(n){const e=[];e.push({role:"system",content:n.systemMessage});for(const t of n.messages){const r={role:t.role};t.role==="user"?r.content=t.content:t.role==="assistant"?t.useFunction?(r.content="",r.function_call={name:t.functionName,arguments:t.functionParameters}):r.content=t.content:t.role==="function"&&(r.name=t.functionName,r.content=t.functionParameters),e.push(r)}return e}function ED(n){const e=[];for(const t of n.functions){let r={};try{r=JSON.parse(t.parameters)}catch{}e.push({name:t.name,description:t.description,parameters:r})}return e}const OD=/^data: /;function AD(n){const e=[],t=n.split(`
`);for(const r of t){if(r==="")continue;const i=r.replace(OD,"");if(i!=="[DONE]")try{const s=JSON.parse(i),o={id:s.id,content:s.choices[0].delta.content??void 0,function_name:s.choices[0].delta.function_call?.name??void 0,function_arguments:s.choices[0].delta.function_call?.arguments??void 0,done:!!s.choices[0].finish_reason};e.push(o)}catch{continue}}return e}const Fp="openGPTPlayground",PD="1.0",TD={"gpt-3.5-turbo":"gpt-3.5-turbo","gpt-3.5-turbo-16k":"gpt-3.5-turbo-16k","gpt-4":"gpt-4","gpt-4-32k":"gpt-4-32k"},DD="gpt-3.5-turbo",jp={system:"System",user:"User",assistant:"Assistant",function:"Function"};function ir(){return{id:`userdef-${Wv(20)}`,role:"user",content:"",functionName:"",functionParameters:"",useFunction:!1}}function Uh(){return{id:`func-${Wv(20)}`,name:"new_function",description:"",parameters:`{
  "type": "object",
  "properties": {
    "param1": { "type": "string", "description": "The first parameter" },
    "param2": { "type": "integer", "description": "The second parameter" }
  },
  "required": []
}`}}function wo(){return{systemMessage:"",messages:[ir()],functions:[],modelOptions:{model:DD,temperature:1,maxTokens:256,topP:1,frequencyPenalty:0,presencePenalty:0},error:"",generating:!1}}const qr=Ev([wo(),{}]),ID=n=>{const[e,t]=Th(wo()),r=(...c)=>{t(...c),a(e)},i={setSystemMessage:c=>r("systemMessage",()=>c),messages:{setRole:(c,u)=>{const f=e.messages.findIndex(h=>h.id===c);f<0||r("messages",f,"role",()=>u)},setContent:(c,u)=>{const f=e.messages.findIndex(h=>h.id===c);f<0||r("messages",f,"content",()=>u)},setFunctionName:(c,u)=>{const f=e.messages.findIndex(h=>h.id===c);f<0||r("messages",f,"functionName",()=>u)},setFunctionParameters:(c,u)=>{const f=e.messages.findIndex(h=>h.id===c);f<0||r("messages",f,"functionParameters",()=>u)},setUseFunction:(c,u)=>{const f=e.messages.findIndex(h=>h.id===c);f<0||r("messages",f,"useFunction",()=>u)},create:c=>{const u={...ir(),...c};return r("messages",f=>[...f,u]),u},delete:c=>r("messages",u=>[...u].filter(f=>f.id!==c))},functions:{setName:(c,u)=>{const f=e.functions.findIndex(h=>h.id===c);f<0||r("functions",f,"name",()=>u)},setDescription:(c,u)=>{const f=e.functions.findIndex(h=>h.id===c);f<0||r("functions",f,"description",()=>u)},setParameters:(c,u)=>{const f=e.functions.findIndex(h=>h.id===c);f<0||r("functions",f,"parameters",()=>u)},create:c=>{const u={...Uh(),...c};return r("functions",f=>[...f,u]),u},delete:c=>r("functions",u=>[...u].filter(f=>f.id!==c))},setModel:c=>r("modelOptions","model",()=>c),setTemperature:c=>r("modelOptions","temperature",()=>c),setMaxTokens:c=>r("modelOptions","maxTokens",()=>c),setTopP:c=>r("modelOptions","topP",()=>c),setFreqencyPenalty:c=>r("modelOptions","frequencyPenalty",()=>c),setPresencePenalty:c=>r("modelOptions","presencePenalty",()=>c),submit:s,setError:c=>r("error",()=>c),setGenerating:c=>r("generating",()=>c),loadState:c=>{const u=wo();r(YO(u,qh(c)))}};async function s(){i.setError(""),i.setGenerating(!0);try{const c={...Sy(e),stream:!0},u=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Zi()}`},body:JSON.stringify(c)});if(!u.ok){const d=Error(u.statusText);throw d.statusCode=u.status,d}const f=u.body?.getReader();if(!f)throw new Error("Unknown error");const h=new TextDecoder("utf-8");for(;;){const{done:d,value:p}=await f.read();if(d)break;const g=h.decode(p),m=AD(g);for(const v of m)o(v)}}catch(c){c.statusCode===400?i.setError("Request failed by OpenAI's validation. Function names must contain only [a-z0-9_-] and at most 64 characters. Function parameters must describe a JSON Schema. See the docs for details."):i.setError("An unknown error occurred during generation"),r("generating",!1)}}function o(c){const u=e.messages.findIndex(f=>f.id===c.id);if(u<0){const f={id:c.id,role:"assistant",content:c.content,functionName:c.function_name,functionParameters:c.function_arguments,useFunction:!!(c.function_name||c.function_arguments)};i.messages.create(f)}else c.content&&r("messages",u,"content",f=>f+c.content),c.function_name&&r("messages",u,"functionName",f=>f+c.function_name),c.function_arguments&&r("messages",u,"functionParameters",f=>f+c.function_arguments);c.done&&r("generating",!1)}wi(()=>{try{const c=MS(hr.STATE);if(!c)return;const u=JSON.parse(c),{schema:f,version:h,...d}=u;if(f!==Fp||!h)throw new Error("Tried to load invalid state data!");i.loadState(d)}catch(c){console.error(c)}});const a=Kv(c=>{try{const u={modelOptions:c.modelOptions,systemMessage:c.systemMessage,messages:c.messages,functions:c.functions},f={schema:Fp,version:PD,...u},h=JSON.stringify(f);NS(hr.STATE,h)}catch(u){console.error(u)}},500),l=[e,i];return G(qr.Provider,{value:l,get children(){return n.children}})},$r={"Default Preset: Empty":wo(),"Default Preset: Example":{...wo(),systemMessage:"You are a helpful chat bot with the ability to report the current weather.",messages:[{...ir(),role:"user",content:"Hello, how are you?"},{...ir(),role:"assistant",content:"Hello! I'm an AI, so I don't have feelings, but I'm ready and equipped to assist you. How can I help you today?"},{...ir(),role:"user",content:"What is the weather like in New York?",useFunction:!0,functionName:"get_current_weather"},{...ir(),role:"assistant",useFunction:!0,functionName:"get_current_weather",functionParameters:'{"location": "New York"}'},{...ir(),role:"function",functionName:"get_current_weather",functionParameters:'"Partly cloudy 84Â°F"'},{...ir(),role:"assistant",content:"The current weather in New York is partly cloudy and 84Â°F."}],functions:[{...Uh(),name:"get_current_weather",description:"Get the current weather in a given location",parameters:`{
  "type": "object",
  "properties": {
    "location": { "type": "string", "description": "The city and state, e.g. San Francisco, CA" },
    "unit": { "type": "string", "enum": ["celsius", "fahrenheit"] }
  },
  "required": ["location"]
}
`}]}};function ky(){return{presets:qh($r)}}const Cy=Ev([ky(),{}]),RD=n=>{const[e,t]=Th(ky()),r=(...a)=>{t(...a),s(e)},i={createPreset:(a,l)=>{$r[a]||r("presets",c=>{const u={...c};return u[a]=qh(l),u})},deletePreset:a=>{$r[a]||r("presets",l=>{const c={...l};return c[a]=void 0,c})},loadPresets:a=>{r("presets",{...a,...$r})}};wi(()=>{try{const a=Ah(hr.PRESETS);if(!a)return;const l=JSON.parse(a);if(typeof l!="object")throw new Error("Tried to load invalid preset data!");i.loadPresets(l)}catch(a){console.error(a)}});const s=Kv(a=>{try{const l=Object.fromEntries(Object.entries(a.presets).filter(([u])=>!$r[u])),c=JSON.stringify(l);Oh(hr.PRESETS,c)}catch(l){console.error(l)}},500),o=[e,i];return G(Cy.Provider,{value:o,get children(){return n.children}})},ND=we('<a rel="noopener noreferrer" target="_blank">'),du=n=>(()=>{const e=ND();return Ee(e,n,!1,!1),e})(),MD=we("<button>"),Vp={default:"bg-grey-200 hocus-visible:bg-grey-300 text-black",primary:"bg-primary hocus-visible:bg-primary-dark text-white",secondary:"bg-grey-200 hocus-visible:bg-grey-300 text-black",transparent:"bg-transparent text-black"},At=n=>{const e=_n(n,{variation:"default",class:""}),[t,r]=Mo(e,["class"]),i=_e(()=>Vp[e.variation]??Vp.default);return(()=>{const s=MD();return Ee(s,xe({get class(){return`h-[2.5em] px-4 flex justify-center items-center rounded transition-colors whitespace-nowrap disabled:opacity-70 disabled:pointer-events-none ${i()} ${t.class}`}},r),!1,!1),s})()},fi=(n,e=[])=>({parts:(...t)=>{if(BD(e))return fi(n,t);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...t)=>fi(n,[...e,...t]),rename:t=>fi(t,e),keys:()=>e,build:()=>[...new Set(e)].reduce((t,r)=>Object.assign(t,{[r]:{selector:[`&[data-scope="${Pi(n)}"][data-part="${Pi(r)}"]`,`& [data-scope="${Pi(n)}"][data-part="${Pi(r)}"]`].join(", "),attrs:{"data-scope":Pi(n),"data-part":Pi(r)}}}),{})}),Pi=n=>n.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),BD=n=>n.length===0,LD=fi("combobox").parts("root","label","input","positioner","control","trigger","content","clearTrigger","option","optionGroup"),Nn=LD.build(),li=(n,e,t,r)=>{const i=typeof n=="function"?n():n;return i?.addEventListener(e,t,r),()=>{i?.removeEventListener(e,t,r)}},df=n=>n.button===0,FD=n=>n.button===2||HD(n)&&n.button===0,jD=n=>n.ctrlKey||n.altKey||n.metaKey,VD=()=>/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),HD=n=>VD()?n.metaKey&&!n.ctrlKey:n.ctrlKey&&!n.metaKey;function Hp(n,e,t){if(!n)return;const r=n.ownerDocument.defaultView||window,i=new r.CustomEvent(e,t);return n.dispatchEvent(i)}const zD={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},zp={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function _y(n,e={}){const{dir:t="ltr",orientation:r="horizontal"}=e;let{key:i}=n;return i=zD[i]??i,t==="rtl"&&r==="horizontal"&&i in zp&&(i=zp[i]),i}function WD(n,e="client"){const t=n.touches[0]||n.changedTouches[0];return{x:t[`${e}X`],y:t[`${e}Y`]}}function qD(n,e="client"){return{x:n[`${e}X`],y:n[`${e}Y`]}}const UD=n=>"touches"in n&&n.touches.length>0;function $y(n,e="client"){return UD(n)?WD(n,e):qD(n,e)}const KD=new Set(["PageUp","PageDown"]),GD=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);function XD(n){return n.ctrlKey||n.metaKey?.1:KD.has(n.key)||n.shiftKey&&GD.has(n.key)?10:1}function Ra(n){return n.nativeEvent??n}function Wp(n){return Math.max(0,Math.min(1,n))}function YD(n,e){const{left:t,top:r,width:i,height:s}=e.getBoundingClientRect(),o={x:n.x-t,y:n.y-r},a={x:Wp(o.x/i),y:Wp(o.y/s)};function l(c={}){const{dir:u="ltr",orientation:f="horizontal",inverted:h}=c,d=typeof h=="object"?h.x:h,p=typeof h=="object"?h.y:h;return f==="horizontal"?u==="rtl"||d?1-a.x:a.x:p?1-a.y:a.y}return{offset:o,percent:a,getPercentValue:l}}const le=n=>n?"":void 0,pf=n=>n?"true":void 0;function il(n){return typeof n=="object"&&n?.nodeType===Node.ELEMENT_NODE&&typeof n?.nodeName=="string"}function So(n,e){return!n||!e||!il(n)||!il(e)?!1:n===e||n.contains(e)}const QD=n=>n.nodeType===Node.DOCUMENT_NODE?n:n.ownerDocument??document;function nc(n){const e={getRootNode:t=>t.getRootNode?.()??document,getDoc:t=>QD(e.getRootNode(t)),getWin:t=>e.getDoc(t).defaultView??window,getActiveElement:t=>e.getDoc(t).activeElement,getById:(t,r)=>e.getRootNode(t).getElementById(r),queryById:(t,r)=>{const i=e.getById(t,r);if(!i)throw new Error(`Element with id "${r}" not found.`);return i}};return{...e,...n}}const JD=n=>n.nodeType===Node.DOCUMENT_NODE;function Kh(n){return JD(n)?n:n?.ownerDocument??document}function ZD(n){return n?.ownerDocument.defaultView??window}function e4(n,e){return n.find(t=>t.id===e)}function Ey(n,e){const t=e4(n,e);return t?n.indexOf(t):-1}function t4(n,e,t=!0){let r=Ey(n,e);return r=t?(r+1)%n.length:Math.min(r+1,n.length-1),n[r]}function n4(n,e,t=!0){let r=Ey(n,e);return r===-1?t?n[n.length-1]:null:(r=t?(r-1+n.length)%n.length:Math.max(0,r-1),n[r])}function sl(n){return n.composedPath?.()[0]??n.target}const Oy=()=>typeof document<"u";function r4(){return navigator.userAgentData?.platform??navigator.platform}const Ay=n=>Oy()&&n.test(r4()),i4=()=>Oy()&&!!navigator.maxTouchPoints,s4=()=>Ay(/^Mac/)&&!i4(),o4=()=>Ay(/mac|iphone|ipad|ipod/i),Gh=()=>o4()&&!s4();function a4(n,e){return Array.from(n?.querySelectorAll(e)??[])}function Py(n){const e=new Set;function t(r){const i=globalThis.requestAnimationFrame(r);e.add(()=>globalThis.cancelAnimationFrame(i))}return t(()=>t(n)),function(){e.forEach(i=>i())}}function xt(n){const e=globalThis.requestAnimationFrame(n);return()=>{globalThis.cancelAnimationFrame(e)}}let Bi="default",gf="";const Na=new WeakMap;function l4(n={}){const{target:e,doc:t}=n,r=t??document,i=r.documentElement;return Gh()?(Bi==="default"&&(gf=i.style.webkitUserSelect,i.style.webkitUserSelect="none"),Bi="disabled"):e&&(Na.set(e,e.style.userSelect),e.style.userSelect="none"),()=>c4({target:e,doc:r})}function c4(n={}){const{target:e,doc:t}=n,i=(t??document).documentElement;if(Gh()){if(Bi!=="disabled")return;Bi="restoring",setTimeout(()=>{Py(()=>{Bi==="restoring"&&(i.style.webkitUserSelect==="none"&&(i.style.webkitUserSelect=gf||""),gf="",Bi="default")})},300)}else if(e&&Na.has(e)){const s=Na.get(e);e.style.userSelect==="none"&&(e.style.userSelect=s??""),e.getAttribute("style")===""&&e.removeAttribute("style"),Na.delete(e)}}function u4(n={}){const{defer:e,target:t,...r}=n,i=e?xt:o=>o(),s=[];return s.push(i(()=>{const o=typeof t=="function"?t():t;s.push(l4({...r,target:o}))})),()=>{s.forEach(o=>o?.())}}function f4(n,e){const{onPointerMove:t,onPointerUp:r}=e,s=[li(n,"pointermove",o=>{const a=$y(o),l=Math.sqrt(a.x**2+a.y**2),c=o.pointerType==="touch"?10:5;if(!(l<c)){if(o.pointerType==="mouse"&&o.button===0){r();return}t({point:a,event:o})}},!1),li(n,"pointerup",r,!1),li(n,"pointercancel",r,!1),li(n,"contextmenu",r,!1),u4({doc:n})];return()=>{s.forEach(o=>o())}}function Ss(n){return n.split("-")[1]}function Xh(n){return n==="y"?"height":"width"}function Dr(n){return n.split("-")[0]}function ks(n){return["top","bottom"].includes(Dr(n))?"x":"y"}function qp(n,e,t){let{reference:r,floating:i}=n;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=ks(e),l=Xh(a),c=r[l]/2-i[l]/2,u=a==="x";let f;switch(Dr(e)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(Ss(e)){case"start":f[a]-=c*(t&&u?-1:1);break;case"end":f[a]+=c*(t&&u?-1:1)}return f}const h4=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:u,y:f}=qp(c,r,l),h=r,d={},p=0;for(let g=0;g<a.length;g++){const{name:m,fn:v}=a[g],{x:y,y:b,data:w,reset:k}=await v({x:u,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:d,rects:c,platform:o,elements:{reference:n,floating:e}});u=y??u,f=b??f,d={...d,[m]:{...d[m],...w}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):k.rects),{x:u,y:f}=qp(c,h,l)),g=-1)}return{x:u,y:f,placement:h,strategy:i,middlewareData:d}};function Cs(n,e){return typeof n=="function"?n(e):n}function Ty(n){return typeof n!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(n):{top:n,right:n,bottom:n,left:n}}function ol(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}async function Yh(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=Cs(e,n),p=Ty(d),g=a[h?f==="floating"?"reference":"floating":f],m=ol(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(g)))==null||t?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=f==="floating"?{...o.floating,x:r,y:i}:o.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(y))&&await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1},w=ol(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:y,strategy:l}):v);return{top:(m.top-w.top+p.top)/b.y,bottom:(w.bottom-m.bottom+p.bottom)/b.y,left:(m.left-w.left+p.left)/b.x,right:(w.right-m.right+p.right)/b.x}}const ko=Math.min,ei=Math.max;function mf(n,e,t){return ei(n,ko(e,t))}const d4=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:a}=e,{element:l,padding:c=0}=Cs(n,e)||{};if(l==null)return{};const u=Ty(c),f={x:t,y:r},h=ks(i),d=Xh(h),p=await o.getDimensions(l),g=h==="y",m=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=s.reference[d]+s.reference[h]-f[h]-s.floating[d],w=f[h]-s.reference[h],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let x=k?k[y]:0;x&&await(o.isElement==null?void 0:o.isElement(k))||(x=a.floating[y]||s.floating[d]);const C=b/2-w/2,P=x/2-p[d]/2-1,I=ko(u[m],P),$=ko(u[v],P),_=I,O=x-p[d]-$,M=x/2-p[d]/2+C,V=mf(_,M,O),W=Ss(i)!=null&&M!=V&&s.reference[d]/2-(M<_?I:$)-p[d]/2<0?M<_?_-M:O-M:0;return{[h]:f[h]-W,data:{[h]:V,centerOffset:M-V+W}}}}),p4=["top","right","bottom","left"];p4.reduce((n,e)=>n.concat(e,e+"-start",e+"-end"),[]);const g4={left:"right",right:"left",bottom:"top",top:"bottom"};function al(n){return n.replace(/left|right|bottom|top/g,e=>g4[e])}function m4(n,e,t){t===void 0&&(t=!1);const r=Ss(n),i=ks(n),s=Xh(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=al(o)),{main:o,cross:al(o)}}const v4={start:"end",end:"start"};function pu(n){return n.replace(/start|end/g,e=>v4[e])}const y4=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:p=!0,...g}=Cs(n,e),m=Dr(r),v=Dr(o)===o,y=await(a.isRTL==null?void 0:a.isRTL(l.floating)),b=f||(v||!p?[al(o)]:function(_){const O=al(_);return[pu(_),O,pu(O)]}(o));f||d==="none"||b.push(...function(_,O,M,V){const W=Ss(_);let q=function(te,ee,J){const H=["left","right"],E=["right","left"],R=["top","bottom"],T=["bottom","top"];switch(te){case"top":case"bottom":return J?ee?E:H:ee?H:E;case"left":case"right":return ee?R:T;default:return[]}}(Dr(_),M==="start",V);return W&&(q=q.map(te=>te+"-"+W),O&&(q=q.concat(q.map(pu)))),q}(o,p,d,y));const w=[o,...b],k=await Yh(e,g),x=[];let C=((t=i.flip)==null?void 0:t.overflows)||[];if(c&&x.push(k[m]),u){const{main:_,cross:O}=m4(r,s,y);x.push(k[_],k[O])}if(C=[...C,{placement:r,overflows:x}],!x.every(_=>_<=0)){var P,I;const _=(((P=i.flip)==null?void 0:P.index)||0)+1,O=w[_];if(O)return{data:{index:_,overflows:C},reset:{placement:O}};let M=(I=C.filter(V=>V.overflows[0]<=0).sort((V,W)=>V.overflows[1]-W.overflows[1])[0])==null?void 0:I.placement;if(!M)switch(h){case"bestFit":{var $;const V=($=C.map(W=>[W.placement,W.overflows.filter(q=>q>0).reduce((q,te)=>q+te,0)]).sort((W,q)=>W[1]-q[1])[0])==null?void 0:$[0];V&&(M=V);break}case"initialPlacement":M=o}if(r!==M)return{reset:{placement:M}}}return{}}}},b4=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:r}=e,i=await async function(s,o){const{placement:a,platform:l,elements:c}=s,u=await(l.isRTL==null?void 0:l.isRTL(c.floating)),f=Dr(a),h=Ss(a),d=ks(a)==="x",p=["left","top"].includes(f)?-1:1,g=u&&d?-1:1,m=Cs(o,s);let{mainAxis:v,crossAxis:y,alignmentAxis:b}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return h&&typeof b=="number"&&(y=h==="end"?-1*b:b),d?{x:y*g,y:v*p}:{x:v*p,y:y*g}}(e,n);return{x:t+i.x,y:r+i.y,data:i}}}};function x4(n){return n==="x"?"y":"x"}const w4=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:v,y}=m;return{x:v,y}}},...l}=Cs(n,e),c={x:t,y:r},u=await Yh(e,l),f=ks(Dr(i)),h=x4(f);let d=c[f],p=c[h];if(s){const m=f==="y"?"bottom":"right";d=mf(d+u[f==="y"?"top":"left"],d,d-u[m])}if(o){const m=h==="y"?"bottom":"right";p=mf(p+u[h==="y"?"top":"left"],p,p-u[m])}const g=a.fn({...e,[f]:d,[h]:p});return{...g,data:{x:g.x-t,y:g.y-r}}}}},S4=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){const{placement:t,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=Cs(n,e),l=await Yh(e,a),c=Dr(t),u=Ss(t),f=ks(t)==="x",{width:h,height:d}=r.floating;let p,g;c==="top"||c==="bottom"?(p=c,g=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,p=u==="end"?"top":"bottom");const m=d-l[p],v=h-l[g],y=!e.middlewareData.shift;let b=m,w=v;if(f){const x=h-l.left-l.right;w=u||y?ko(v,x):x}else{const x=d-l.top-l.bottom;b=u||y?ko(m,x):x}if(y&&!u){const x=ei(l.left,0),C=ei(l.right,0),P=ei(l.top,0),I=ei(l.bottom,0);f?w=h-2*(x!==0||C!==0?x+C:ei(l.left,l.right)):b=d-2*(P!==0||I!==0?P+I:ei(l.top,l.bottom))}await o({...e,availableWidth:w,availableHeight:b});const k=await i.getDimensions(s.floating);return h!==k.width||d!==k.height?{reset:{rects:!0}}:{}}}};function on(n){var e;return((e=n.ownerDocument)==null?void 0:e.defaultView)||window}function xn(n){return on(n).getComputedStyle(n)}function Dy(n){return n instanceof on(n).Node}function Lr(n){return Dy(n)?(n.nodeName||"").toLowerCase():"#document"}function Cn(n){return n instanceof on(n).HTMLElement}function lr(n){return n instanceof on(n).Element}function Up(n){return typeof ShadowRoot<"u"&&(n instanceof on(n).ShadowRoot||n instanceof ShadowRoot)}function Co(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=xn(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function k4(n){return["table","td","th"].includes(Lr(n))}function vf(n){const e=Qh(),t=xn(n);return t.transform!=="none"||t.perspective!=="none"||!!t.containerType&&t.containerType!=="normal"||!e&&!!t.backdropFilter&&t.backdropFilter!=="none"||!e&&!!t.filter&&t.filter!=="none"||["transform","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function Qh(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function rc(n){return["html","body","#document"].includes(Lr(n))}const Kp=Math.min,oo=Math.max,ll=Math.round,pi=n=>({x:n,y:n});function Iy(n){const e=xn(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Cn(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,a=ll(t)!==s||ll(r)!==o;return a&&(t=s,r=o),{width:t,height:r,$:a}}function Ry(n){return lr(n)?n:n.contextElement}function zi(n){const e=Ry(n);if(!Cn(e))return pi(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=Iy(e);let o=(s?ll(t.width):t.width)/r,a=(s?ll(t.height):t.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const Gp=pi(0);function Ny(n,e,t){var r,i;if(e===void 0&&(e=!0),!Qh())return Gp;const s=n?on(n):window;return!t||e&&t!==s?Gp:{x:((r=s.visualViewport)==null?void 0:r.offsetLeft)||0,y:((i=s.visualViewport)==null?void 0:i.offsetTop)||0}}function _o(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=Ry(n);let o=pi(1);e&&(r?lr(r)&&(o=zi(r)):o=zi(n));const a=Ny(s,t,r);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,f=i.height/o.y;if(s){const h=on(s),d=r&&lr(r)?on(r):r;let p=h.frameElement;for(;p&&r&&d!==h;){const g=zi(p),m=p.getBoundingClientRect(),v=getComputedStyle(p),y=m.left+(p.clientLeft+parseFloat(v.paddingLeft))*g.x,b=m.top+(p.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,f*=g.y,l+=y,c+=b,p=on(p).frameElement}}return ol({width:u,height:f,x:l,y:c})}function Ir(n){return((Dy(n)?n.ownerDocument:n.document)||window.document).documentElement}function ic(n){return lr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function My(n){return _o(Ir(n)).left+ic(n).scrollLeft}function ts(n){if(Lr(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Up(n)&&n.host||Ir(n);return Up(e)?e.host:e}function By(n){const e=ts(n);return rc(e)?n.ownerDocument?n.ownerDocument.body:n.body:Cn(e)&&Co(e)?e:By(e)}function Jh(n,e){var t;e===void 0&&(e=[]);const r=By(n),i=r===((t=n.ownerDocument)==null?void 0:t.body),s=on(r);return i?e.concat(s,s.visualViewport||[],Co(r)?r:[]):e.concat(r,Jh(r))}function Xp(n,e,t){let r;if(e==="viewport")r=function(i,s){const o=on(i),a=Ir(i),l=o.visualViewport;let c=a.clientWidth,u=a.clientHeight,f=0,h=0;if(l){c=l.width,u=l.height;const d=Qh();(!d||d&&s==="fixed")&&(f=l.offsetLeft,h=l.offsetTop)}return{width:c,height:u,x:f,y:h}}(n,t);else if(e==="document")r=function(i){const s=Ir(i),o=ic(i),a=i.ownerDocument.body,l=oo(s.scrollWidth,s.clientWidth,a.scrollWidth,a.clientWidth),c=oo(s.scrollHeight,s.clientHeight,a.scrollHeight,a.clientHeight);let u=-o.scrollLeft+My(i);const f=-o.scrollTop;return xn(a).direction==="rtl"&&(u+=oo(s.clientWidth,a.clientWidth)-l),{width:l,height:c,x:u,y:f}}(Ir(n));else if(lr(e))r=function(i,s){const o=_o(i,!0,s==="fixed"),a=o.top+i.clientTop,l=o.left+i.clientLeft,c=Cn(i)?zi(i):pi(1);return{width:i.clientWidth*c.x,height:i.clientHeight*c.y,x:l*c.x,y:a*c.y}}(e,t);else{const i=Ny(n);r={...e,x:e.x-i.x,y:e.y-i.y}}return ol(r)}function Ly(n,e){const t=ts(n);return!(t===e||!lr(t)||rc(t))&&(xn(t).position==="fixed"||Ly(t,e))}function Yp(n,e){return Cn(n)&&xn(n).position!=="fixed"?e?e(n):n.offsetParent:null}function Qp(n,e){const t=on(n);if(!Cn(n))return t;let r=Yp(n,e);for(;r&&k4(r)&&xn(r).position==="static";)r=Yp(r,e);return r&&(Lr(r)==="html"||Lr(r)==="body"&&xn(r).position==="static"&&!vf(r))?t:r||function(i){let s=ts(i);for(;Cn(s)&&!rc(s);){if(vf(s))return s;s=ts(s)}return null}(n)||t}function C4(n,e,t){const r=Cn(e),i=Ir(e),s=t==="fixed",o=_o(n,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=pi(0);if(r||!r&&!s)if((Lr(e)!=="body"||Co(i))&&(a=ic(e)),Cn(e)){const c=_o(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else i&&(l.x=My(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}const _4={getClippingRect:function(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const s=t==="clippingAncestors"?function(c,u){const f=u.get(c);if(f)return f;let h=Jh(c).filter(m=>lr(m)&&Lr(m)!=="body"),d=null;const p=xn(c).position==="fixed";let g=p?ts(c):c;for(;lr(g)&&!rc(g);){const m=xn(g),v=vf(g);v||m.position!=="fixed"||(d=null),(p?!v&&!d:!v&&m.position==="static"&&d&&["absolute","fixed"].includes(d.position)||Co(g)&&!v&&Ly(c,g))?h=h.filter(y=>y!==g):d=m,g=ts(g)}return u.set(c,h),h}(e,this._c):[].concat(t),o=[...s,r],a=o[0],l=o.reduce((c,u)=>{const f=Xp(e,u,i);return c.top=oo(f.top,c.top),c.right=Kp(f.right,c.right),c.bottom=Kp(f.bottom,c.bottom),c.left=oo(f.left,c.left),c},Xp(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(n){let{rect:e,offsetParent:t,strategy:r}=n;const i=Cn(t),s=Ir(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=pi(1);const l=pi(0);if((i||!i&&r!=="fixed")&&((Lr(t)!=="body"||Co(s))&&(o=ic(t)),Cn(t))){const c=_o(t);a=zi(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}},isElement:lr,getDimensions:function(n){return Iy(n)},getOffsetParent:Qp,getDocumentElement:Ir,getScale:zi,async getElementRects(n){let{reference:e,floating:t,strategy:r}=n;const i=this.getOffsetParent||Qp,s=this.getDimensions;return{reference:C4(e,await i(t),r),floating:{x:0,y:0,...await s(t)}}},getClientRects:n=>Array.from(n.getClientRects()),isRTL:n=>xn(n).direction==="rtl"},$4=(n,e,t)=>{const r=new Map,i={platform:_4,...t},s={...i.platform,_c:r};return h4(n,e,{...i,platform:s})},E4=n=>n[0],O4=n=>n[n.length-1],Jp=(n,...e)=>(typeof n=="function"?n(...e):n)??void 0,yf=(...n)=>(...e)=>{n.forEach(function(t){t?.(...e)})};function Fo(n){if(!A4(n)||n===void 0)return n;const e=Reflect.ownKeys(n).filter(r=>typeof r=="string"),t={};for(const r of e){const i=n[r];i!==void 0&&(t[r]=Fo(i))}return t}const A4=n=>n&&typeof n=="object"&&n.constructor===Object;function P4(...n){const e=n.length===1?n[0]:n[1],t=n.length===2?n[0]:!0}let bf;const ti=new Map,T4=n=>n.getBoundingClientRect();function Zp(n,e){const{scope:t="rect",getRect:r=T4,onChange:i}=e,s=D4({scope:t,getRect:r}),o=ti.get(n);return o?(o.callbacks.push(i),i(r(n))):(ti.set(n,{rect:{},callbacks:[i]}),ti.size===1&&(bf=requestAnimationFrame(s))),function(){const l=ti.get(n);if(!l)return;const c=l.callbacks.indexOf(i);c>-1&&l.callbacks.splice(c,1),l.callbacks.length===0&&(ti.delete(n),ti.size===0&&cancelAnimationFrame(bf))}}function D4(n){const{scope:e,getRect:t}=n,r=R4(e);return function i(){const s=[];ti.forEach((o,a)=>{const l=t(a);r(o.rect,l)||(o.rect=l,s.push(o))}),s.forEach(o=>{o.callbacks.forEach(a=>a(o.rect))}),bf=requestAnimationFrame(i)}}const Fy=(n,e)=>n.width===e.width&&n.height===e.height,jy=(n,e)=>n.top===e.top&&n.left===e.left,I4=(n,e)=>Fy(n,e)&&jy(n,e);function R4(n){return n==="size"?Fy:n==="position"?jy:I4}const gu=(...n)=>()=>n.forEach(e=>e()),eg=n=>typeof n=="object"&&n!==null&&n.nodeType===1,tg=(n,e,t,r)=>(n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r));function N4(n){const e=typeof n=="boolean";return{ancestorResize:e?n:n.ancestorResize??!0,ancestorScroll:e?n:n.ancestorScroll??!0,referenceResize:e?n:n.referenceResize??!0}}function M4(n,e,t,r=!1){const{ancestorScroll:i,ancestorResize:s,referenceResize:o}=N4(r),a=i||s,l=[];a&&eg(n)&&l.push(...Jh(n));function c(){let f=[Zp(e,{scope:"size",onChange:t})];return o&&eg(n)&&f.push(Zp(n,{onChange:t})),f.push(gu(...l.map(h=>tg(h,"resize",t)))),()=>f.forEach(h=>h())}function u(){return gu(...l.map(f=>tg(f,"scroll",t,{passive:!0})))}return gu(c(),u())}const Ls=n=>({variable:n,reference:`var(${n})`}),rr={arrowSize:Ls("--arrow-size"),arrowSizeHalf:Ls("--arrow-size-half"),arrowBg:Ls("--arrow-background"),transformOrigin:Ls("--transform-origin"),arrowOffset:Ls("--arrow-offset")},B4=n=>({top:"bottom center","top-start":n?`${n.x}px bottom`:"left bottom","top-end":n?`${n.x}px bottom`:"right bottom",bottom:"top center","bottom-start":n?`${n.x}px top`:"top left","bottom-end":n?`${n.x}px top`:"top right",left:"right center","left-start":n?`right ${n.y}px`:"right top","left-end":n?`right ${n.y}px`:"right bottom",right:"left center","right-start":n?`left ${n.y}px`:"left top","right-end":n?`left ${n.y}px`:"left bottom"}),L4={name:"transformOrigin",fn({placement:n,elements:e,middlewareData:t}){const{arrow:r}=t,i=B4(r)[n],{floating:s}=e;return s.style.setProperty(rr.transformOrigin.variable,i),{data:{transformOrigin:i}}}},F4=n=>({name:"shiftArrow",fn({placement:e,middlewareData:t}){const{element:r}=n;if(t.arrow){const{x:i,y:s}=t.arrow,o=e.split("-")[0];Object.assign(r.style,{left:i!=null?`${i}px`:"",top:s!=null?`${s}px`:"",[o]:`calc(100% + ${rr.arrowOffset.reference})`})}return{}}}),j4={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,sameWidth:!1,overflowPadding:8};function V4(n,e,t={}){if(!e||!n)return;const r=Object.assign({},j4,t),i=e.querySelector("[data-part=arrow]"),s=[],o=typeof r.boundary=="function"?r.boundary():r.boundary;if(r.flip&&s.push(y4({boundary:o,padding:r.overflowPadding})),r.gutter||r.offset){const l=i?i.offsetHeight/2:0,c=r.offset?r.offset:{mainAxis:r.gutter};c?.mainAxis!=null&&(c.mainAxis+=l),s.push(b4(c))}s.push(w4({boundary:o,crossAxis:r.overlap,padding:r.overflowPadding})),i&&s.push(d4({element:i,padding:8}),F4({element:i})),s.push(L4),s.push(S4({padding:r.overflowPadding,apply({rects:l,availableHeight:c,availableWidth:u}){const f=Math.round(l.reference.width);e.style.setProperty("--reference-width",`${f}px`),e.style.setProperty("--available-width",`${u}px`),e.style.setProperty("--available-height",`${c}px`),r.sameWidth&&Object.assign(e.style,{width:`${f}px`,minWidth:"unset"}),r.fitViewport&&Object.assign(e.style,{maxWidth:`${u}px`,maxHeight:`${c}px`})}}));function a(l={}){if(!n||!e)return;const{placement:c,strategy:u,onComplete:f}=r;$4(n,e,{placement:c,middleware:s,strategy:u,...l}).then(h=>{const d=Math.round(h.x),p=Math.round(h.y);Object.assign(e.style,{position:h.strategy,top:"0px",left:"0px",transform:`translate3d(${d}px, ${p}px, 0)`}),f?.(h)})}return a(),yf(r.listeners?M4(n,e,a,r.listeners):void 0,r.onCleanup)}function H4(n,e,t={}){const{defer:r,...i}=t,s=r?xt:a=>a(),o=[];return o.push(s(()=>{const a=typeof n=="function"?n():n,l=typeof e=="function"?e():e;o.push(V4(a,l,i))})),()=>{o.forEach(a=>a?.())}}const z4={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function W4(n){const{placement:e="bottom"}=n;return{arrow:{position:"absolute",width:rr.arrowSize.reference,height:rr.arrowSize.reference,[rr.arrowSizeHalf.variable]:`calc(${rr.arrowSize.reference} / 2)`,[rr.arrowOffset.variable]:`calc(${rr.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:z4[e.split("-")[0]],background:rr.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:"absolute",minWidth:"max-content",top:"0px",left:"0px"}}}const Z=nc({getRootId:n=>n.ids?.root??`combobox:${n.id}`,getLabelId:n=>n.ids?.label??`combobox:${n.id}:label`,getControlId:n=>n.ids?.control??`combobox:${n.id}:control`,getInputId:n=>n.ids?.input??`combobox:${n.id}:input`,getContentId:n=>n.ids?.content??`combobox:${n.id}:listbox`,getPositionerId:n=>n.ids?.positioner??`combobox:${n.id}:popper`,getTriggerId:n=>n.ids?.trigger??`combobox:${n.id}:toggle-btn`,getClearTriggerId:n=>n.ids?.clearTrigger??`combobox:${n.id}:clear-btn`,getOptionId:(n,e,t)=>n.ids?.option?.(e,t)??[`combobox:${n.id}:option:${e}`,t].filter(r=>r!=null).join(":"),getActiveOptionEl:n=>n.focusedId?Z.getById(n,n.focusedId):null,getContentEl:n=>Z.getById(n,Z.getContentId(n)),getInputEl:n=>Z.getById(n,Z.getInputId(n)),getPositionerEl:n=>Z.getById(n,Z.getPositionerId(n)),getControlEl:n=>Z.getById(n,Z.getControlId(n)),getTriggerEl:n=>Z.getById(n,Z.getTriggerId(n)),getClearTriggerEl:n=>Z.getById(n,Z.getClearTriggerId(n)),getElements:n=>a4(Z.getContentEl(n),"[role=option]:not([aria-disabled=true])"),getFocusedOptionEl:n=>{if(!n.focusedId)return null;const e=`[role=option][id=${CSS.escape(n.focusedId)}]`;return Z.getContentEl(n)?.querySelector(e)},getFirstEl:n=>E4(Z.getElements(n)),getLastEl:n=>O4(Z.getElements(n)),getPrevEl:(n,e)=>n4(Z.getElements(n),e,n.loop),getNextEl:(n,e)=>t4(Z.getElements(n),e,n.loop),isInputFocused:n=>Z.getDoc(n).activeElement===Z.getInputEl(n),getOptionData:n=>({value:n?.getAttribute("data-value")??"",label:n?.getAttribute("data-label")??""}),getOptionCount:n=>{const e=Z.getContentEl(n),t=e?.querySelector("[role=option]")?.getAttribute("aria-setsize");return t!=null?parseInt(t):e?.querySelectorAll("[role=option]").length??0},getMatchingOptionEl:(n,e)=>{if(!e)return null;const t=`[role=option][data-value="${CSS.escape(e)}"`,r=Z.getContentEl(n);return r?r.querySelector(t):null},focusInput:n=>{const e=Z.getInputEl(n);Z.getDoc(n).activeElement!==e&&e?.focus(),n.selectInputOnFocus&&e?.select()},getClosestSectionLabel(n){return n.focusedId?Z.getActiveOptionEl(n)?.closest("[data-part=option-group]")?.getAttribute("aria-label"):void 0},getValueLabel:(n,e)=>{const t=Z.getMatchingOptionEl(n,e);return Z.getOptionData(t).label}});function q4(n,e,t){const r=n.context.translations,i=n.context.disabled,s=n.context.isInteractive,o=n.context.invalid,a=n.context.readOnly,l=n.hasTag("open"),c=n.hasTag("focused"),u=n.hasTag("idle"),f=l&&n.context.navigationData&&n.context.autoComplete,h=(!u||n.context.isHovering)&&!n.context.isInputValueEmpty,d=f?n.context.navigationData?.label:n.context.inputValue,p=W4({placement:n.context.currentPlacement}),g={isFocused:c,isOpen:l,isInputValueEmpty:n.context.isInputValueEmpty,inputValue:n.context.inputValue,focusedOption:n.context.focusedOptionData,selectedValue:n.context.selectionData?.value,setValue(m){let v;typeof m=="string"?v={value:m,label:Z.getValueLabel(n.context,m)}:v=m,e({type:"SET_VALUE",...v})},setInputValue(m){e({type:"SET_INPUT_VALUE",value:m})},clearValue(){e("CLEAR_VALUE")},focus(){Z.getInputEl(n.context)?.focus()},rootProps:t.element({...Nn.root.attrs,id:Z.getRootId(n.context),"data-invalid":le(o),"data-readonly":le(a)}),labelProps:t.label({...Nn.label.attrs,htmlFor:Z.getInputId(n.context),id:Z.getLabelId(n.context),"data-readonly":le(a),"data-disabled":le(i),"data-invalid":le(o),"data-focus":le(c)}),controlProps:t.element({...Nn.control.attrs,id:Z.getControlId(n.context),"data-expanded":le(l),"data-focus":le(c),"data-disabled":le(i),"data-invalid":le(o),onPointerOver(){s&&e("POINTER_OVER")},onPointerLeave(){s&&e("POINTER_LEAVE")}}),positionerProps:t.element({...Nn.positioner.attrs,id:Z.getPositionerId(n.context),"data-expanded":le(l),hidden:!l,style:p.floating}),inputProps:t.input({...Nn.input.attrs,"aria-invalid":pf(o),"data-invalid":le(o),name:n.context.name,form:n.context.form,disabled:i,autoFocus:n.context.autoFocus,autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:"false",readOnly:a,placeholder:n.context.placeholder,id:Z.getInputId(n.context),type:"text",role:"combobox",defaultValue:d,"data-value":d,"aria-autocomplete":n.context.autoComplete?"both":"list","aria-controls":l?Z.getContentId(n.context):void 0,"aria-expanded":l,"aria-activedescendant":n.context.focusedId??void 0,onClick(){s&&e("CLICK_INPUT")},onFocus(){i||e("FOCUS")},onChange(m){e({type:"CHANGE",value:m.currentTarget.value})},onKeyDown(m){if(!s)return;const v=Ra(m);if(v.ctrlKey||v.shiftKey||v.isComposing)return;let y=!1;const b={ArrowDown(x){e(x.altKey?"ALT_ARROW_DOWN":"ARROW_DOWN"),y=!0},ArrowUp(){e(m.altKey?"ALT_ARROW_UP":"ARROW_UP"),y=!0},Home(x){x.ctrlKey||x.metaKey||e({type:"HOME",preventDefault:()=>x.preventDefault()})},End(x){x.ctrlKey||x.metaKey||e({type:"END",preventDefault:()=>x.preventDefault()})},Enter(){e("ENTER"),y=!0},Escape(){e("ESCAPE"),y=!0},Tab(){e("TAB")}},w=_y(m,n.context),k=b[w];k?.(m),y&&m.preventDefault()}}),triggerProps:t.button({...Nn.trigger.attrs,id:Z.getTriggerId(n.context),"aria-haspopup":"listbox",type:"button",tabIndex:-1,"aria-label":r.triggerLabel,"aria-expanded":l,"aria-controls":l?Z.getContentId(n.context):void 0,disabled:i,"data-readonly":le(a),"data-disabled":le(i),onPointerDown(m){const v=Ra(m);!s||!df(v)||v.pointerType==="touch"||(e("CLICK_BUTTON"),m.preventDefault())},onPointerUp(m){m.pointerType==="touch"&&e("CLICK_BUTTON")}}),contentProps:t.element({...Nn.content.attrs,id:Z.getContentId(n.context),role:"listbox",hidden:!l,"aria-labelledby":Z.getLabelId(n.context),onPointerDown(m){m.preventDefault()}}),clearTriggerProps:t.button({...Nn.clearTrigger.attrs,id:Z.getClearTriggerId(n.context),type:"button",tabIndex:-1,disabled:i,"aria-label":r.clearTriggerLabel,hidden:!h,onPointerDown(m){const v=Ra(m);!s||!df(v)||(e("CLEAR_VALUE"),m.preventDefault())}}),getOptionState(m){const{value:v,index:y,disabled:b}=m,w=Z.getOptionId(n.context,v,y),k=n.context.focusedId===w,x=n.context.selectionData?.value===v;return{disabled:b,focused:k,checked:x}},getOptionProps(m){const{value:v,label:y,index:b,count:w}=m,k=Z.getOptionId(n.context,v,b),x=g.getOptionState(m);return t.element({...Nn.option.attrs,id:k,role:"option",tabIndex:-1,"data-highlighted":le(x.focused),"data-disabled":le(x.disabled),"data-checked":le(x.checked),"aria-selected":x.focused,"aria-disabled":x.disabled,"aria-posinset":w&&b!=null?b+1:void 0,"aria-setsize":w,"data-value":v,"data-label":y,onPointerMove(){x.disabled||e({type:"POINTEROVER_OPTION",id:k,value:v,label:y})},onPointerUp(){x.disabled||e({type:"CLICK_OPTION",src:"pointerup",id:k,value:v,label:y})},onClick(){x.disabled||e({type:"CLICK_OPTION",src:"click",id:k,value:v,label:y})},onAuxClick(C){x.disabled||(C.preventDefault(),e({type:"CLICK_OPTION",src:"auxclick",id:k,value:v,label:y}))}})},getOptionGroupProps(m){const{label:v}=m;return t.element({...Nn.optionGroup.attrs,role:"group","aria-label":v})}};return g}const Fs=new WeakMap,en=[];function U4(n,e={}){const{rootEl:t}=e,r=n.filter(Boolean);if(r.length===0)return;const i=r[0].ownerDocument||document,s=i.defaultView??window,o=new Set(r),a=new Set,l=t??i.body;let c=d=>{for(let v of d.querySelectorAll("[data-live-announcer], [data-zag-top-layer]"))o.add(v);let p=v=>{if(o.has(v)||a.has(v.parentElement)&&v.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let y of o)if(v.contains(y))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},g=i.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,{acceptNode:p}),m=p(d);if(m===NodeFilter.FILTER_ACCEPT&&u(d),m!==NodeFilter.FILTER_REJECT){let v=g.nextNode();for(;v!=null;)u(v),v=g.nextNode()}},u=d=>{let p=Fs.get(d)??0;d.getAttribute("aria-hidden")==="true"&&p===0||(p===0&&d.setAttribute("aria-hidden","true"),a.add(d),Fs.set(d,p+1))};en.length&&en[en.length-1].disconnect(),c(l);const f=new s.MutationObserver(d=>{for(let p of d)if(!(p.type!=="childList"||p.addedNodes.length===0)&&![...o,...a].some(g=>g.contains(p.target))){for(let g of p.removedNodes)g instanceof s.Element&&(o.delete(g),a.delete(g));for(let g of p.addedNodes)(g instanceof s.HTMLElement||g instanceof s.SVGElement)&&(g.dataset.liveAnnouncer==="true"||g.dataset.zagTopLayer==="true")?o.add(g):g instanceof s.Element&&c(g)}});f.observe(l,{childList:!0,subtree:!0});let h={observe(){f.observe(l,{childList:!0,subtree:!0})},disconnect(){f.disconnect()}};return en.push(h),()=>{f.disconnect();for(let d of a){let p=Fs.get(d);p===1?(d.removeAttribute("aria-hidden"),Fs.delete(d)):Fs.set(d,p-1)}h===en[en.length-1]?(en.pop(),en.length&&en[en.length-1].observe()):en.splice(en.indexOf(h),1)}}function Vy(n,e={}){const{defer:t}=e,r=t?xt:s=>s(),i=[];return i.push(r(()=>{const s=typeof n=="function"?n():n;i.push(U4(s,e))})),()=>{i.forEach(s=>s?.())}}const K4=Symbol(),ng=Object.getPrototypeOf,xf=new WeakMap,G4=n=>n&&(xf.has(n)?xf.get(n):ng(n)===Object.prototype||ng(n)===Array.prototype),X4=n=>G4(n)&&n[K4]||null,rg=(n,e=!0)=>{xf.set(n,e)},mu=n=>typeof n=="object"&&n!==null,ni=new WeakMap,Js=new WeakSet,Y4=(n=Object.is,e=(c,u)=>new Proxy(c,u),t=c=>mu(c)&&!Js.has(c)&&(Array.isArray(c)||!(Symbol.iterator in c))&&!(c instanceof WeakMap)&&!(c instanceof WeakSet)&&!(c instanceof Error)&&!(c instanceof Number)&&!(c instanceof Date)&&!(c instanceof String)&&!(c instanceof RegExp)&&!(c instanceof ArrayBuffer),r=c=>{switch(c.status){case"fulfilled":return c.value;case"rejected":throw c.reason;default:throw c}},i=new WeakMap,s=(c,u,f=r)=>{const h=i.get(c);if(h?.[0]===u)return h[1];const d=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c));return rg(d,!0),i.set(c,[u,d]),Reflect.ownKeys(c).forEach(p=>{const g=Reflect.get(c,p);Js.has(g)?(rg(g,!1),d[p]=g):g instanceof Promise?Object.defineProperty(d,p,{get(){return f(g)}}):ni.has(g)?d[p]=ns(g,f):d[p]=g}),Object.freeze(d)},o=new WeakMap,a=[1,1],l=c=>{if(!mu(c))throw new Error("object required");const u=o.get(c);if(u)return u;let f=a[0];const h=new Set,d=(I,$=++a[0])=>{f!==$&&(f=$,h.forEach(_=>_(I,$)))};let p=a[1];const g=(I=++a[1])=>(p!==I&&!h.size&&(p=I,v.forEach(([$])=>{const _=$[1](I);_>f&&(f=_)})),f),m=I=>($,_)=>{const O=[...$];O[1]=[I,...O[1]],d(O,_)},v=new Map,y=(I,$)=>{if(h.size){const _=$[3](m(I));v.set(I,[$,_])}else v.set(I,[$])},b=I=>{const $=v.get(I);$&&(v.delete(I),$[1]?.())},w=I=>(h.add(I),h.size===1&&v.forEach(([_,O],M)=>{const V=_[3](m(M));v.set(M,[_,V])}),()=>{h.delete(I),h.size===0&&v.forEach(([_,O],M)=>{O&&(O(),v.set(M,[_]))})}),k=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),C=e(k,{deleteProperty(I,$){const _=Reflect.get(I,$);b($);const O=Reflect.deleteProperty(I,$);return O&&d(["delete",[$],_]),O},set(I,$,_,O){const M=Reflect.has(I,$),V=Reflect.get(I,$,O);if(M&&(n(V,_)||o.has(_)&&n(V,o.get(_))))return!0;b($),mu(_)&&(_=X4(_)||_);let W=_;if(!Object.getOwnPropertyDescriptor(I,$)?.set)if(_ instanceof Promise)_.then(q=>{_.status="fulfilled",_.value=q,d(["resolve",[$],q])}).catch(q=>{_.status="rejected",_.reason=q,d(["reject",[$],q])});else{!ni.has(_)&&t(_)&&(W=Zh(_));const q=!Js.has(W)&&ni.get(W);q&&y($,q)}return Reflect.set(I,$,W,O),d(["set",[$],_,V]),!0}});o.set(c,C);const P=[k,g,s,w];return ni.set(C,P),Reflect.ownKeys(c).forEach(I=>{const $=Object.getOwnPropertyDescriptor(c,I);$.get||$.set?Object.defineProperty(k,I,$):C[I]=c[I]}),C})=>[l,ni,Js,n,e,t,r,i,s,o,a],[Q4]=Y4();function Zh(n={}){return Q4(n)}function wf(n,e,t){const r=ni.get(n);let i;const s=[],o=r[3];let a=!1;const c=o(u=>{if(s.push(u),t){e(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,c()}}function ns(n,e){const t=ni.get(n),[r,i,s]=t;return s(r,i(),e)}function ig(n){return Js.add(n),n}function J4(n,e){Object.keys(e).forEach(i=>{if(Object.getOwnPropertyDescriptor(n,i))throw new Error("object property already defined");const s=e[i],{get:o,set:a}=typeof s=="function"?{get:s}:s,l={};l.get=()=>o(ns(r)),a&&(l.set=c=>a(r,c)),Object.defineProperty(n,i,l)});const r=Zh(n);return r}const Z4=(n,e)=>Object.is(n,e);function sg(n,e,t,r,i){let s=Reflect.get(ns(n),e);const o=i||Z4;function a(){const l=ns(n);o(s,l[e])||(t(l[e]),s=Reflect.get(l,e))}return wf(n,a,r)}function cl(n){if(!e8(n)||n===void 0)return n;const e=Reflect.ownKeys(n).filter(r=>typeof r=="string"),t={};for(const r of e){const i=n[r];i!==void 0&&(t[r]=cl(i))}return t}const e8=n=>n&&typeof n=="object"&&n.constructor===Object,ao=n=>Array.isArray(n),lo=n=>!(n==null||typeof n!="object"||ao(n)),t8=n=>typeof n=="number"&&!Number.isNaN(n),Hn=n=>typeof n=="string",ul=n=>typeof n=="function";function Hy(n,...e){for(const t of e){const r=cl(t);for(const i in r)lo(t[i])?(n[i]||(n[i]={}),Hy(n[i],t[i])):n[i]=t[i]}return n}function og(n,e,t){typeof t.value=="object"&&(t.value=Li(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||e==="__proto__"?Object.defineProperty(n,e,t):n[e]=t.value}function Li(n){if(typeof n!="object")return n;var e=0,t,r,i,s=Object.prototype.toString.call(n);if(s==="[object Object]"?i=Object.create(n.__proto__||null):s==="[object Array]"?i=Array(n.length):s==="[object Set]"?(i=new Set,n.forEach(function(o){i.add(Li(o))})):s==="[object Map]"?(i=new Map,n.forEach(function(o,a){i.set(Li(a),Li(o))})):s==="[object Date]"?i=new Date(+n):s==="[object RegExp]"?i=new RegExp(n.source,n.flags):s==="[object DataView]"?i=new n.constructor(Li(n.buffer)):s==="[object ArrayBuffer]"?i=n.slice(0):s.slice(-6)==="Array]"&&(i=new n.constructor(n)),i){for(r=Object.getOwnPropertySymbols(n);e<r.length;e++)og(i,r[e],Object.getOwnPropertyDescriptor(n,r[e]));for(e=0,r=Object.getOwnPropertyNames(n);e<r.length;e++)Object.hasOwnProperty.call(i,t=r[e])&&i[t]===n[t]||og(i,t,Object.getOwnPropertyDescriptor(n,t))}return i||n}function ag(n){return Li(n)}function It(n){return Hn(n)?{type:n}:n}function Sr(n){return n?ao(n)?n.slice():[n]:[]}function zy(n){return lo(n)&&n.predicate!=null}const n8=()=>!0;function ed(n,e,t,r){return i=>Hn(i)?!!n[i]?.(e,t,r):ul(i)?i(e,t,r):i.predicate(n)(e,t,r)}function r8(...n){return{predicate:e=>(t,r,i)=>n.map(ed(e,t,r,i)).some(Boolean)}}function i8(...n){return{predicate:e=>(t,r,i)=>n.map(ed(e,t,r,i)).every(Boolean)}}function s8(n){return{predicate:e=>(t,r,i)=>!ed(e,t,r,i)(n)}}function o8(...n){return(e,t,r)=>r.state.matches(...n)}const a8={or:r8,and:i8,not:s8,stateIn:o8};function Wy(n,e){return n=n??n8,(t,r,i)=>{if(Hn(n)){const s=e[n];return ul(s)?s(t,r,i):s}return zy(n)?n.predicate(e)(t,r,i):n?.(t,r,i)}}function vu(n,e){return(t,r,i)=>zy(n)?n.predicate(e)(t,r,i):n}var nr=(n=>(n.NotStarted="Not Started",n.Running="Running",n.Stopped="Stopped",n))(nr||{}),Wt=(n=>(n.Start="machine.start",n.Stop="machine.stop",n.Created="machine.created",n.SendParent="machine.send-parent",n.After="machine.after",n.Every="machine.every",n.Init="machine.init",n))(Wt||{}),Sf=(n=>(n.Machine="machine",n.Actor="machine.actor",n))(Sf||{});const lg=(n,...e)=>(typeof n=="function"?n(...e):n)??void 0,sr=n=>n,yu=()=>{},l8=(()=>{let n=0;return()=>(n++,n.toString(36))})();function c8(n){const e=n.computed??sr({}),t=n.context??sr({}),r=Zh({value:n.initial??"",previousValue:"",event:sr({}),previousEvent:sr({}),context:J4(t,e),done:!1,tags:[],hasTag(i){return this.tags.includes(i)},matches(...i){return i.includes(this.value)},can(i){return sr(this).nextEvents.includes(i)},get nextEvents(){const i=n.states?.[this.value]?.on??{},s=n?.on??{};return Object.keys({...i,...s})},get changed(){return this.event.value===Wt.Init||!this.previousValue?!1:this.value!==this.previousValue}});return sr(r)}function bu(...n){const e=n.length===1?n[0]:n[1],t=n.length===2?n[0]:!0}function Ma(...n){const e=n.length===1?n[0]:n[1],t=n.length===2?n[0]:!0}function ia(n,e){return(t,r)=>{if(t8(n))return n;if(ul(n))return n(t,r);if(Hn(n)){const i=Number.parseFloat(n);if(!Number.isNaN(i))return i;if(e){const s=e?.[n];return Ma(s==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${n}\`. It doesn't exist in \`options.delays\``),ul(s)?s(t,r):s}}}}function u8(n){return Hn(n)?{target:n}:n}function f8(n,e){return(t,r,i)=>Sr(n).map(u8).find(s=>Wy(s.guard,e)(t,r,i)??s.target??s.actions)}function h8(n){for(;n.length>0;)n.pop();return n}class td{status=nr.NotStarted;state;initialState;initialContext;id;type=Sf.Machine;activityEvents=new Map;delayedEvents=new Map;stateListeners=new Set;contextListeners=new Set;eventListeners=new Set;doneListeners=new Set;contextWatchers=new Set;removeStateListener=yu;removeEventListener=yu;removeContextListener=yu;parent;children=new Map;guardMap;actionMap;delayMap;activityMap;sync;options;config;constructor(e,t){this.config=ag(e),this.options=ag(t??{}),this.id=this.config.id??`machine-${l8()}`,this.guardMap=this.options?.guards??{},this.actionMap=this.options?.actions??{},this.delayMap=this.options?.delays??{},this.activityMap=this.options?.activities??{},this.sync=this.options?.sync??!1,this.state=c8(this.config),this.initialContext=ns(this.state.context);const r=It(Wt.Created);this.executeActions(this.config?.created,r)}get stateSnapshot(){return sr(ns(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}start=e=>{if(this.state.value="",this.status===nr.Running)return this;this.status=nr.Running,this.removeStateListener=wf(this.state,()=>{this.stateListeners.forEach(a=>{a(this.stateSnapshot)})},this.sync),this.removeEventListener=sg(this.state,"event",a=>{this.executeActions(this.config.onEvent,a),this.eventListeners.forEach(l=>{l(a)})},this.sync),this.removeContextListener=wf(this.state.context,()=>{this.log("Context:",this.contextSnapshot),this.contextListeners.forEach(a=>{a(this.contextSnapshot)})},this.sync||this.options.debug),this.setupContextWatchers(),this.executeActivities(It(Wt.Start),Sr(this.config.activities),Wt.Start),this.executeActions(this.config.entry,It(Wt.Start));const t=It(Wt.Init),r=lo(e)?e.value:e,i=lo(e)?e.context:void 0;i&&this.setContext(i);const s={target:r??this.config.initial},o=this.getNextStateInfo(s,t);return this.initialState=o,this.performStateChangeEffects(this.state.value,o,t),this};setupContextWatchers=()=>{for(const[e,t]of Object.entries(this.config.watch??{})){const r=this.options.compareFns?.[e],i=sg(this.state.context,e,()=>{this.executeActions(t,this.state.event)},this.sync,r);this.contextWatchers.add(i)}};stop=()=>{if(this.status!==nr.Stopped)return this.performExitEffects(this.state.value,It(Wt.Stop)),this.executeActions(this.config.exit,It(Wt.Stop)),this.setState(""),this.setEvent(Wt.Stop),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.stopEventListeners(),this.stopContextListeners(),this.status=nr.Stopped,this};stopEventListeners=()=>{this.eventListeners.clear(),this.removeEventListener()};stopContextListeners=()=>{this.contextListeners.clear(),this.removeContextListener()};stopStateListeners=()=>{this.removeStateListener(),this.stateListeners.clear()};stopContextWatchers=()=>{this.contextWatchers.forEach(e=>e()),this.contextWatchers.clear()};stopDelayedEvents=()=>{this.delayedEvents.forEach(e=>{e.forEach(t=>t())}),this.delayedEvents.clear()};stopActivities=e=>{e?(this.activityEvents.get(e)?.forEach(t=>t()),this.activityEvents.get(e)?.clear(),this.activityEvents.delete(e)):(this.activityEvents.forEach(t=>{t.forEach(r=>r()),t.clear()}),this.activityEvents.clear())};sendChild=(e,t)=>{const r=It(e),i=lg(t,this.contextSnapshot),s=this.children.get(i);s||Ma(`[@zag-js/core] Cannot send '${r.type}' event to unknown child`),s.send(r)};stopChild=e=>{this.children.has(e)||Ma(`[@zag-js/core > stop-child] Cannot stop unknown child ${e}`),this.children.get(e).stop(),this.children.delete(e)};removeChild=e=>{this.children.delete(e)};stopChildren=()=>{this.children.forEach(e=>e.stop()),this.children.clear()};setParent=e=>{this.parent=e};spawn=(e,t)=>{const r=lg(e);return t&&(r.id=t),r.type=Sf.Actor,r.setParent(this),this.children.set(r.id,sr(r)),r.onDone(()=>{this.removeChild(r.id)}).start(),sr(ig(r))};addActivityCleanup=(e,t)=>{e&&(this.activityEvents.has(e)?this.activityEvents.get(e)?.add(t):this.activityEvents.set(e,new Set([t])))};setState=e=>{this.state.previousValue=this.state.value,this.state.value=e;const t=this.getStateNode(e);e==null?h8(this.state.tags):this.state.tags=Sr(t?.tags)};setContext=e=>{e&&Hy(this.state.context,e)};withContext=e=>{const t={...this.config.context,...cl(e)};return new td({...this.config,context:t},this.options)};setOptions=e=>{const t=cl(e);this.actionMap={...this.actionMap,...t.actions},this.delayMap={...this.delayMap,...t.delays},this.activityMap={...this.activityMap,...t.activities},this.guardMap={...this.guardMap,...t.guards}};getStateNode=e=>{if(e)return this.config.states?.[e]};getNextStateInfo=(e,t)=>{const r=this.determineTransition(e,t),i=!r?.target,s=r?.target??this.state.value,o=this.state.value!==s,a=this.getStateNode(s),c={reenter:!i&&!o&&!r?.internal,transition:r,stateNode:a,target:s,changed:o};return this.log("NextState:",`[${t.type}]`,this.state.value,"---->",c.target),c};getActionFromDelayedTransition=e=>{const t=It(Wt.After),i=ia(e.delay,this.delayMap)(this.contextSnapshot,t);let s;return{entry:()=>{s=globalThis.setTimeout(()=>{const o=this.getNextStateInfo(e,t);this.performStateChangeEffects(this.state.value,o,t)},i)},exit:()=>{globalThis.clearTimeout(s)}}};getDelayedEventActions=e=>{const t=this.getStateNode(e),r=It(Wt.After);if(!t||!t.after)return;const i=[],s=[];if(ao(t.after)){const o=this.determineTransition(t.after,r);if(!o)return;const a=this.getActionFromDelayedTransition(o);i.push(a.entry),s.push(a.exit)}else if(lo(t.after))for(const o in t.after){const a=t.after[o];let l={};if(ao(a)){const u=this.determineTransition(a,r);u&&(l=u)}else Hn(a)?l={target:a,delay:o}:l={...a,delay:o};const c=this.getActionFromDelayedTransition(l);i.push(c.entry),s.push(c.exit)}return{entries:i,exits:s}};get self(){const e=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),get state(){return e.stateSnapshot},get initialContext(){return e.initialContext},get initialState(){return e.initialState?.target??""}}}get meta(){return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:this.initialState?.target??"",getState:()=>this.stateSnapshot,getAction:e=>this.actionMap[e],getGuard:e=>this.guardMap[e]}}get guardMeta(){return{state:this.stateSnapshot}}executeActions=(e,t)=>{const r=vu(e,this.guardMap)(this.contextSnapshot,t,this.guardMeta);for(const i of Sr(r)){const s=Hn(i)?this.actionMap?.[i]:i;bu(Hn(i)&&!s,`[@zag-js/core > execute-actions] No implementation found for action: \`${i}\``),s?.(this.state.context,t,this.meta)}};executeActivities=(e,t,r)=>{for(const i of t){const s=Hn(i)?this.activityMap?.[i]:i;if(!s){bu(`[@zag-js/core > execute-activity] No implementation found for activity: \`${i}\``);continue}const o=s(this.state.context,e,this.meta);o&&this.addActivityCleanup(r??this.state.value,o)}};createEveryActivities=(e,t)=>{if(!e)return;const r=It(Wt.Every);if(ao(e)){const i=Sr(e).find(l=>{const c=l.delay,f=ia(c,this.delayMap)(this.contextSnapshot,r);return Wy(l.guard,this.guardMap)(this.contextSnapshot,r,this.guardMeta)??f!=null});if(!i)return;const o=ia(i.delay,this.delayMap)(this.contextSnapshot,r);t(()=>{const l=globalThis.setInterval(()=>{this.executeActions(i.actions,r)},o);return()=>{globalThis.clearInterval(l)}})}else for(const i in e){const s=e?.[i],a=ia(i,this.delayMap)(this.contextSnapshot,r);t(()=>{const c=globalThis.setInterval(()=>{this.executeActions(s,r)},a);return()=>{globalThis.clearInterval(c)}})}};setEvent=e=>{this.state.previousEvent=this.state.event,this.state.event=ig(It(e))};performExitEffects=(e,t)=>{const r=this.state.value;if(r==="")return;const i=e?this.getStateNode(e):void 0;this.stopActivities(r);const s=vu(i?.exit,this.guardMap)(this.contextSnapshot,t,this.guardMeta),o=Sr(s),a=this.delayedEvents.get(r);a&&o.push(...a),this.executeActions(o,t),this.eventListeners.clear()};performEntryEffects=(e,t)=>{const r=this.getStateNode(e),i=Sr(r?.activities);this.createEveryActivities(r?.every,l=>{i.unshift(l)}),i.length>0&&this.executeActivities(t,i);const s=vu(r?.entry,this.guardMap)(this.contextSnapshot,t,this.guardMeta),o=Sr(s),a=this.getDelayedEventActions(e);r?.after&&a&&(this.delayedEvents.set(e,a?.exits),o.push(...a.entries)),this.executeActions(o,t),r?.type==="final"&&(this.state.done=!0,this.doneListeners.forEach(l=>{l(this.stateSnapshot)}),this.stop())};performTransitionEffects=(e,t)=>{const r=this.determineTransition(e,t);this.executeActions(r?.actions,t)};performStateChangeEffects=(e,t,r)=>{this.setEvent(r);const i=t.changed||t.reenter;i&&this.performExitEffects(e,r),this.performTransitionEffects(t.transition,r),this.setState(t.target),i&&this.performEntryEffects(t.target,r)};determineTransition=(e,t)=>f8(e,this.guardMap)?.(this.contextSnapshot,t,this.guardMeta);sendParent=e=>{this.parent||Ma("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const t=It(e);this.parent?.send(t)};log=(...e)=>{};send=e=>{const t=It(e);this.transition(this.state.value,t)};transition=(e,t)=>{const r=Hn(e)?this.getStateNode(e):e?.stateNode,i=It(t);if(!r&&!this.config.on){const a=this.status===nr.Stopped?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${e}, \`event\`: ${i.type}`;bu(a);return}const s=r?.on?.[i.type]??this.config.on?.[i.type],o=this.getNextStateInfo(s,i);return this.performStateChangeEffects(this.state.value,o,i),o.stateNode};subscribe=e=>(this.stateListeners.add(e),this.status===nr.Running&&e(this.stateSnapshot),()=>{this.stateListeners.delete(e)});onDone=e=>(this.doneListeners.add(e),this);onTransition=e=>(this.stateListeners.add(e),this.status===nr.Running&&e(this.stateSnapshot),this);onChange=e=>(this.contextListeners.add(e),this);onEvent=e=>(this.eventListeners.add(e),this);get[Symbol.toStringTag](){return"Machine"}}const sc=(n,e)=>new td(n,e);function kf(n,e,t){if(!n)return;const r=n.ownerDocument.defaultView||window,i=new r.MutationObserver(s=>{for(const o of s)o.type==="attributes"&&o.attributeName&&e.includes(o.attributeName)&&t(o)});return i.observe(n,{attributes:!0,attributeFilter:e}),()=>i.disconnect()}function d8(n,e){if(!n)return;const t=n.ownerDocument.defaultView||window,r=new t.MutationObserver(e);return r.observe(n,{childList:!0,subtree:!0}),()=>r.disconnect()}const p8=n=>typeof n=="object"&&n!==null&&n.nodeType===1;function g8(n){return p8(n)?n.offsetWidth>0||n.offsetHeight>0||n.getClientRects().length>0:!1}const m8="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type";function qy(n){return!n||n.closest("[inert]")?!1:n.matches(m8)&&g8(n)}function v8(n){const e={each(t){for(let r=0;r<n.frames?.length;r+=1){const i=n.frames[r];i&&t(i)}},addEventListener(t,r,i){return e.each(s=>{try{s.document.addEventListener(t,r,i)}catch(o){console.warn(o)}}),()=>{try{e.removeEventListener(t,r,i)}catch(s){console.warn(s)}}},removeEventListener(t,r,i){e.each(s=>{try{s.document.removeEventListener(t,r,i)}catch(o){console.warn(o)}})}};return e}const cg="pointerdown.outside",ug="focus.outside";function y8(n){const e=n.composedPath()??[n.target];for(const t of e)if(il(t)&&qy(t))return!0;return!1}function b8(n,e){const{exclude:t,onFocusOutside:r,onPointerDownOutside:i,onInteractOutside:s}=e;if(!n)return;const o=Kh(n),a=ZD(n),l=v8(a);function c(g){const m=sl(g);return!il(m)||So(n,m)?!1:!t?.(m)}let u;function f(g){function m(){if(!(!n||!c(g))){if(i||s){const v=yf(i,s);n.addEventListener(cg,v,{once:!0})}Hp(n,cg,{bubbles:!1,cancelable:!0,detail:{originalEvent:g,contextmenu:FD(g),focusable:y8(g)}})}}g.pointerType==="touch"?(l.removeEventListener("click",m),o.removeEventListener("click",m),u=m,o.addEventListener("click",m,{once:!0}),l.addEventListener("click",m,{once:!0})):m()}const h=new Set,d=setTimeout(()=>{h.add(l.addEventListener("pointerdown",f,!0)),h.add(li(o,"pointerdown",f,!0))},0);function p(g){if(!(!n||!c(g))){if(r||s){const m=yf(r,s);n.addEventListener(ug,m,{once:!0})}Hp(n,ug,{bubbles:!1,cancelable:!0,detail:{originalEvent:g,contextmenu:!1,focusable:qy(sl(g))}})}}return h.add(li(o,"focusin",p,!0)),h.add(l.addEventListener("focusin",p,!0)),()=>{clearTimeout(d),u&&(l.removeEventListener("click",u),o.removeEventListener("click",u)),h.forEach(g=>g())}}function Uy(n,e){const{defer:t}=e,r=t?xt:s=>s(),i=[];return i.push(r(()=>{const s=typeof n=="function"?n():n;i.push(b8(s,e))})),()=>{i.forEach(s=>s?.())}}const Ky={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"};function x8(n){Object.assign(n.style,Ky)}const sa="__live-region__";function w8(n={}){const{level:e="polite",document:t=document,root:r,delay:i=0}=n,s=t.defaultView??window,o=r??t.body;function a(c,u){t.getElementById(sa)?.remove(),u=u??i;const h=t.createElement("span");h.id=sa,h.dataset.liveAnnouncer="true";const d=e!=="assertive"?"status":"alert";h.setAttribute("aria-live",e),h.setAttribute("role",d),x8(h),o.appendChild(h),s.setTimeout(()=>{h.textContent=c},u)}function l(){t.getElementById(sa)?.remove()}return{announce:a,destroy:l,toJSON(){return sa}}}const{and:oa,not:S8}=a8;function k8(n){const e=Fo(n);return sc({id:"combobox",initial:e.autoFocus?"focused":"idle",context:{loop:!0,openOnClick:!1,ariaHidden:!0,focusedId:null,focusedOptionData:null,navigationData:null,selectionData:null,inputValue:"",liveRegion:null,focusOnClear:!0,selectInputOnFocus:!1,selectOnTab:!0,isHovering:!1,isKeyboardEvent:!1,allowCustomValue:!1,isCustomValue:t=>t.inputValue!==t.previousValue,inputBehavior:"none",selectionBehavior:"set",...e,positioning:{placement:"bottom",flip:!1,sameWidth:!0,...e.positioning},translations:{triggerLabel:"Toggle suggestions",clearTriggerLabel:"Clear value",navigationHint:"use the up and down keys to navigate. Press the enter key to select",countAnnouncement:t=>`${t} ${t===1?"option":"options"} available`,...e.translations}},computed:{isInputValueEmpty:t=>t.inputValue.length===0,isInteractive:t=>!(t.readOnly||t.disabled),autoComplete:t=>t.inputBehavior==="autocomplete",autoHighlight:t=>t.inputBehavior==="autohighlight"},watch:{inputValue:"invokeOnInputChange",navigationData:"invokeOnHighlight",selectionData:["invokeOnSelect","blurInputIfNeeded"],focusedId:"setSectionLabel"},entry:["setupLiveRegion"],exit:["removeLiveRegion"],activities:["syncInputValue"],on:{SET_VALUE:{actions:["setInputValue","setSelectionData"]},SET_INPUT_VALUE:{actions:"setInputValue"},CLEAR_VALUE:[{guard:"focusOnClear",target:"focused",actions:["clearInputValue","clearSelectedValue"]},{actions:["clearInputValue","clearSelectedValue"]}],POINTER_OVER:{actions:"setIsHovering"},POINTER_LEAVE:{actions:"clearIsHovering"}},states:{idle:{tags:["idle"],entry:["scrollToTop","clearFocusedOption"],on:{CLICK_BUTTON:{target:"interacting",actions:["focusInput","invokeOnOpen"]},CLICK_INPUT:{guard:"openOnClick",target:"interacting",actions:"invokeOnOpen"},FOCUS:"focused"}},focused:{tags:["focused"],entry:["focusInput","scrollToTop","clearFocusedOption"],activities:["trackInteractOutside"],on:{CHANGE:{target:"suggesting",actions:"setInputValue"},BLUR:"idle",ESCAPE:{guard:oa("isCustomValue",S8("allowCustomValue")),actions:"revertInputValue"},CLICK_INPUT:{guard:"openOnClick",target:"interacting",actions:["focusInput","invokeOnOpen"]},CLICK_BUTTON:{target:"interacting",actions:["focusInput","invokeOnOpen"]},POINTER_OVER:{actions:"setIsHovering"},ARROW_UP:[{guard:"autoComplete",target:"interacting",actions:"invokeOnOpen"},{target:"interacting",actions:["focusLastOption","invokeOnOpen"]}],ARROW_DOWN:[{guard:"autoComplete",target:"interacting",actions:"invokeOnOpen"},{target:"interacting",actions:["focusFirstOption","invokeOnOpen"]}],ALT_ARROW_DOWN:{target:"interacting",actions:["focusInput","invokeOnOpen"]}}},suggesting:{tags:["open","focused"],activities:["trackInteractOutside","scrollOptionIntoView","computePlacement","trackOptionNodes","hideOtherElements"],entry:["focusInput","invokeOnOpen"],on:{ARROW_DOWN:{target:"interacting",actions:"focusNextOption"},ARROW_UP:{target:"interacting",actions:"focusPrevOption"},ALT_ARROW_UP:"focused",HOME:{target:"interacting",actions:["focusFirstOption","preventDefault"]},END:{target:"interacting",actions:["focusLastOption","preventDefault"]},ENTER:[{guard:oa("hasFocusedOption","autoComplete"),target:"focused",actions:"selectActiveOption"},{guard:"hasFocusedOption",target:"focused",actions:"selectOption"}],CHANGE:[{guard:"autoHighlight",actions:["clearFocusedOption","setInputValue","focusFirstOption"]},{actions:["clearFocusedOption","setInputValue"]}],ESCAPE:{target:"focused",actions:"invokeOnClose"},POINTEROVER_OPTION:[{guard:"autoComplete",target:"interacting",actions:"setActiveOption"},{target:"interacting",actions:["setActiveOption","setNavigationData"]}],BLUR:{target:"idle",actions:"invokeOnClose"},CLICK_BUTTON:{target:"focused",actions:"invokeOnClose"},CLICK_OPTION:{target:"focused",actions:["selectOption","invokeOnClose"]}}},interacting:{tags:["open","focused"],activities:["scrollOptionIntoView","trackInteractOutside","computePlacement","hideOtherElements"],entry:"focusMatchingOption",on:{HOME:{actions:["focusFirstOption","preventDefault"]},END:{actions:["focusLastOption","preventDefault"]},ARROW_DOWN:[{guard:oa("autoComplete","isLastOptionFocused"),actions:["clearFocusedOption","scrollToTop"]},{actions:"focusNextOption"}],ARROW_UP:[{guard:oa("autoComplete","isFirstOptionFocused"),actions:"clearFocusedOption"},{actions:"focusPrevOption"}],ALT_UP:{target:"focused",actions:["selectOption","invokeOnClose"]},CLEAR_FOCUS:{actions:"clearFocusedOption"},TAB:{guard:"selectOnTab",target:"idle",actions:["selectOption","invokeOnClose"]},ENTER:{target:"focused",actions:["selectOption","invokeOnClose"]},CHANGE:[{guard:"autoComplete",target:"suggesting",actions:["commitNavigationData","setInputValue"]},{target:"suggesting",actions:["clearFocusedOption","setInputValue"]}],POINTEROVER_OPTION:[{guard:"autoComplete",actions:"setActiveOption"},{actions:["setActiveOption","setNavigationData"]}],CLICK_OPTION:{target:"focused",actions:["selectOption","invokeOnClose"]},ESCAPE:{target:"focused",actions:"invokeOnClose"},CLICK_BUTTON:{target:"focused",actions:"invokeOnClose"},BLUR:{target:"idle",actions:"invokeOnClose"}}}}},{guards:{openOnClick:t=>!!t.openOnClick,isInputValueEmpty:t=>t.isInputValueEmpty,focusOnClear:t=>!!t.focusOnClear,autoFocus:t=>!!t.autoFocus,autoComplete:t=>t.autoComplete,autoHighlight:t=>t.autoHighlight,isFirstOptionFocused:t=>Z.getFirstEl(t)?.id===t.focusedId,isLastOptionFocused:t=>Z.getLastEl(t)?.id===t.focusedId,isCustomValue:t=>!!t.isCustomValue?.({inputValue:t.inputValue,previousValue:t.selectionData?.value}),allowCustomValue:t=>!!t.allowCustomValue,hasFocusedOption:t=>!!t.focusedId,selectOnTab:t=>!!t.selectOnTab},activities:{syncInputValue:t=>{const r=Z.getInputEl(t);if(r)return kf(r,["data-value"],()=>{r.value=r.dataset.value||""})},trackInteractOutside(t,r,{send:i}){return Uy(Z.getInputEl(t),{exclude(s){return[Z.getContentEl(t),Z.getTriggerEl(t)].some(a=>So(a,s))},onInteractOutside(s){t.onInteractOutside?.(s),!s.defaultPrevented&&i({type:"BLUR",src:"interact-outside"})}})},hideOtherElements(t){if(t.ariaHidden)return Vy([Z.getInputEl(t),Z.getContentEl(t),Z.getTriggerEl(t)])},computePlacement(t){return t.currentPlacement=t.positioning.placement,H4(Z.getControlEl(t),Z.getPositionerEl(t),{...t.positioning,onComplete(r){t.currentPlacement=r.placement},onCleanup(){t.currentPlacement=void 0}})},trackOptionNodes(t,r,i){if(!t.autoHighlight)return;const s=i.getAction("focusFirstOption"),o=()=>s(t,r,i);return o(),d8(Z.getContentEl(t),o)},scrollOptionIntoView(t,r,{getState:i}){const s=Z.getInputEl(t);return kf(s,["aria-activedescendant"],()=>{const o=i().event;if(!/(ARROW_UP|ARROW_DOWN|HOME|END|TAB)/.test(o.type))return;Z.getActiveOptionEl(t)?.scrollIntoView({block:"nearest"}),t.autoComplete&&Z.focusInput(t)})}},actions:{setupLiveRegion(t){t.liveRegion=w8({level:"assertive",document:Z.getDoc(t)})},removeLiveRegion(t){t.liveRegion?.destroy()},setActiveOption(t,r){const{label:i,id:s,value:o}=r;t.focusedId=s,t.focusedOptionData={label:i,value:o}},setNavigationData(t,r){const{label:i,value:s}=r;t.navigationData={label:i,value:s}},clearNavigationData(t){t.navigationData=null},commitNavigationData(t){t.navigationData&&(t.inputValue=t.navigationData.label,t.navigationData=null)},clearFocusedOption(t){t.focusedId=null,t.focusedOptionData=null,t.navigationData=null},selectActiveOption(t){t.focusedOptionData&&(t.selectionData=t.focusedOptionData,t.inputValue=t.focusedOptionData.label)},selectOption(t,r){const i=!!r.value&&!!r.label;t.selectionData=i?{label:r.label,value:r.value}:t.navigationData;let s;t.selectionData&&(t.selectionBehavior==="set"&&(s=t.selectionData.label),t.selectionBehavior==="clear"&&(s=""),s!=null&&(t.inputValue=s))},blurInputIfNeeded(t){t.autoComplete||!t.blurOnSelect||xt(()=>{Z.getInputEl(t)?.blur()})},focusInput(t,r){r.type!=="CHANGE"&&Z.focusInput(t)},setInputValue(t,r){const i=r.type==="SET_VALUE"?r.label:r.value;t.inputValue=i},clearInputValue(t){t.inputValue=""},revertInputValue(t){t.selectionData&&(t.inputValue=t.selectionData.label)},setSelectionData(t,r){const{label:i,value:s}=r;t.selectionData={label:i,value:s}},clearSelectedValue(t){t.selectionData=null},scrollToTop(t){const r=Z.getContentEl(t);r&&(r.scrollTop=0)},invokeOnInputChange(t){t.onInputChange?.({value:t.inputValue})},invokeOnHighlight(t){const{label:r,value:i}=t.navigationData??{},s=Z.getMatchingOptionEl(t,i);t.onHighlight?.({label:r,value:i,relatedTarget:s})},invokeOnSelect(t){const{label:r,value:i}=t.selectionData??{},s=Z.getMatchingOptionEl(t,i);t.onSelect?.({label:r,value:i,relatedTarget:s})},invokeOnOpen(t){t.onOpen?.()},invokeOnClose(t){t.onClose?.()},highlightFirstOption(t){xt(()=>{Gy(t,Z.getFirstEl(t))})},focusFirstOption(t){xt(()=>{js(t,Z.getFirstEl(t))})},focusLastOption(t){xt(()=>{js(t,Z.getLastEl(t))})},focusNextOption(t){xt(()=>{const r=Z.getNextEl(t,t.focusedId??"");js(t,r)})},focusPrevOption(t){xt(()=>{const r=Z.getPrevEl(t,t.focusedId??"");js(t,r)})},focusMatchingOption(t){xt(()=>{const r=Z.getMatchingOptionEl(t,t.selectionData?.value);r?.scrollIntoView({block:"nearest"}),js(t,r)})},announceOptionCount(t){xt(()=>{const r=Z.getOptionCount(t);if(!r)return;const i=t.translations.countAnnouncement(r);t.liveRegion?.announce(i)})},setIsHovering(t){t.isHovering=!0},clearIsHovering(t){t.isHovering=!1},preventDefault(t,r){r.preventDefault()},setSectionLabel(t){const r=Z.getClosestSectionLabel(t);r&&(t.sectionLabel=r)}}})}function Gy(n,e){if(!e)return;const t=Z.getOptionData(e);return n.focusedId=e.id,n.focusedOptionData=t,t}function js(n,e){if(!e||e.id===n.focusedId)return;const t=Gy(n,e);n.navigationData=t}function C8(n){return new Proxy({},{get(){return n}})}var _8=/[A-Z]/g,$8=/^ms-/,xu={};function E8(n){return"-"+n.toLowerCase()}function O8(n){if(xu.hasOwnProperty(n))return xu[n];var e=n.replace(_8,E8);return xu[n]=$8.test(e)?"-"+e:e}const A8=n=>Array.isArray(n),P8=n=>!(n==null||typeof n!="object"||A8(n)),T8=n=>typeof n=="number"&&!Number.isNaN(n),Xy=n=>typeof n=="string",D8=n=>n.startsWith("--")?n:O8(n);function I8(n){let e={};for(const t in n){const r=n[t];!Xy(r)&&!T8(r)||(e[D8(t)]=r)}return e}const fg={onFocus:"onFocusIn",onBlur:"onFocusOut",onDoubleClick:"onDblClick",onChange:"onInput",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",className:"class"};function R8(n){return n in fg?fg[n]:n}const oc=C8(n=>{const e={};for(const t in n){const r=n[t];if(t==="style"&&P8(r)){e.style=I8(r);continue}if(t==="children"){Xy(r)&&(e.textContent=r);continue}e[R8(t)]=r}return e});function N8(n,e){const{actions:t,state:r,context:i}=e??{},s=(()=>{const o=typeof n=="function"?n():n,a=typeof i=="function"?i():i;return a?o.withContext(a):o})();return wi(()=>{s.start(r),s.state.can("SETUP")&&s.send("SETUP"),bo(()=>{s.stop()})}),yo(()=>{const o=typeof i=="function"?i():i;s.setContext(o)}),yo(()=>{s.setOptions({actions:t})}),s}function ac(n,e){const t=N8(n,e),[r,i]=Th(t.getState());return wi(()=>{const s=t.subscribe(o=>{i(GS(o))});bo(()=>{s()})}),[r,t.send,t]}function M8(n){return ki({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="m6 9 6 6 6-6"/>'},n)}function B8(n){return ki({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/>'},n)}function nd(n){return ki({a:{fill:"currentColor",viewBox:"0 0 16 16"},c:'<path fill-rule="evenodd" d="m8 8.707 3.646 3.647.708-.707L8.707 8l3.647-3.646-.707-.708L8 7.293 4.354 3.646l-.707.708L7.293 8l-3.646 3.646.707.708L8 8.707z" clip-rule="evenodd"/>'},n)}const L8="_contentHide_1w40y_1",F8="_contentShow_1w40y_1",j8={"animate-dropdown-content":"_animate-dropdown-content_1w40y_1",contentHide:L8,contentShow:F8},V8=we('<button class="outline-transparent focus-visible:outline-primary">'),H8=we("<ul>"),z8=we("<div><div><label></label><div><input><button></button></div></div><div>"),W8=we("<li>"),rd=n=>{const e=_n(n,{label:"",placeholder:"",disabled:!1,preserveOrder:!1,class:""}),[t,r]=tt(""),i=_e(()=>e.options.filter(u=>ip(u.label).includes(ip(t())))),s=_e(()=>({onInputChange:u=>{r(u.value)},disabled:e.disabled,placeholder:e.placeholder,onSelect:u=>{e.onChange(u.value??"")},onOpen:()=>{r("")}})),[o,a]=ac(k8({id:ds(),openOnClick:!0}),{context:s}),l=_e(()=>q4(o,a,oc));Ot([()=>e.value],()=>{l().setValue(e.value)}),Ot([()=>l().selectedValue],()=>{const u=e.options.find(f=>f.value===l().selectedValue);l().setInputValue(u?.label??"")});function c(){e.onChange("")}return(()=>{const u=z8(),f=u.firstChild,h=f.firstChild,d=h.nextSibling,p=d.firstChild,g=p.nextSibling,m=f.nextSibling;return Ee(f,xe(()=>l().rootProps,{get class(){return`flex flex-col w-52 ${e.class}`}}),!1,!0),Ee(h,xe(()=>l().labelProps,{class:"text-sm"}),!1,!0),Q(h,()=>e.label),Ee(d,xe(()=>l().controlProps,{class:"inline-flex justify-between rounded border-grey-300 border focus-within:border-primary-light transition-colors"}),!1,!0),Ee(p,xe(()=>l().inputProps,{class:"appearance-none w-full h-8 bg-transparent outline-none pl-2"}),!1,!1),Q(d,G(Pt,{get when(){return!!e.value},get children(){const v=V8();return v.$$click=c,Q(v,G(nd,{})),v}}),g),Ee(g,xe(()=>l().triggerProps,{class:"appearance-none inline-flex justify-center items-center w-auto px-2"}),!1,!0),Q(g,G(M8,{})),Ee(m,xe(()=>l().positionerProps,{style:{"z-index":"999"}}),!1,!0),Q(m,G(Pt,{get when(){return i().length>0},get children(){const v=H8();return Ee(v,xe(()=>l().contentProps,{get"data-expanded"(){return l().isOpen},get class(){return`relative -top-1 overflow-y-auto max-h-80 text-black bg-grey-0 rounded border border-grey-300 shadow ${j8["animate-dropdown-content"]}`}}),!1,!0),Q(v,G(Rv,{get each(){return i()},children:(y,b)=>(()=>{const w=W8();return Ee(w,xe(()=>l().getOptionProps({index:b(),value:y.value,label:y.label}),{class:"flex items-center justify-between h-8 px-1 select-none data-[highlighted]:bg-primary data-[highlighted]:text-white"}),!1,!0),Q(w,()=>y.label),w})()})),v}})),u})()};Ul(["click"]);const q8=we("<div>"),U8=n=>{const e=_n(n,{class:""});return(()=>{const t=q8();return ut(()=>Si(t,`bg-grey-300 w-px h-full bg-clip-content py-2 ${e.class}`)),t})()};var K8=()=>{},hg=(n,e)=>e();function G8(n,e){const t=Ht(n),r=t?[t]:[],{onEnter:i=hg,onExit:s=hg}=e,[o,a]=tt(e.appear?[]:r),[l]=$w();let c,u=!1;function f(p,g){if(!p)return g&&g();u=!0,s(p,()=>{Zu(()=>{u=!1,a(m=>m.filter(v=>v!==p)),g&&g()})})}function h(p){const g=c;if(!g)return p&&p();c=void 0,a(m=>[g,...m]),i(g,p??K8)}const d=e.mode==="out-in"?p=>u||f(p,h):e.mode==="in-out"?p=>h(()=>f(p)):p=>{h(),f(p)};return ww(p=>{const g=n();return Ht(l)?(l(),p):(g!==p&&(c=g,Zu(()=>Ht(()=>d(p)))),g)},e.appear?void 0:t),o}var dg=n=>n instanceof Element;function Cf(n,e){if(e(n))return n;if(typeof n=="function"&&!n.length)return Cf(n(),e);if(Array.isArray(n))for(const t of n){const r=Cf(t,e);if(r)return r}return null}function X8(n,e=dg,t=dg){const r=_e(n);return _e(()=>Cf(r(),e))}function Y8(n){return _e(()=>{const e=n.name||"s";return{enterActiveClasses:(n.enterActiveClass||e+"-enter-active").split(" "),enterClasses:(n.enterClass||e+"-enter").split(" "),enterToClasses:(n.enterToClass||e+"-enter-to").split(" "),exitActiveClasses:(n.exitActiveClass||e+"-exit-active").split(" "),exitClasses:(n.exitClass||e+"-exit").split(" "),exitToClasses:(n.exitToClass||e+"-exit-to").split(" "),moveClasses:(n.moveClass||e+"-move").split(" ")}})}function Yy(n){requestAnimationFrame(()=>requestAnimationFrame(n))}function Q8(n,e,t,r){const{enterClasses:i,enterActiveClasses:s,enterToClasses:o}=n,{onBeforeEnter:a,onEnter:l,onAfterEnter:c}=e;a?.(t),t.classList.add(...i),t.classList.add(...s),queueMicrotask(()=>{if(!t.parentNode)return r?.();l?.(t,()=>u())}),Yy(()=>{t.classList.remove(...i),t.classList.add(...o),(!l||l.length<2)&&(t.addEventListener("transitionend",u),t.addEventListener("animationend",u))});function u(f){(!f||f.target===t)&&(r?.(),t.removeEventListener("transitionend",u),t.removeEventListener("animationend",u),t.classList.remove(...s),t.classList.remove(...o),c?.(t))}}function J8(n,e,t,r){const{exitClasses:i,exitActiveClasses:s,exitToClasses:o}=n,{onBeforeExit:a,onExit:l,onAfterExit:c}=e;if(!t.parentNode)return r?.();a?.(t),t.classList.add(...i),t.classList.add(...s),l?.(t,()=>u()),Yy(()=>{t.classList.remove(...i),t.classList.add(...o),(!l||l.length<2)&&(t.addEventListener("transitionend",u),t.addEventListener("animationend",u))});function u(f){(!f||f.target===t)&&(r?.(),t.removeEventListener("transitionend",u),t.removeEventListener("animationend",u),t.classList.remove(...s),t.classList.remove(...o),c?.(t))}}var Z8={inout:"in-out",outin:"out-in"},Qy=n=>{const e=Y8(n);return G8(X8(()=>n.children),{mode:Z8[n.mode],appear:n.appear,onEnter(t,r){Q8(e(),n,t,r)},onExit(t,r){J8(e(),n,t,r)}})};const eI=fi("dialog").parts("trigger","backdrop","container","content","title","description","closeTrigger"),Yr=eI.build(),Ae=nc({getContainerId:n=>n.ids?.container??`dialog:${n.id}:container`,getBackdropId:n=>n.ids?.backdrop??`dialog:${n.id}:backdrop`,getContentId:n=>n.ids?.content??`dialog:${n.id}:content`,getTriggerId:n=>n.ids?.trigger??`dialog:${n.id}:trigger`,getTitleId:n=>n.ids?.title??`dialog:${n.id}:title`,getDescriptionId:n=>n.ids?.description??`dialog:${n.id}:description`,getCloseTriggerId:n=>n.ids?.closeTrigger??`dialog:${n.id}:close`,getContentEl:n=>Ae.getById(n,Ae.getContentId(n)),getTriggerEl:n=>Ae.getById(n,Ae.getTriggerId(n)),getContainerEl:n=>Ae.getById(n,Ae.getContainerId(n)),getTitleEl:n=>Ae.getById(n,Ae.getTitleId(n)),getDescriptionEl:n=>Ae.getById(n,Ae.getDescriptionId(n))});function tI(n,e,t){const r=n.context["aria-label"],i=n.matches("open"),s=n.context.renderedElements;return{isOpen:i,open(){e("OPEN")},close(){e("CLOSE")},triggerProps:t.button({...Yr.trigger.attrs,id:Ae.getTriggerId(n.context),"aria-haspopup":"dialog",type:"button","aria-expanded":i,"aria-controls":Ae.getContentId(n.context),onClick(){e("TOGGLE")}}),backdropProps:t.element({...Yr.backdrop.attrs,hidden:!i,id:Ae.getBackdropId(n.context)}),containerProps:t.element({...Yr.container.attrs,hidden:!i,id:Ae.getContainerId(n.context),style:{pointerEvents:i?void 0:"none"}}),contentProps:t.element({...Yr.content.attrs,role:n.context.role,hidden:!i,id:Ae.getContentId(n.context),tabIndex:-1,"aria-modal":!0,"aria-label":r||void 0,"aria-labelledby":r||!s.title?void 0:Ae.getTitleId(n.context),"aria-describedby":s.description?Ae.getDescriptionId(n.context):void 0}),titleProps:t.element({...Yr.title.attrs,id:Ae.getTitleId(n.context)}),descriptionProps:t.element({...Yr.description.attrs,id:Ae.getDescriptionId(n.context)}),closeTriggerProps:t.button({...Yr.closeTrigger.attrs,id:Ae.getCloseTriggerId(n.context),type:"button",onClick(o){o.stopPropagation(),e("CLOSE")}})}}function nI(n,e){const t=r=>{r.key==="Escape"&&e?.(r)};return li(Kh(n),"keydown",t)}const mn={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(n=>n.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(n){const e=this.indexOf(n),t=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return e<t},isTopMost(n){return this.layers[this.count()-1]?.node===n},getNestedLayers(n){return Array.from(this.layers).slice(this.indexOf(n)+1)},isInNestedLayer(n,e){return this.getNestedLayers(n).some(t=>So(t.node,e))},isInBranch(n){return Array.from(this.branches).some(e=>So(e,n))},add(n){this.layers.push(n)},addBranch(n){this.branches.push(n)},remove(n){const e=this.indexOf(n);e<0||(e<this.count()-1&&this.getNestedLayers(n).forEach(r=>r.dismiss()),this.layers.splice(e,1))},removeBranch(n){const e=this.branches.indexOf(n);e>=0&&this.branches.splice(e,1)},indexOf(n){return this.layers.findIndex(e=>e.node===n)},dismiss(n){this.layers[this.indexOf(n)]?.dismiss()},clear(){this.remove(this.layers[0].node)}};let pg;function gg(){mn.layers.forEach(({node:n})=>{n.style.pointerEvents=mn.isBelowPointerBlockingLayer(n)?"none":"auto"})}function rI(n){n.style.pointerEvents=""}const wu="data-inert";function iI(n){const e=Kh(n);return mn.hasPointerBlockingLayer()&&!e.body.hasAttribute(wu)&&(pg=document.body.style.pointerEvents,e.body.style.pointerEvents="none",e.body.setAttribute(wu,"")),()=>{mn.hasPointerBlockingLayer()||(e.body.style.pointerEvents=pg,e.body.removeAttribute(wu),e.body.style.length===0&&e.body.removeAttribute("style"))}}function sI(n,e){if(!n){P4("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:t,pointerBlocking:r,exclude:i,debug:s}=e,o={dismiss:t,node:n,pointerBlocking:r};mn.add(o),gg();function a(h){const d=sl(h.detail.originalEvent);mn.isBelowPointerBlockingLayer(n)||mn.isInBranch(d)||(e.onPointerDownOutside?.(h),e.onInteractOutside?.(h),!h.defaultPrevented&&(s&&console.log("onPointerDownOutside:",h.detail.originalEvent),t?.()))}function l(h){const d=sl(h.detail.originalEvent);mn.isInBranch(d)||(e.onFocusOutside?.(h),e.onInteractOutside?.(h),!h.defaultPrevented&&(s&&console.log("onFocusOutside:",h.detail.originalEvent),t?.()))}function c(h){mn.isTopMost(n)&&(e.onEscapeKeyDown?.(h),!h.defaultPrevented&&t&&(h.preventDefault(),t()))}function u(h){if(!n)return!1;const d=typeof i=="function"?i():i;return(Array.isArray(d)?d:[d]).some(g=>So(g,h))||mn.isInNestedLayer(n,h)}const f=[r?iI(n):void 0,nI(n,c),Uy(n,{exclude:u,onFocusOutside:l,onPointerDownOutside:a})];return()=>{mn.remove(n),gg(),rI(n),f.forEach(h=>h?.())}}function oI(n,e){const{defer:t}=e,r=t?xt:s=>s(),i=[];return i.push(r(()=>{const s=typeof n=="function"?n():n;i.push(sI(s,e))})),()=>{i.forEach(s=>s?.())}}const Su="data-zag-scroll-lock";function mg(n,e){if(!n)return;const t=n.style.cssText;return Object.assign(n.style,e),()=>{n.style.cssText=t}}function aI(n,e,t){if(!n)return;const r=n.style.getPropertyValue(e);return n.style.setProperty(e,t),()=>{r?n.style.setProperty(e,r):n.style.removeProperty(e)}}function lI(n){const e=n.getBoundingClientRect().left;return Math.round(e)+n.scrollLeft?"paddingLeft":"paddingRight"}function cI(n){const e=n??document,t=e.defaultView??window,{documentElement:r,body:i}=e;if(i.hasAttribute(Su))return;i.setAttribute(Su,"");const o=t.innerWidth-r.clientWidth,a=()=>aI(r,"--scrollbar-width",`${o}px`),l=lI(r),c=()=>mg(i,{overflow:"hidden",[l]:`${o}px`}),u=()=>{const{scrollX:h,scrollY:d,visualViewport:p}=t,g=p?.offsetLeft??0,m=p?.offsetTop??0,v=mg(i,{position:"fixed",overflow:"hidden",top:`${-(d-Math.floor(m))}px`,left:`${-(h-Math.floor(g))}px`,right:"0",[l]:`${o}px`});return()=>{v?.(),t.scrollTo(h,d)}},f=[a(),Gh()?u():c()];return()=>{f.forEach(h=>h?.()),i.removeAttribute(Su)}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Jy=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],fl=Jy.join(","),Zy=typeof Element>"u",gi=Zy?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,hl=!Zy&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},dl=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||t&&e&&n(e.parentNode);return o},uI=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},e1=function(e,t,r){if(dl(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(fl));return t&&gi.call(e,fl)&&i.unshift(e),i=i.filter(r),i},t1=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!dl(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=n(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var u=gi.call(o,fl);u&&r.filter(o)&&(t||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),h=!dl(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&h){var d=n(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else s.unshift.apply(s,o.children)}}return i},n1=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},ri=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||uI(e))&&!n1(e)?0:e.tabIndex},fI=function(e,t){var r=ri(e);return r<0&&t&&!n1(e)?0:r},hI=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},r1=function(e){return e.tagName==="INPUT"},dI=function(e){return r1(e)&&e.type==="hidden"},pI=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},gI=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},mI=function(e){if(!e.name)return!0;var t=e.form||hl(e),r=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=gI(i,e.form);return!s||s===e},vI=function(e){return r1(e)&&e.type==="radio"},yI=function(e){return vI(e)&&!mI(e)},bI=function(e){var t,r=e&&hl(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,u,f;r=hl(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((u=i)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},vg=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},xI=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=gi.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(gi.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,c=hl(e);if(l&&!l.shadowRoot&&i(l)===!0)return vg(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(bI(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return vg(e);return!1},wI=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return gi.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},pl=function(e,t){return!(t.disabled||dl(t)||dI(t)||xI(t,e)||pI(t)||wI(t))},_f=function(e,t){return!(yI(t)||ri(t)<0||!pl(e,t))},SI=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},kI=function n(e){var t=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=fI(a,o),c=o?n(i.candidates):a;l===0?o?t.push.apply(t,c):t.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(hI).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},CI=function(e,t){t=t||{};var r;return t.getShadowRoot?r=t1([e],t.includeContainer,{filter:_f.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:SI}):r=e1(e,t.includeContainer,_f.bind(null,t)),kI(r)},_I=function(e,t){t=t||{};var r;return t.getShadowRoot?r=t1([e],t.includeContainer,{filter:pl.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=e1(e,t.includeContainer,pl.bind(null,t)),r},Ti=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return gi.call(e,fl)===!1?!1:_f(t,e)},$I=Jy.concat("iframe").join(","),ku=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return gi.call(e,$I)===!1?!1:pl(t,e)};/*!
* focus-trap 7.5.1
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function yg(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function bg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yg(Object(t),!0).forEach(function(r){EI(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yg(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function EI(n,e,t){return e=AI(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OI(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function AI(n){var e=OI(n,"string");return typeof e=="symbol"?e:String(e)}var xg={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},PI=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},TI=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},co=function(e){return e?.key==="Tab"||e?.keyCode===9},DI=function(e){return co(e)&&!e.shiftKey},II=function(e){return co(e)&&e.shiftKey},wg=function(e){return setTimeout(e,0)},Sg=function(e,t){var r=-1;return e.every(function(i,s){return t(i)?(r=s,!1):!0}),r},Vs=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},aa=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},RI=[],NI=function(e,t){var r=t?.document||document,i=t?.trapStack||RI,s=bg({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:DI,isKeyBackward:II},t),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(_,O,M){return _&&_[O]!==void 0?_[O]:s[M||O]},c=function(_,O){var M=typeof O?.composedPath=="function"?O.composedPath():void 0;return o.containerGroups.findIndex(function(V){var W=V.container,q=V.tabbableNodes;return W.contains(_)||M?.includes(W)||q.find(function(te){return te===_})})},u=function(_){var O=s[_];if(typeof O=="function"){for(var M=arguments.length,V=new Array(M>1?M-1:0),W=1;W<M;W++)V[W-1]=arguments[W];O=O.apply(void 0,V)}if(O===!0&&(O=void 0),!O){if(O===void 0||O===!1)return O;throw new Error("`".concat(_,"` was specified but was not a node, or did not return a node"))}var q=O;if(typeof O=="string"&&(q=r.querySelector(O),!q))throw new Error("`".concat(_,"` as selector refers to no known node"));return q},f=function(){var _=u("initialFocus");if(_===!1)return!1;if(_===void 0||!ku(_,s.tabbableOptions))if(c(r.activeElement)>=0)_=r.activeElement;else{var O=o.tabbableGroups[0],M=O&&O.firstTabbableNode;_=M||u("fallbackFocus")}if(!_)throw new Error("Your focus-trap needs to have at least one focusable element");return _},h=function(){if(o.containerGroups=o.containers.map(function(_){var O=CI(_,s.tabbableOptions),M=_I(_,s.tabbableOptions),V=O.length>0?O[0]:void 0,W=O.length>0?O[O.length-1]:void 0,q=M.find(function(J){return Ti(J)}),te=M.findLast(function(J){return Ti(J)}),ee=!!O.find(function(J){return ri(J)>0});return{container:_,tabbableNodes:O,focusableNodes:M,posTabIndexesFound:ee,firstTabbableNode:V,lastTabbableNode:W,firstDomTabbableNode:q,lastDomTabbableNode:te,nextTabbableNode:function(H){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=O.indexOf(H);return R<0?E?M.slice(M.indexOf(H)+1).find(function(T){return Ti(T)}):M.slice(0,M.indexOf(H)).findLast(function(T){return Ti(T)}):O[R+(E?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(_){return _.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(_){return _.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},d=function $(_){if(_!==!1&&_!==r.activeElement){if(!_||!_.focus){$(f());return}_.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=_,PI(_)&&_.select()}},p=function(_){var O=u("setReturnFocus",_);return O||(O===!1?!1:_)},g=function(_){var O=_.target,M=_.event,V=_.isBackward,W=V===void 0?!1:V;O=O||aa(M),h();var q=null;if(o.tabbableGroups.length>0){var te=c(O,M),ee=te>=0?o.containerGroups[te]:void 0;if(te<0)W?q=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:q=o.tabbableGroups[0].firstTabbableNode;else if(W){var J=Sg(o.tabbableGroups,function(D){var L=D.firstTabbableNode;return O===L});if(J<0&&(ee.container===O||ku(O,s.tabbableOptions)&&!Ti(O,s.tabbableOptions)&&!ee.nextTabbableNode(O,!1))&&(J=te),J>=0){var H=J===0?o.tabbableGroups.length-1:J-1,E=o.tabbableGroups[H];q=ri(O)>=0?E.lastTabbableNode:E.lastDomTabbableNode}else co(M)||(q=ee.nextTabbableNode(O,!1))}else{var R=Sg(o.tabbableGroups,function(D){var L=D.lastTabbableNode;return O===L});if(R<0&&(ee.container===O||ku(O,s.tabbableOptions)&&!Ti(O,s.tabbableOptions)&&!ee.nextTabbableNode(O))&&(R=te),R>=0){var T=R===o.tabbableGroups.length-1?0:R+1,S=o.tabbableGroups[T];q=ri(O)>=0?S.firstTabbableNode:S.firstDomTabbableNode}else co(M)||(q=ee.nextTabbableNode(O))}}else q=u("fallbackFocus");return q},m=function(_){var O=aa(_);if(!(c(O,_)>=0)){if(Vs(s.clickOutsideDeactivates,_)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Vs(s.allowOutsideClick,_)||_.preventDefault()}},v=function(_){var O=aa(_),M=c(O,_)>=0;if(M||O instanceof Document)M&&(o.mostRecentlyFocusedNode=O);else{_.stopImmediatePropagation();var V,W=!0;if(o.mostRecentlyFocusedNode)if(ri(o.mostRecentlyFocusedNode)>0){var q=c(o.mostRecentlyFocusedNode),te=o.containerGroups[q].tabbableNodes;if(te.length>0){var ee=te.findIndex(function(J){return J===o.mostRecentlyFocusedNode});ee>=0&&(s.isKeyForward(o.recentNavEvent)?ee+1<te.length&&(V=te[ee+1],W=!1):ee-1>=0&&(V=te[ee-1],W=!1))}}else o.containerGroups.some(function(J){return J.tabbableNodes.some(function(H){return ri(H)>0})})||(W=!1);else W=!1;W&&(V=g({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),d(V||o.mostRecentlyFocusedNode||f())}o.recentNavEvent=void 0},y=function(_){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=_;var M=g({event:_,isBackward:O});M&&(co(_)&&_.preventDefault(),d(M))},b=function(_){if(TI(_)&&Vs(s.escapeDeactivates,_)!==!1){_.preventDefault(),a.deactivate();return}(s.isKeyForward(_)||s.isKeyBackward(_))&&y(_,s.isKeyBackward(_))},w=function(_){var O=aa(_);c(O,_)>=0||Vs(s.clickOutsideDeactivates,_)||Vs(s.allowOutsideClick,_)||(_.preventDefault(),_.stopImmediatePropagation())},k=function(){if(o.active)return xg.activateTrap(i,a),o.delayInitialFocusTimer=s.delayInitialFocus?wg(function(){d(f())}):d(f()),r.addEventListener("focusin",v,!0),r.addEventListener("mousedown",m,{capture:!0,passive:!1}),r.addEventListener("touchstart",m,{capture:!0,passive:!1}),r.addEventListener("click",w,{capture:!0,passive:!1}),r.addEventListener("keydown",b,{capture:!0,passive:!1}),a},x=function(){if(o.active)return r.removeEventListener("focusin",v,!0),r.removeEventListener("mousedown",m,!0),r.removeEventListener("touchstart",m,!0),r.removeEventListener("click",w,!0),r.removeEventListener("keydown",b,!0),a},C=function(_){var O=_.some(function(M){var V=Array.from(M.removedNodes);return V.some(function(W){return W===o.mostRecentlyFocusedNode})});O&&d(f())},P=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(C):void 0,I=function(){P&&(P.disconnect(),o.active&&!o.paused&&o.containers.map(function(_){P.observe(_,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(_){if(o.active)return this;var O=l(_,"onActivate"),M=l(_,"onPostActivate"),V=l(_,"checkCanFocusTrap");V||h(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,O?.();var W=function(){V&&h(),k(),I(),M?.()};return V?(V(o.containers.concat()).then(W,W),this):(W(),this)},deactivate:function(_){if(!o.active)return this;var O=bg({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},_);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,x(),o.active=!1,o.paused=!1,I(),xg.deactivateTrap(i,a);var M=l(O,"onDeactivate"),V=l(O,"onPostDeactivate"),W=l(O,"checkCanReturnFocus"),q=l(O,"returnFocus","returnFocusOnDeactivate");M?.();var te=function(){wg(function(){q&&d(p(o.nodeFocusedBeforeActivation)),V?.()})};return q&&W?(W(p(o.nodeFocusedBeforeActivation)).then(te,te),this):(te(),this)},pause:function(_){if(o.paused||!o.active)return this;var O=l(_,"onPause"),M=l(_,"onPostPause");return o.paused=!0,O?.(),x(),I(),M?.(),this},unpause:function(_){if(!o.paused||!o.active)return this;var O=l(_,"onUnpause"),M=l(_,"onPostUnpause");return o.paused=!1,O?.(),h(),k(),I(),M?.(),this},updateContainerElements:function(_){var O=[].concat(_).filter(Boolean);return o.containers=O.map(function(M){return typeof M=="string"?r.querySelector(M):M}),o.active&&h(),I(),this}},a.updateContainerElements(e),a};function MI(n){const e=Fo(n);return sc({id:"dialog",initial:e.open?"open":"closed",context:{role:"dialog",renderedElements:{title:!0,description:!0},modal:!0,trapFocus:!0,preventScroll:!0,closeOnOutsideClick:!0,closeOnEsc:!0,restoreFocus:!0,...e},watch:{open:["toggleVisibility"]},states:{open:{entry:["checkRenderedElements"],activities:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{CLOSE:{target:"closed",actions:["invokeOnClose","restoreFocus"]},TOGGLE:{target:"closed",actions:["invokeOnClose","restoreFocus"]}}},closed:{on:{OPEN:{target:"open",actions:["invokeOnOpen"]},TOGGLE:{target:"open",actions:["invokeOnOpen"]}}}}},{activities:{trackDismissableElement(t,r,{send:i}){return oI(()=>Ae.getContentEl(t),{defer:!0,pointerBlocking:t.modal,exclude:[Ae.getTriggerEl(t)],onDismiss(){i({type:"CLOSE",src:"interact-outside"})},onEscapeKeyDown(o){t.closeOnEsc?i({type:"CLOSE",src:"escape-key"}):o.preventDefault(),t.onEsc?.()},onPointerDownOutside(o){t.closeOnOutsideClick||o.preventDefault(),t.onOutsideClick?.()}})},preventScroll(t){if(t.preventScroll)return cI(Ae.getDoc(t))},trapFocus(t){if(!t.trapFocus)return;let r;return Py(()=>{const i=Ae.getContentEl(t);if(i){r=NI(i,{document:Ae.getDoc(t),escapeDeactivates:!1,preventScroll:!0,returnFocusOnDeactivate:!1,fallbackFocus:i,allowOutsideClick:!0,initialFocus:Jp(t.initialFocusEl)});try{r.activate()}catch{}}}),()=>r?.deactivate()},hideContentBelow(t){return t.modal?Vy(()=>[Ae.getContainerEl(t)],{defer:!0}):void 0}},actions:{checkRenderedElements(t){xt(()=>{t.renderedElements.title=!!Ae.getTitleEl(t),t.renderedElements.description=!!Ae.getDescriptionEl(t)})},invokeOnClose(t){t.onClose?.()},invokeOnOpen(t){t.onOpen?.()},toggleVisibility(t,r,{send:i}){i({type:t.open?"OPEN":"CLOSE",src:"controlled"})},restoreFocus(t){t.restoreFocus&&xt(()=>{(Jp(t.finalFocusEl)??Ae.getTriggerEl(t))?.focus({preventScroll:!0})})}}})}const BI=we('<div><div></div><div><div><div class="mb-4"><h2></h2><p>'),$f=n=>{const e=_n(n,{title:"",description:""}),[t,r]=tt(!1);function i(f){e.open!==void 0?e.setOpen?.(f):r(f)}Ot([()=>e.open],()=>{e.open!==void 0&&r(e.open)});const s=_e(()=>e.open!==void 0?e.open:t()),o=_e(()=>({onClose:()=>{i(!1)},onOpen:()=>{i(!0)},open:s()})),[a,l]=ac(MI({id:ds()}),{context:o}),c=_e(()=>tI(a,l,oc)),u=Ov(()=>G(Qy,{enterActiveClass:"transition-opacity ease-in-out duration-200",exitActiveClass:"transition-opacity ease-in-out duration-200",enterClass:"opacity-0",enterToClass:"opacity-1",exitToClass:"opacity-0",exitClass:"opacity-0",get children(){return G(Pt,{get when(){return c().isOpen},get children(){const f=BI(),h=f.firstChild,d=h.nextSibling,p=d.firstChild,g=p.firstChild,m=g.firstChild,v=m.nextSibling;return Ee(h,xe(()=>c().backdropProps,{class:"absolute top-0 left-0 bottom-0 right-0 bg-black bg-opacity-50"}),!1,!1),Ee(d,xe(()=>c().containerProps,{class:"absolute top-0 left-0 bottom-0 right-0 flex justify-center items-center"}),!1,!0),Ee(p,xe(()=>c().contentProps,{class:"relative flex-0 w-[50rem] max-h-[50%] overflow-auto bg-grey-0 p-8 rounded"}),!1,!0),Q(p,G(At,xe(()=>c().closeTriggerProps,{"aria-label":"close",variation:"transparent",class:"absolute top-2 right-2 square-button hocus-visible:bg-grey-200 hocus-visible:text-danger",get children(){return G(nd,{})}})),g),Ee(m,xe(()=>c().titleProps,{class:"text-xl font-bold"}),!1,!0),Q(m,()=>e.title),Ee(v,xe(()=>c().descriptionProps,{class:"text-sm text-grey-400"}),!1,!0),Q(v,()=>e.description),Q(p,()=>e.children,null),f}})}}));return[_e(()=>e.trigger?.(c().triggerProps)),G(Pt,{get when(){return u.toArray().length},get children(){return G(nS,{get children(){return u()}})}})]},LI=we('<label class="text-sm flex-none">'),FI=we("<div><input>"),gl=n=>{const e=_n(n,{label:"",class:"",inputClass:""}),[t,r]=Mo(e,["label","id","class","inputClass"]),i=_e(()=>t.id??ds());return(()=>{const s=FI(),o=s.firstChild;return Q(s,G(Pt,{get when(){return!!t.label},get children(){const a=LI();return Q(a,()=>t.label),ut(()=>Qi(a,"for",i())),a}}),o),Ee(o,xe({get id(){return i()},get class(){return`flex-1 py-1 px-2 rounded border border-grey-300 outline-none focus:border-primary-light transition-colors disabled:bg-grey-200 disabled:opacity-80 ${t.inputClass}`}},r),!1,!1),ut(()=>Si(s,`flex flex-col ${t.class}`)),s})()},jI=fi("checkbox").parts("root","input","label","control"),la=jI.build(),Nt=nc({getRootId:n=>n.ids?.root??`checkbox:${n.id}`,getLabelId:n=>n.ids?.label??`checkbox:${n.id}:label`,getControlId:n=>n.ids?.control??`checkbox:${n.id}:control`,getInputId:n=>n.ids?.input??`checkbox:${n.id}:input`,getRootEl:n=>Nt.queryById(n,Nt.getRootId(n)),getInputEl:n=>Nt.queryById(n,Nt.getInputId(n))});function VI(n,e,t){const r=n.context.disabled,i=!r&&n.context.focused,s=n.context.isChecked,o={"data-active":le(n.context.active),"data-focus":le(i),"data-hover":le(n.context.hovered),"data-disabled":le(r),"data-checked":le(n.context.isChecked),"data-invalid":le(n.context.invalid),"data-indeterminate":le(n.context.isIndeterminate)};return{isChecked:s,isDisabled:r,isIndeterminate:n.context.isIndeterminate,isFocused:i,checkedState:n.context.checked,setChecked(a){e({type:"DISPATCH.CHANGE",checked:a})},toggleChecked(){e({type:"CHECKED.TOGGLE",checked:s})},rootProps:t.label({...la.root.attrs,...o,id:Nt.getRootId(n.context),htmlFor:Nt.getInputId(n.context),onPointerMove(){r||e({type:"CONTEXT.SET",context:{hovered:!0}})},onPointerLeave(){r||e({type:"CONTEXT.SET",context:{hovered:!1}})},onPointerDown(a){r||(i&&a.pointerType==="mouse"&&a.preventDefault(),e({type:"CONTEXT.SET",context:{active:!0}}))},onPointerUp(){r||e({type:"CONTEXT.SET",context:{active:!1}})},onClick(a){a.target===Nt.getInputEl(n.context)&&a.stopPropagation()}}),labelProps:t.element({...la.label.attrs,...o,id:Nt.getLabelId(n.context)}),controlProps:t.element({...la.control.attrs,...o,id:Nt.getControlId(n.context),"aria-hidden":!0}),inputProps:t.input({...la.input.attrs,id:Nt.getInputId(n.context),type:"checkbox",required:n.context.required,defaultChecked:s,disabled:r,"data-disabled":le(r),"aria-labelledby":Nt.getLabelId(n.context),"aria-invalid":n.context.invalid,name:n.context.name,form:n.context.form,value:n.context.value,style:Ky,onChange(a){const l=a.currentTarget.checked;e({type:"CHECKED.SET",checked:l})},onBlur(){e({type:"CONTEXT.SET",context:{focused:!1}})},onFocus(){e({type:"CONTEXT.SET",context:{focused:!0}})},onKeyDown(a){a.key===" "&&e({type:"CONTEXT.SET",context:{active:!0}})},onKeyUp(a){a.key===" "&&e({type:"CONTEXT.SET",context:{active:!1}})}})}}const id=n=>n.ownerDocument.defaultView||window;function i1(n,e){const{type:t,property:r="value"}=e,i=id(n)[t].prototype;return Object.getOwnPropertyDescriptor(i,r)??{}}function HI(n,e){if(!n)return;const t=id(n);if(!(n instanceof t.HTMLInputElement))return;const{value:r,bubbles:i=!0}=e;i1(n,{type:"HTMLInputElement",property:"value"}).set?.call(n,r);const o=new t.Event("input",{bubbles:i});n.dispatchEvent(o)}function zI(n,e){if(!n)return;const t=id(n);if(!(n instanceof t.HTMLInputElement))return;const{checked:r,bubbles:i=!0}=e;i1(n,{type:"HTMLInputElement",property:"checked"}).set?.call(n,r);const o=new t.Event("click",{bubbles:i});n.dispatchEvent(o)}function WI(n){return qI(n)?n.form:n.closest("form")}function qI(n){return n.matches("textarea, input, select, button")}function UI(n,e){if(!n)return;const t=WI(n);return t?.addEventListener("reset",e,{passive:!0}),()=>{t?.removeEventListener("reset",e)}}function KI(n,e){const t=n?.closest("fieldset");if(t)return e(t.disabled),kf(t,["disabled"],()=>e(t.disabled))}function s1(n,e){if(!n)return;const{onFieldsetDisabled:t,onFormReset:r}=e,i=[UI(n,r),KI(n,s=>{s&&t()})];return()=>{i.forEach(s=>s?.())}}function GI(n){const e=Fo(n);return sc({id:"checkbox",initial:"ready",context:{checked:!1,value:"on",...e},watch:{disabled:"removeFocusIfNeeded",checked:["invokeOnChange","syncInputElement"]},activities:["trackFormControlState"],on:{"CHECKED.TOGGLE":{actions:["toggleChecked"]},"CHECKED.SET":{actions:["setChecked"]},"DISPATCH.CHANGE":{actions:["dispatchCheckedEvent"]},"CONTEXT.SET":{actions:["setContext"]}},computed:{isIndeterminate:t=>Cu(t.checked),isChecked:t=>t.isIndeterminate?!1:!!t.checked},states:{ready:{}}},{activities:{trackFormControlState(t,r,{send:i,initialContext:s}){return s1(Nt.getInputEl(t),{onFieldsetDisabled(){t.disabled=!0},onFormReset(){i({type:"CHECKED.SET",checked:!!s.checked})}})}},actions:{invokeOnChange(t){t.onChange?.({checked:t.checked})},setContext(t,r){Object.assign(t,r.context)},syncInputElement(t){const r=Nt.getInputEl(t);r.checked=t.isChecked,r.indeterminate=t.isIndeterminate},dispatchCheckedEvent(t,r){const i=Nt.getInputEl(t),s=Cu(r.checked)?!1:r.checked;zI(i,{checked:s,bubbles:!0})},removeFocusIfNeeded(t){t.disabled&&t.focused&&(t.focused=!1)},setChecked(t,r){t.checked=r.checked},toggleChecked(t){t.checked=Cu(t.checked)?!0:!t.checked}}})}function Cu(n){return n==="indeterminate"}function XI(n){return ki({a:{viewBox:"0 0 1024 1024"},c:'<path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 0 0-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"/>'},n)}const kg={"checkbox-root":"_checkbox-root_1ssd1_1","checkbox-control":"_checkbox-control_1ssd1_3"},YI=we("<label><div></div><div></div><input>"),QI=n=>{const e=_n(n,{class:""}),t=_e(()=>({checked:e.value,onChange:o=>{e.onChange(!!o.checked)}})),[r,i]=ac(GI({id:ds()}),{context:t}),s=_e(()=>VI(r,i,oc));return(()=>{const o=YI(),a=o.firstChild,l=a.nextSibling,c=l.nextSibling;return Ee(o,xe(()=>s().rootProps,{get class(){return`${kg["checkbox-root"]} ${e.class} flex items-center cursor-pointer w-fit`}}),!1,!0),Ee(a,xe(()=>s().controlProps,{get class(){return`${kg["checkbox-control"]} flex-none w-6 h-6 rounded flex justify-center items-center transition-colors duration-100`}}),!1,!0),Q(a,G(XI,{fill:"currentColor",size:20,get"data-checked"(){return s().isChecked?"":void 0},class:"flex-none text-white opacity-0 data-[checked]:opacity-100 transition-opacity duration-100"})),Ee(l,xe(()=>s().labelProps,{class:"flex-1 ml-2"}),!1,!0),Q(l,()=>e.label),Ee(c,xe(()=>s().inputProps),!1,!1),o})()},JI=we('<p class="text-sm text-danger mt-2">'),Cg=we('<div class="flex justify-end mt-4">'),ZI=we(`<p class="border border-grey-200 p-4 text-sm rounded my-8">Your API key will never be sent to any server except OpenAI's. Note that by clicking "Remember My Key" below, your API key will be stored in this browser's Local Storage. ONLY select this option on a private computer. If you select this option, your API key will be stored in an encrypted format, but <i>this should not be considered secure</i> against anyone with access to this computer.`),eR=we('<p class="mb-2 text-sm text-grey-400">Your key should look something like this: sk-xxxxxxxxxxxx. '),tR=we('<input type="password" style="display:none;">'),nR=we('<div class="w-full h-14 border-b border-grey-300 flex justify-between px-4 flex-none"><div class="flex flex-initial items-center gap-2"></div><div class="flex flex-initial items-center gap-2"><div class="flex flex-initial items-center text-sm">'),rR=()=>{const[n,e]=tt(!1),[t,r]=tt(!1),[i,s]=tt(""),[o,a]=tt(""),[l,{createPreset:c,deletePreset:u}]=Mr(Cy),[f,{loadState:h}]=Mr(qr),d=_e(()=>Object.entries(l.presets).map(([g])=>({value:g,label:g})));Ot([i],()=>{const g=l.presets[i()];g&&h(g)}),Ot([t],()=>{t()&&a(i())});const p=_e(()=>$r[o()]?"Cannot overwrite default presets. Enter a different name.":l.presets[o()]?"A preset with this name already exists and will be overwritten.":"");return(()=>{const g=nR(),m=g.firstChild,v=m.nextSibling,y=v.firstChild;return Q(m,G(du,{class:"px-4 h-full flex items-center justify-center text-sm hover:text-primary transition-colors whitespace-nowrap",href:"https://platform.openai.com/docs",children:"Documentation"}),null),Q(m,G(du,{class:"px-4 h-full flex items-center justify-center text-sm hover:text-primary transition-colors whitespace-nowrap",href:"https://platform.openai.com/docs/api-reference",children:"API Reference"}),null),Q(v,G(rd,{get options(){return d()},get value(){return i()},onChange:s,placeholder:"Select a preset",class:"w-72"}),y),Q(v,G($f,{title:"New Preset",description:"Create a new preset",get open(){return t()},setOpen:r,trigger:b=>G(At,xe(b,{"aria-label":"create preset",variation:"secondary",class:"square-button hocus-visible:text-primary",get children(){return G(_h,{fill:"currentColor",size:14})}})),get children(){return[G(gl,{label:"Preset Name",placeholder:"Enter a name for the new preset",get value(){return o()},onInput:b=>a(b.currentTarget.value)}),G(Pt,{get when(){return p()},get children(){const b=JI();return Q(b,()=>`*${p()}`),b}}),(()=>{const b=Cg();return Q(b,G(At,{variation:"primary",onClick:()=>{r(!1),c(o(),f),s(o())},get disabled(){return!!$r[o()]},children:"Done"})),b})()]}}),y),Q(v,G(At,{"aria-label":"delete preset",variation:"secondary",onClick:()=>{u(i()),s("")},get disabled(){return!!$r[i()]},class:"square-button hocus-visible:text-danger",get children(){return G(Mv,{fill:"currentColor",size:14})}}),y),Q(v,G(U8,{class:"mx-4 py-3"}),y),Q(y,G($f,{title:"Edit API Key",description:"Set your OpenAI API key",trigger:b=>G(At,xe({variation:"primary"},b,{children:"Edit API Key"})),get open(){return n()},setOpen:e,get children(){return[ZI(),(()=>{const b=eR();return b.firstChild,Q(b,G(du,{href:"https://platform.openai.com/account/api-keys",class:"text-primary",children:"Generate a new key"}),null),b})(),tR(),G(gl,{placeholder:"Paste your key here",type:"password",name:"api key",autocomplete:"off",get value(){return Zi()},onChange:b=>jS(b.currentTarget.value)}),G(QI,{label:"Remember My Key",get value(){return Da()},onChange:VS,class:"mt-4"}),(()=>{const b=Cg();return Q(b,G(At,{variation:"primary",onClick:()=>e(!1),children:"Done"})),b})()]}})),g})()},iR=we("<hr>"),sR=n=>{const e=_n(n,{class:""}),[t,r]=Mo(e,["class"]);return(()=>{const i=iR();return Ee(i,xe({get class(){return`border-grey-300 ${t.class}`}},r),!1,!1),i})()};function oR(n){return ki({a:{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-math-function",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},c:'<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a2 2 0 0 0 2 2c2 0 2 -4 3 -9s1 -9 3 -9a2 2 0 0 1 2 2"/><path d="M5 12h6"/><path d="M15 12l6 6"/><path d="M15 18l6 -6"/>'},n)}const aR=we("<div>"),sd=n=>{const e=_n(n,{class:""});return(()=>{const t=aR();return Q(t,()=>e.children),ut(()=>Si(t,`uppercase font-semibold text-[0.8rem] tracking-wider ${e.class}`)),t})()},lR=we('<label class="text-sm flex-none">'),cR=we("<div><textarea>"),o1=n=>{const e=_n(n,{label:"",autoGrow:!1,class:"",inputClass:""}),[t,r]=Mo(e,["label","autoGrow","id","class","inputClass","onInput"]),i=_e(()=>t.id??ds());let s;const[o,a]=tt(0);wi(()=>{setTimeout(()=>{a(s.scrollHeight+2)},0)}),Ot([()=>r.value],()=>{a(0),a(s.scrollHeight+2)});function l(c){a(0),a(s.scrollHeight+2),t.onInput&&typeof t.onInput=="function"&&t.onInput(c)}return(()=>{const c=cR(),u=c.firstChild;Q(c,G(Pt,{get when(){return!!t.label},get children(){const h=lR();return Q(h,()=>t.label),ut(()=>Qi(h,"for",i())),h}}),u);const f=s;return typeof f=="function"?Ch(f,u):s=u,u.$$input=l,Ee(u,xe({get id(){return i()},get class(){return`flex-auto py-1 px-2 rounded border border-grey-300 outline-none focus:border-primary-light transition-colors disabled:bg-grey-200 disabled:opacity-80 ${t.inputClass}`},get style(){return{height:t.autoGrow?`${o()}px`:void 0,resize:t.autoGrow?"none":void 0}}},r),!1,!1),ut(()=>Si(c,`flex flex-col ${t.class}`)),c})()};Ul(["input"]);class Oe{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),zn.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),zn.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new uo(this),s=new uo(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new uo(this,e)}iterRange(e,t=this.length){return new a1(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new l1(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Oe.empty:e.length<=32?new Ze(e):zn.from(Ze.split(e,[]))}}class Ze extends Oe{constructor(e,t=uR(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new fR(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new Ze(_g(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Ba(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new Ze(a,o.length+s.length));else{let l=a.length>>1;r.push(new Ze(a.slice(0,l)),new Ze(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof Ze))return super.replace(e,t,r);let i=Ba(this.text,Ba(r.text,_g(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new Ze(i,s):zn.from(Ze.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new Ze(r,i)),r=[],i=-1);return i>-1&&t.push(new Ze(r,i)),t}}class zn extends Oe{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let c=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!c?r.push(a):a.decompose(e-o,t-o,r,c)}o=l+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),c=this.lines-o.lines+l.lines;if(l.lines<c>>5-1&&l.lines>c>>5+1){let u=this.children.slice();return u[i]=l,new zn(u,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof zn))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],c=e.children[s];if(l!=c)return r+l.scanIdentical(c,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let d of e)r+=d.lines;if(r<32){let d=[];for(let p of e)p.flatten(d);return new Ze(d,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function f(d){let p;if(d.lines>s&&d instanceof zn)for(let g of d.children)f(g);else d.lines>o&&(l>o||!l)?(h(),a.push(d)):d instanceof Ze&&l&&(p=u[u.length-1])instanceof Ze&&d.lines+p.lines<=32?(l+=d.lines,c+=d.length+1,u[u.length-1]=new Ze(p.text.concat(d.text),p.length+1+d.length)):(l+d.lines>i&&h(),l+=d.lines,c+=d.length+1,u.push(d))}function h(){l!=0&&(a.push(u.length==1?u[0]:zn.from(u,c)),c=-1,l=u.length=0)}for(let d of e)f(d);return h(),a.length==1?a[0]:new zn(a,t)}}Oe.empty=new Ze([""],0);function uR(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ba(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function _g(n,e,t){return Ba(n,[""],e,t)}class uo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ze?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof Ze?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Ze){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Ze?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class a1{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new uo(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class l1{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Oe.prototype[Symbol.iterator]=function(){return this.iter()},uo.prototype[Symbol.iterator]=a1.prototype[Symbol.iterator]=l1.prototype[Symbol.iterator]=function(){return this});class fR{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let Wi="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<Wi.length;n++)Wi[n]+=Wi[n-1];function hR(n){for(let e=1;e<Wi.length;e+=2)if(Wi[e]>n)return Wi[e-1]<=n;return!1}function $g(n){return n>=127462&&n<=127487}const Eg=8205;function Gt(n,e,t=!0,r=!0){return(t?c1:dR)(n,e,r)}function c1(n,e,t){if(e==n.length)return e;e&&u1(n.charCodeAt(e))&&f1(n.charCodeAt(e-1))&&e--;let r=St(n,e);for(e+=vn(r);e<n.length;){let i=St(n,e);if(r==Eg||i==Eg||t&&hR(i))e+=vn(i),r=i;else if($g(i)){let s=0,o=e-2;for(;o>=0&&$g(St(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function dR(n,e,t){for(;e>0;){let r=c1(n,e-2,t);if(r<e)return r;e--}return 0}function u1(n){return n>=56320&&n<57344}function f1(n){return n>=55296&&n<56320}function St(n,e){let t=n.charCodeAt(e);if(!f1(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return u1(r)?(t-55296<<10)+(r-56320)+65536:t}function h1(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function vn(n){return n<65536?1:2}const Ef=/\r\n?|\n/;var Bt=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Bt||(Bt={}));class Xn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){Of(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new Xn(e)}composeDesc(e){return this.empty?e:e.empty?this:d1(this,e)}mapDesc(e,t=!1){return e.empty?this:Af(this,e,t)}mapPos(e,t=-1,r=Bt.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return s+(e-i);s+=a}else{if(r!=Bt.Simple&&c>=e&&(r==Bt.TrackDel&&i<e&&c>e||r==Bt.TrackBefore&&i<e||r==Bt.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Xn(e)}static create(e){return new Xn(e)}}class ot extends Xn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Of(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return Af(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(Oe.empty);r.push(o?e.slice(s,s+o):Oe.empty)}s+=o}return new ot(t,r)}compose(e){return this.empty?e:e.empty?this:d1(this,e,!0)}map(e,t=!1){return e.empty?this:Af(this,e,t,!0)}iterChanges(e,t=!1){Of(this,e,t)}get desc(){return Xn.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new $o(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);wt(i,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;wt(t,u,f),f>0&&Er(r,t,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);wt(t,u,-1),wt(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new ot(t,r),filtered:Xn.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<t&&wt(i,t-o,-1);let f=new ot(i,s);a=a?a.compose(f.map(a)):f,i=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let f of u)c(f);else if(u instanceof ot){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:f,to:h=f,insert:d}=u;if(f>h||f<0||h>t)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${t})`);let p=d?typeof d=="string"?Oe.of(d.split(r||Ef)):d:Oe.empty,g=p.length;if(f==h&&g==0)return;f<o&&l(),f>o&&wt(i,f-o,-1),wt(i,h-f,g),Er(s,i,p),o=h}}return c(e),l(!a),a}static empty(e){return new ot(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(Oe.empty);r[i]=Oe.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new ot(t,r)}static createSet(e,t){return new ot(e,t)}}function wt(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Er(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Oe.empty);n.push(t)}}function Of(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let c=i,u=s,f=Oe.empty;for(;c+=a,u+=l,l&&r&&(f=f.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,c,s,u,f),i=c,s=u}}}function Af(n,e,t,r=!1){let i=[],s=r?[]:null,o=new $o(n),a=new $o(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);wt(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let c=a.len;for(wt(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(wt(i,0,o.ins),s&&Er(s,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let f=Math.min(u,a.len);c+=f,u-=f,a.forward(f)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;wt(i,c,l<o.i?o.ins:0),s&&l<o.i&&Er(s,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?ot.createSet(i,s):Xn.create(i);throw new Error("Mismatched change set lengths")}}function d1(n,e,t=!1){let r=[],i=t?[]:null,s=new $o(n),o=new $o(e);for(let a=!1;;){if(s.done&&o.done)return i?ot.createSet(r,i):Xn.create(r);if(s.ins==0)wt(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)wt(r,0,o.ins,a),i&&Er(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=r.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;wt(r,l,u,a),i&&u&&Er(i,r,o.text)}else o.ins==-1?(wt(r,s.off?0:s.len,l,a),i&&Er(i,r,s.textBit(l))):(wt(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Er(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>c),s.forward2(l),o.forward(l)}}}}class $o{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Oe.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Oe.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ci{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new ci(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return K.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return K.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return K.range(e.anchor,e.head)}static create(e,t,r){return new ci(e,t,r)}}class K{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:K.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new K([this.main],0)}addRange(e,t=!0){return K.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,K.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new K(e.ranges.map(t=>ci.fromJSON(t)),e.main)}static single(e,t=e){return new K([K.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return K.normalized(e.slice(),t);r=s.to}return new K(e,t)}static cursor(e,t=0,r,i){return ci.create(e,e,(t==0?0:t<0?4:8)|(r==null?3:Math.min(2,r))|(i??33554431)<<5)}static range(e,t,r,i){let s=(r??33554431)<<5|(i==null?3:Math.min(2,i));return t<e?ci.create(t,e,24|s):ci.create(e,t,(t>e?4:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?K.range(l,a):K.range(a,l))}}return new K(e,t)}}function p1(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let od=0;class oe{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=od++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new oe(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:ad),!!e.static,e.enables)}of(e){return new La([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new La(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new La(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function ad(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class La{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=od++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?c=!0:((t=e[f.id])!==null&&t!==void 0?t:1)&1||u.push(e[f.id]);return{create(f){return f.values[o]=r(f),1},update(f,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||Pf(f,u)){let d=r(f);if(a?!Og(d,f.values[o],i):!i(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[s];if(p!=null){let g=vl(h,p);if(this.dependencies.every(m=>m instanceof oe?h.facet(m)===f.facet(m):m instanceof ln?h.field(m,!1)==f.field(m,!1):!0)||(a?Og(d=r(f),g,i):i(d=r(f),g)))return f.values[o]=g,0}else d=r(f);return f.values[o]=d,1}}}}function Og(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function Pf(n,e){let t=!1;for(let r of e)fo(n,r)&1&&(t=!0);return t}function pR(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let c=[];for(let u=0;u<r.length;u++){let f=vl(l,r[u]);if(i[u]==2)for(let h of f)c.push(h);else c.push(f)}return e.combine(c)}return{create(l){for(let c of r)fo(l,c);return l.values[o]=a(l),1},update(l,c){if(!Pf(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=Pf(l,r),f=c.config.facets[e.id],h=c.facet(e);if(f&&!u&&ad(t,f))return l.values[o]=h,0;let d=a(l);return e.compare(d,h)?(l.values[o]=h,0):(l.values[o]=d,1)}}}const Ag=oe.define({static:!0});class ln{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new ln(od++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ag).find(r=>r.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,Ag.of({field:this,create:e})]}get extension(){return this}}const ii={lowest:4,low:3,default:2,high:1,highest:0};function Hs(n){return e=>new g1(e,n)}const jo={highest:Hs(ii.highest),high:Hs(ii.high),default:Hs(ii.default),low:Hs(ii.low),lowest:Hs(ii.lowest)};class g1{constructor(e,t){this.inner=e,this.prec=t}}class Or{of(e){return new Tf(this,e)}reconfigure(e){return Or.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Tf{constructor(e,t){this.compartment=e,this.inner=t}}class ml{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let h of gR(e,t,o))h instanceof ln?i.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let a=Object.create(null),l=[],c=[];for(let h of i)a[h.id]=c.length<<1,c.push(d=>h.slot(d));let u=r?.config.facets;for(let h in s){let d=s[h],p=d[0].facet,g=u&&u[h]||[];if(d.every(m=>m.type==0))if(a[p.id]=l.length<<1|1,ad(g,d))l.push(r.facet(p));else{let m=p.combine(d.map(v=>v.value));l.push(r&&p.compare(m,r.facet(p))?r.facet(p):m)}else{for(let m of d)m.type==0?(a[m.id]=l.length<<1|1,l.push(m.value)):(a[m.id]=c.length<<1,c.push(v=>m.dynamicSlot(v)));a[p.id]=c.length<<1,c.push(m=>pR(m,p,d))}}let f=c.map(h=>h(a));return new ml(e,o,f,a,l,s)}}function gR(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=r[l].indexOf(o);c>-1&&r[l].splice(c,1),o instanceof Tf&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof Tf){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,a)}else if(o instanceof g1)s(o.inner,o.prec);else if(o instanceof ln)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof La)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,ii.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(n,ii.default),r.reduce((o,a)=>o.concat(a))}function fo(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function vl(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const m1=oe.define(),v1=oe.define({combine:n=>n.some(e=>e),static:!0}),y1=oe.define({combine:n=>n.length?n[0]:void 0,static:!0}),b1=oe.define(),x1=oe.define(),w1=oe.define(),S1=oe.define({combine:n=>n.length?n[0]:!1});class gr{constructor(e,t){this.type=e,this.value=t}static define(){return new mR}}class mR{of(e){return new gr(this,e)}}class vR{constructor(e){this.map=e}of(e){return new Ve(this,e)}}class Ve{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Ve(this.type,t)}is(e){return this.type==e}static define(e={}){return new vR(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}}Ve.reconfigure=Ve.define();Ve.appendConfig=Ve.define();class at{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&p1(r,t.newLength),s.some(a=>a.type==at.time)||(this.annotations=s.concat(at.time.of(Date.now())))}static create(e,t,r,i,s,o){return new at(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(at.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}at.time=gr.define();at.userEvent=gr.define();at.addToHistory=gr.define();at.remote=gr.define();function yR(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function k1(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=ot.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:Ve.mapEffects(n.effects,i).concat(Ve.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Df(n,e,t){let r=e.selection,i=qi(e.annotations);return e.userEvent&&(i=i.concat(at.userEvent.of(e.userEvent))),{changes:e.changes instanceof ot?e.changes:ot.of(e.changes||[],t,n.facet(y1)),selection:r&&(r instanceof K?r:K.single(r.anchor,r.head)),effects:qi(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function C1(n,e,t){let r=Df(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=k1(r,Df(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=at.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return xR(t?bR(i):i)}function bR(n){let e=n.startState,t=!0;for(let i of e.facet(b1)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:yR(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=ot.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=at.create(e,i,n.selection&&n.selection.map(s),Ve.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(x1);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof at?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof at?n=s[0]:n=C1(e,qi(s),!1)}return n}function xR(n){let e=n.startState,t=e.facet(w1),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=k1(r,Df(e,s,n.changes.newLength),!0))}return r==n?n:at.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const wR=[];function qi(n){return n==null?wR:Array.isArray(n)?n:[n]}var rn=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(rn||(rn={}));const SR=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let If;try{If=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function kR(n){if(If)return If.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"Â"&&(t.toUpperCase()!=t.toLowerCase()||SR.test(t)))return!0}return!1}function CR(n){return e=>{if(!/\S/.test(e))return rn.Space;if(kR(e))return rn.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return rn.Word;return rn.Other}}class Ce{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)fo(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return fo(this,r),vl(this,r)}update(...e){return C1(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let o of e.effects)o.is(Or.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,l)=>i.set(l,a)),t=null),i.set(o.value.compartment,o.value.extension)):o.is(Ve.reconfigure)?(t=null,r=o.value):o.is(Ve.appendConfig)&&(t=null,r=qi(r).concat(o.value));let s;t?s=e.startState.values.slice():(t=ml.resolve(r,i,this),s=new Ce(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new Ce(t,e.newDoc,e.newSelection,s,(o,a)=>a.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:K.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=qi(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let h=0;h<a;h++)s[h]=s[h].map(u);let f=i.mapDesc(c,!0);s.push(l.range.map(f)),i=i.compose(u),o=Ve.mapEffects(o,u).concat(Ve.mapEffects(qi(l.effects),f))}return{changes:i,selection:K.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ot?e:ot.of(e,this.doc.length,this.facet(Ce.lineSeparator))}toText(e){return Oe.of(e.split(this.facet(Ce.lineSeparator)||Ef))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(fo(this,t),vl(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof ln&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ce.create({doc:e.doc,selection:K.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=ml.resolve(e.extensions||[],new Map),r=e.doc instanceof Oe?e.doc:Oe.of((e.doc||"").split(t.staticFacet(Ce.lineSeparator)||Ef)),i=e.selection?e.selection instanceof K?e.selection:K.single(e.selection.anchor,e.selection.head):K.single(0);return p1(i,r.length),t.staticFacet(v1)||(i=i.asSingle()),new Ce(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ce.tabSize)}get lineBreak(){return this.facet(Ce.lineSeparator)||`
`}get readOnly(){return this.facet(S1)}phrase(e,...t){for(let r of this.facet(Ce.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(m1))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return CR(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=Gt(t,o,!1);if(s(t.slice(l,o))!=rn.Word)break;o=l}for(;a<i;){let l=Gt(t,a);if(s(t.slice(a,l))!=rn.Word)break;a=l}return o==a?null:K.range(o+r,a+r)}}Ce.allowMultipleSelections=v1;Ce.tabSize=oe.define({combine:n=>n.length?n[0]:4});Ce.lineSeparator=y1;Ce.readOnly=S1;Ce.phrases=oe.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});Ce.languageData=m1;Ce.changeFilter=b1;Ce.transactionFilter=x1;Ce.transactionExtender=w1;Or.reconfigure=Ve.define();function _s(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class mi{eq(e){return this==e}range(e,t=e){return Rf.create(e,t,this)}}mi.prototype.startSide=mi.prototype.endSide=0;mi.prototype.point=!1;mi.prototype.mapMode=Bt.TrackDel;let Rf=class _1{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new _1(e,t,r)}};function Nf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class ld{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,f=this.to[l]+e,h,d;if(u==f){let p=t.mapPos(u,c.startSide,c.mapMode);if(p==null||(h=d=p,c.startSide!=c.endSide&&(d=t.mapPos(u,c.endSide),d<h)))continue}else if(h=t.mapPos(u,c.startSide),d=t.mapPos(f,c.endSide),h>d||h==d&&c.startSide>0&&c.endSide<=0)continue;(d-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(a=Math.max(a,d-h)),r.push(c),i.push(h-o),s.push(d-o))}return{mapped:r.length?new ld(i,s,r,a):null,pos:o}}}class Ne{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Ne(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(Nf)),this.isEmpty)return t.length?Ne.of(t):this;let a=new $1(this,null,-1).goto(0),l=0,c=[],u=new rs;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let f=t[l++];u.addInner(f.from,f.to,f.value)||c.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(Rf.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Ne.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:f}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),t.push(u),r.push(f))}}let s=this.nextLayer.map(e);return t.length==0?s:new Ne(r,t,s||Ne.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Eo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Eo.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=Pg(o,a,r),c=new zs(o,l,s),u=new zs(a,l,s);r.iterGaps((f,h,d)=>Tg(c,f,u,h,d,i)),r.empty&&r.length==0&&Tg(c,0,u,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=1e9-1);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=Pg(s,o),l=new zs(s,a,0).goto(r),c=new zs(o,a,0).goto(r);for(;;){if(l.to!=c.to||!Mf(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,t,r,i,s=-1){let o=new zs(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let c=Math.min(o.to,r);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<t?u.length+1:Math.min(u.length,l);i.point(a,c,o.point,u,f,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new rs;for(let i of e instanceof Rf?[e]:t?_R(e):e)r.add(i.from,i.to,i.value);return r.finish()}}Ne.empty=new Ne([],[],null,-1);function _R(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(Nf(e,r)>0)return n.slice().sort(Nf);e=r}return n}Ne.empty.nextLayer=Ne.empty;class rs{finishChunk(e){this.chunks.push(new ld(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new rs)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Ne.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ne.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Pg(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!t?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}class $1{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Eo{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new $1(o,t,r,s));return i.length==1?i[0]:new Eo(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)_u(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)_u(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_u(this.heap,0)}}}function _u(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class zs{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Eo.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ca(this.active,e),ca(this.activeTo,e),ca(this.activeRank,e),this.minActive=Dg(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;ua(this.active,t,r),ua(this.activeTo,t,i),ua(this.activeRank,t,s),e&&ua(e,t,this.cursor.from),this.minActive=Dg(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&ca(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function Tg(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let c=n.to+l-t.to||n.endSide-t.endSide,u=c<0?n.to+l:t.to,f=Math.min(u,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Mf(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,f,n.point,t.point):f>a&&!Mf(n.active,t.active)&&s.compareRange(a,f,n.active,t.active),u>o)break;a=u,c<=0&&n.next(),c>=0&&t.next()}}function Mf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function ca(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function ua(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function Dg(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function lc(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=Gt(n,i));return r}function $R(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=Gt(n,i)}return r===!0?-1:n.length}const Bf="Í¼",Ig=typeof Symbol>"u"?"__"+Bf:Symbol.for(Bf),Lf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Fr{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&a==null)return l.push(o[0]+";");for(let d in a){let p=a[d];if(/&/.test(d))s(d.split(/,\s*/).map(g=>o.map(m=>g.replace(/&/,m))).reduce((g,m)=>g.concat(m)),p,l);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(i(d),p,u,h)}else p!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(u.length||h)&&l.push((r&&!f&&!c?o.map(r):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Rg[Ig]||1;return Rg[Ig]=e+1,Bf+e.toString(36)}static mount(e,t){(e[Lf]||new ER(e)).mount(Array.isArray(t)?t:[t])}}let Ng=new Map;class ER{constructor(e){let t=e.ownerDocument||e,r=t.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let i=Ng.get(t);if(i)return e.adoptedStyleSheets=[i.sheet,...e.adoptedStyleSheets],e[Lf]=i;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],Ng.set(t,this)}else{this.styleTag=t.createElement("style");let i=e.head||e;i.insertBefore(this.styleTag,i.firstChild)}this.modules=[],e[Lf]=this}mount(e){let t=this.sheet,r=0,i=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,o),t)for(let l=0;l<o.rules.length;l++)t.insertRule(o.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=o.rules.length,i++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var jr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Oo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},OR=typeof navigator<"u"&&/Mac/.test(navigator.platform),AR=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var pt=0;pt<10;pt++)jr[48+pt]=jr[96+pt]=String(pt);for(var pt=1;pt<=24;pt++)jr[pt+111]="F"+pt;for(var pt=65;pt<=90;pt++)jr[pt]=String.fromCharCode(pt+32),Oo[pt]=String.fromCharCode(pt);for(var $u in jr)Oo.hasOwnProperty($u)||(Oo[$u]=jr[$u]);function PR(n){var e=OR&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||AR&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Oo:jr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function yl(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function is(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function TR(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Fa(n,e){if(!e.anchorNode)return!1;try{return is(n,e.anchorNode)}catch{return!1}}function Ao(n){return n.nodeType==3?ss(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function bl(n,e,t,r){return t?Mg(n,e,t,r,-1)||Mg(n,e,t,r,1):!1}function xl(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Mg(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Vr(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=xl(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?Vr(n):0}else return!1}}function Vr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function cd(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function DR(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function IR(n,e,t,r,i,s,o,a){let l=n.ownerDocument,c=l.defaultView||window;for(let u=n;u;)if(u.nodeType==1){let f,h=u==l.body;if(h)f=DR(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let g=u.getBoundingClientRect();f={left:g.left,right:g.left+u.clientWidth,top:g.top,bottom:g.top+u.clientHeight}}let d=0,p=0;if(i=="nearest")e.top<f.top?(p=-(f.top-e.top+o),t>0&&e.bottom>f.bottom+p&&(p=e.bottom-f.bottom+p+o)):e.bottom>f.bottom&&(p=e.bottom-f.bottom+o,t<0&&e.top-p<f.top&&(p=-(f.top+p-e.top+o)));else{let g=e.bottom-e.top,m=f.bottom-f.top;p=(i=="center"&&g<=m?e.top+g/2-m/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-m+o)-f.top}if(r=="nearest"?e.left<f.left?(d=-(f.left-e.left+s),t>0&&e.right>f.right+d&&(d=e.right-f.right+d+s)):e.right>f.right&&(d=e.right-f.right+s,t<0&&e.left<f.left+d&&(d=-(f.left+d-e.left+s))):d=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,d||p)if(h)c.scrollBy(d,p);else{let g=0,m=0;if(p){let v=u.scrollTop;u.scrollTop+=p,m=u.scrollTop-v}if(d){let v=u.scrollLeft;u.scrollLeft+=d,g=u.scrollLeft-v}e={left:e.left-g,top:e.top-m,right:e.right-g,bottom:e.bottom-m},g&&Math.abs(g-d)<1&&(r="nearest"),m&&Math.abs(m-p)<1&&(i="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function RR(n){let e=n.ownerDocument;for(let t=n.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class NR{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Vr(t):0),r,Math.min(e.focusOffset,r?Vr(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let Di=null;function E1(n){if(n.setActive)return n.setActive();if(Di)return n.focus(Di);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),!Di){Di=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}let Bg;function ss(n,e,t=e){let r=Bg||(Bg=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Ui(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let s=new KeyboardEvent("keyup",r);return s.synthetic=!0,n.dispatchEvent(s),i.defaultPrevented||s.defaultPrevented}function MR(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function O1(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function BR(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Vr(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=Vr(t))}else{if(t==n)return!0;r=xl(t),t=t.parentNode}}function A1(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}class mt{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new mt(e.parentNode,xl(e),t)}static after(e,t){return new mt(e.parentNode,xl(e)+1,t)}}const ud=[];class Me{constructor(){this.parent=null,this.dom=null,this.dirty=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.dirty&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.dirty){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)&&s!=e.docView.compositionNode){let a=Me.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.dirty=0}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=Lg(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=Lg(s)}else if(this.dirty&1)for(let r of this.children)r.dirty&&(r.sync(e,t),r.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=Vr(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Me.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,c=r,u=r;l<this.children.length;l++){let f=this.children[l],h=c+f.length;if(c<e&&h>t)return f.domBoundsAround(e,t,c);if(h>=e&&i==-1&&(i=l,s=c),c>t&&f.dom.parentNode==this.dom){o=l,a=u;break}u=h,c=h+f.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=ud){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new P1(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}Me.prototype.breakAfter=0;function Lg(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class P1{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function T1(n,e,t,r,i,s,o,a,l){let{children:c}=n,u=c.length?c[e]:null,f=s.length?s[s.length-1]:null,h=f?f.breakAfter:o;if(!(e==r&&u&&!o&&!h&&s.length<2&&u.merge(t,i,s.length?f:null,t==0,a,l))){if(r<c.length){let d=c[r];d&&i<d.length?(e==r&&(d=d.split(i),i=0),!h&&f&&d.merge(0,i,f,!0,0,l)?s[s.length-1]=d:(i&&d.merge(0,i,null,!1,0,l),s.push(d))):d?.breakAfter&&(f?f.breakAfter=1:o=1),r++}for(u&&(u.breakAfter=o,t>0&&(!o&&s.length&&u.merge(t,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,a,0),e++));e<r&&s.length;)if(c[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<c.length&&!c[e-1].breakAfter&&c[r].merge(0,0,c[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function D1(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),f=e-t;for(let h of r)f+=h.length;n.length+=f,T1(n,c,u,a,l,r,0,i,s)}let Kt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ff=typeof document<"u"?document:{documentElement:{style:{}}};const jf=/Edge\/(\d+)/.exec(Kt.userAgent),I1=/MSIE \d/.test(Kt.userAgent),Vf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Kt.userAgent),cc=!!(I1||Vf||jf),Fg=!cc&&/gecko\/(\d+)/i.test(Kt.userAgent),Eu=!cc&&/Chrome\/(\d+)/.exec(Kt.userAgent),jg="webkitFontSmoothing"in Ff.documentElement.style,R1=!cc&&/Apple Computer/.test(Kt.vendor),Vg=R1&&(/Mobile\/\w+/.test(Kt.userAgent)||Kt.maxTouchPoints>2);var ne={mac:Vg||/Mac/.test(Kt.platform),windows:/Win/.test(Kt.platform),linux:/Linux|X11/.test(Kt.platform),ie:cc,ie_version:I1?Ff.documentMode||6:Vf?+Vf[1]:jf?+jf[1]:0,gecko:Fg,gecko_version:Fg?+(/Firefox\/(\d+)/.exec(Kt.userAgent)||[0,0])[1]:0,chrome:!!Eu,chrome_version:Eu?+Eu[1]:0,ios:Vg,android:/Android\b/.test(Kt.userAgent),webkit:jg,safari:R1,webkit_version:jg?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Ff.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const LR=256;class vi extends Me{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return r&&(!(r instanceof vi)||this.length-(t-e)+r.length>LR)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new vi(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new mt(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Hf(this.dom,e,t)}}class dr extends Me{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(O1(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e,t){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof dr&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(D1(this,e,t,r?r.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new dr(this.mark,t,o)}domAtPos(e){return F1(this,e)}coordsAt(e,t){return V1(this,e,t)}}function Hf(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?ne.chrome||ne.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=ss(n,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return ne.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?cd(l,o<0):l||null}class Ar extends Me{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||Ar)(e,t,r)}split(e){let t=Ar.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof Ar)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof Ar&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Oe.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):Oe.empty}domAtPos(e){return(this.length?e==0:this.side>0)?mt.before(this.dom):mt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return cd(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class N1 extends Ar{domAtPos(e){let{topView:t,text:r}=this.widget;return t?zf(e,0,t,r,this.length-t.length,(i,s)=>i.domAtPos(s),(i,s)=>new mt(i,Math.min(s,i.nodeValue.length))):new mt(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?B1(e,t,r,i,this.length-r.length):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?zf(e,t,r,i,this.length-r.length,(s,o,a)=>s.coordsAt(o,a),(s,o,a)=>Hf(s,o,a)):Hf(i,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function zf(n,e,t,r,i,s,o){if(t instanceof dr){for(let a=t.dom.firstChild;a;a=a.nextSibling){let l=Me.get(a);if(l){let c=is(a,r),u=l.length+(c?i:0);if(n<u||n==u&&l.getSide()<=0)return c?zf(n,e,l,r,i,s,o):s(l,n,e);n-=u}else{let c=M1(n,e,a,o);if(typeof c!="number")return c;n=c}}return s(t,t.length,-1)}else return t.dom==r?o(r,n,e):s(t,n,e)}function M1(n,e,t,r){if(t.nodeType==3){let i=t.nodeValue.length;if(n<=i)return r(t,n,e);n-=i}else if(t.nodeType==1&&t.contentEditable!="false")for(let i=t.firstChild;i;i=i.nextSibling){let s=M1(n,e,i,r);if(typeof s!="number")return s;n=s}return n}function B1(n,e,t,r,i){if(t instanceof dr){let s=0;for(let o=t.dom.firstChild;o;o=o.nextSibling){let a=Me.get(o);if(a){let l=is(o,r);if(is(o,n))return s+(l?B1(n,e,a,r,i):a.localPosFromDOM(n,e));s+=a.length+(l?i:0)}else{let l=L1(n,e,o);if(l.result!=null)return s+l.result;s+=l.size}}}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(n,e)}function L1(n,e,t){if(t.nodeType==3)return n==t?{result:e}:{size:t.nodeValue.length};if(t.nodeType==1&&t.contentEditable!="false"){let r=0;for(let i=t.firstChild,s=0;;i=i.nextSibling,s++){if(n==t&&s==e)return{result:r};if(!i)return{size:r};let o=L1(n,e,i);if(o.result!=null)return{result:e+o.result};r+=o.size}}else return t.contains(n)?{result:0}:{size:0}}class os extends Me{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof os&&e.side==this.side}split(){return new os(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?mt.before(this.dom):mt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Oe.empty}get isHidden(){return!0}}vi.prototype.children=Ar.prototype.children=os.prototype.children=ud;function F1(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new mt(t,0)}function j1(n,e,t){let r,{children:i}=n;t>0&&e instanceof dr&&i.length&&(r=i[i.length-1])instanceof dr&&r.mark.eq(e.mark)?j1(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function V1(n,e,t){let r=null,i=-1,s=null,o=-1;function a(c,u){for(let f=0,h=0;f<c.children.length&&h<=u;f++){let d=c.children[f],p=h+d.length;p>=u&&(d.children.length?a(d,u-h):(!s||s.isHidden&&t>0)&&(p>u||h==p&&d.getSide()>0)?(s=d,o=u-h):(h<u||h==p&&d.getSide()<0&&!d.isHidden)&&(r=d,i=u-h)),h=p}}a(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),t):FR(n)}function FR(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Ao(e);return t[t.length-1]||null}function Wf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function fd(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i of t)if(r.indexOf(i)==-1||n[i]!==e[i])return!1;return!0}function qf(n,e,t){let r=null;if(e)for(let i in e)t&&i in t||n.removeAttribute(r=i);if(t)for(let i in t)e&&e[i]==t[i]||n.setAttribute(r=i,t[i]);return!!r}class $s{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get customView(){return null}get isHidden(){return!1}destroy(e){}}var Ke=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(Ke||(Ke={}));class Ge extends mi{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new uc(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Hr(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=H1(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Hr(e,r,i,t,e.widget||null,!0)}static line(e){return new Vo(e)}static set(e,t=!1){return Ne.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ge.none=Ne.empty;class uc extends Ge{constructor(e){let{start:t,end:r}=H1(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof uc&&this.tagName==e.tagName&&this.class==e.class&&fd(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}uc.prototype.point=!1;class Vo extends Ge{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Vo&&this.spec.class==e.spec.class&&fd(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Vo.prototype.mapMode=Bt.TrackBefore;Vo.prototype.point=!0;class Hr extends Ge{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Bt.TrackBefore:Bt.TrackAfter:Bt.TrackDel}get type(){return this.startSide<this.endSide?Ke.WidgetRange:this.startSide<=0?Ke.WidgetBefore:Ke.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Hr&&jR(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Hr.prototype.point=!0;function H1(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function jR(n,e){return n==e||!!(n&&e&&n.compare(e))}function Uf(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class Ft extends Me{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof Ft))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),D1(this,e,t,r?r.children:[],s,o),!0}split(e){let t=new Ft;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){fd(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){j1(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Wf(t,this.attrs||{})),r&&(this.attrs=Wf({class:r},this.attrs||{}))}domAtPos(e){return F1(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e,t){var r;this.dom?this.dirty&4&&(O1(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(qf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Me.get(i)instanceof dr;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Me.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!ne.ios||!this.children.some(s=>s instanceof vi))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof vi)||/[^ -~]/.test(r.text))return null;let i=Ao(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=V1(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return!1}get type(){return Ke.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof Ft)return s;if(o>t)break}i=o+s.breakAfter}return null}}class hi extends Me{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof hi)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?mt.before(this.dom):mt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new hi(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return ud}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Oe.empty}domBoundsAround(){return null}become(e){return e instanceof hi&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.type=e.type,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class hd{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof hi&&e.type==Ke.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ft),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(fa(new os(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(fa(new vi(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof Hr){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof Hr)if(r.block){let{type:l}=r;l==Ke.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new hi(r.widget||new Hg("div"),a,l))}else{let l=Ar.create(r.widget||new Hg("span"),a,a?0:r.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),u=!l.isEditable&&(e<t||s>i.length||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(f.append(fa(new os(1),i),s),s=i.length+Math.max(0,s-i.length)),f.append(fa(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new hd(e,t,r,s);return o.openEnd=Ne.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function fa(n,e){for(let t of e)n=new dr(t,[n],n.length);return n}class Hg extends $s{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const z1=oe.define(),W1=oe.define(),q1=oe.define(),U1=oe.define(),Kf=oe.define(),K1=oe.define(),G1=oe.define(),X1=oe.define({combine:n=>n.some(e=>e)}),Y1=oe.define({combine:n=>n.some(e=>e)});class wl{constructor(e,t="nearest",r="nearest",i=5,s=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s}map(e){return e.empty?this:new wl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const zg=Ve.define({map:(n,e)=>n.map(e)});function wn(n,e,t){let r=n.facet(U1);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const fc=oe.define({combine:n=>n.length?n[0]:!0});let VR=0;const Zs=oe.define();class an{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:s}=t||{};return new an(VR++,e,r,o=>{let a=[Zs.of(o)];return s&&a.push(Po.of(l=>{let c=l.plugin(o);return c?s(c):Ge.none})),i&&a.push(i(o)),a})}static fromClass(e,t){return an.define(r=>new e(r),t)}}class Ou{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(wn(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){wn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){wn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Q1=oe.define(),dd=oe.define(),Po=oe.define(),pd=oe.define(),J1=oe.define();function Z1(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(J1)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}const eo=oe.define();class Yn{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new Yn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;s<t.length&&t[s]<u;){let f=t[s],h=t[s+1],d=Math.max(a,f),p=Math.min(u,h);if(d<=p&&new Yn(d+c,p+c,d,p).addToSet(r),h>u)break;s+=2}if(!l)return r;new Yn(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}}class Sl{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ot.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Yn(s,o,a,l))),this.changedRanges=i}static create(e,t,r){return new Sl(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Xe=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Xe||(Xe={}));const Gf=Xe.LTR,HR=Xe.RTL;function eb(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const zR=eb("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),WR=eb("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Xf=Object.create(null),Mn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Xf[e]=t,Xf[t]=-e}function qR(n){return n<=247?zR[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?WR[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const UR=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ki{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?HR:Gf}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const Ue=[];function KR(n,e){let t=n.length,r=e==Gf?1:2,i=e==Gf?2:1;if(!n||r==1&&!UR.test(n))return tb(t);for(let o=0,a=r,l=r;o<t;o++){let c=qR(n.charCodeAt(o));c==512?c=a:c==8&&l==4&&(c=16),Ue[o]=c==4?2:c,c&7&&(l=c),a=c}for(let o=0,a=r,l=r;o<t;o++){let c=Ue[o];if(c==128)o<t-1&&a==Ue[o+1]&&a&24?c=Ue[o]=a:Ue[o]=256;else if(c==64){let u=o+1;for(;u<t&&Ue[u]==64;)u++;let f=o&&a==8||u<t&&Ue[u]==8?l==1?1:8:256;for(let h=o;h<u;h++)Ue[h]=f;o=u-1}else c==8&&l==1&&(Ue[o]=1);a=c,c&7&&(l=c)}for(let o=0,a=0,l=0,c,u,f;o<t;o++)if(u=Xf[c=n.charCodeAt(o)])if(u<0){for(let h=a-3;h>=0;h-=3)if(Mn[h+1]==-u){let d=Mn[h+2],p=d&2?r:d&4?d&1?i:r:0;p&&(Ue[o]=Ue[Mn[h]]=p),a=h;break}}else{if(Mn.length==189)break;Mn[a++]=o,Mn[a++]=c,Mn[a++]=l}else if((f=Ue[o])==2||f==1){let h=f==r;l=h?0:1;for(let d=a-3;d>=0;d-=3){let p=Mn[d+2];if(p&2)break;if(h)Mn[d+2]|=2;else{if(p&4)break;Mn[d+2]|=4}}}for(let o=0;o<t;o++)if(Ue[o]==256){let a=o+1;for(;a<t&&Ue[a]==256;)a++;let l=(o?Ue[o-1]:r)==1,c=(a<t?Ue[a]:r)==1,u=l==c?l?1:2:r;for(let f=o;f<a;f++)Ue[f]=u;o=a-1}let s=[];if(r==1)for(let o=0;o<t;){let a=o,l=Ue[o++]!=1;for(;o<t&&l==(Ue[o]!=1);)o++;if(l)for(let c=o;c>a;){let u=c,f=Ue[--c]!=2;for(;c>a&&f==(Ue[c-1]!=2);)c--;s.push(new Ki(c,u,f?2:1))}else s.push(new Ki(a,o,0))}else for(let o=0;o<t;){let a=o,l=Ue[o++]==2;for(;o<t&&l==(Ue[o]==2);)o++;s.push(new Ki(a,o,l?1:2))}return s}function tb(n){return[new Ki(0,n,0)]}let nb="";function GR(n,e,t,r,i){var s;let o=r.head-n.from,a=-1;if(o==0){if(!i||!n.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),a=0)}else if(o==n.length){if(i)return null;let h=e[e.length-1];h.level!=t&&(o=h.side(!0,t),a=e.length-1)}a<0&&(a=Ki.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc));let l=e[a];o==l.side(i,t)&&(l=e[a+=i?1:-1],o=l.side(!i,t));let c=i==(l.dir==t),u=Gt(n.text,o,c);if(nb=n.text.slice(Math.min(o,u),Math.max(o,u)),u!=l.side(i,t))return K.cursor(u+n.from,c?-1:1,l.level);let f=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!f&&l.level!=t?K.cursor(i?n.to:n.from,i?-1:1,t):f&&f.level<l.level?K.cursor(f.side(!i,t)+n.from,i?1:-1,f.level):K.cursor(u+n.from,i?-1:1,l.level)}const Fi="ï¿¿";class rb{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ce.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Fi}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=Me.get(i),l=Me.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:Wg(i))||Wg(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=Me.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function Wg(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class qg{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Ug extends Me{constructor(e){super(),this.view=e,this.compositionDeco=Ge.none,this.compositionNode=null,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ft],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Yn(0,0,0,e.state.doc.length)],0)}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:a})=>a<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),{deco:this.compositionDeco,node:this.compositionNode}=this.view.inputState.composing<0?to:YR(this.view,e.changes),(ne.ie||ne.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,i=this.updateDeco(),s=eN(r,i,e.changes);return t=Yn.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=ne.chrome||ne.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,s),this.dirty=0,s&&(s.written||r.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof hi&&s.widget instanceof Kg&&i.push(s.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let i=e.length-1;;i--){let s=i>=0?e[i]:null;if(!s)break;let{fromA:o,toA:a,fromB:l,toB:c}=s,{content:u,breakAtStart:f,openStart:h,openEnd:d}=hd.build(this.view.state.doc,l,c,this.decorations,this.dynamicDecorationMap),{i:p,off:g}=r.findPos(a,1),{i:m,off:v}=r.findPos(o,-1);T1(this,m,v,p,g,u,f,h,d)}}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&Fa(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.domAtPos(a.anchor),c=a.empty?l:this.domAtPos(a.head);if(ne.gecko&&a.empty&&!this.compositionDeco.size&&XR(l)){let f=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(f,l.node.childNodes[l.offset]||null)),l=c=new mt(f,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||!bl(l.node,l.offset,u.anchorNode,u.anchorOffset)||!bl(c.node,c.offset,u.focusNode,u.focusOffset))&&(this.view.observer.ignore(()=>{ne.android&&ne.chrome&&this.dom.contains(u.focusNode)&&tN(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=yl(this.view.root);if(f)if(a.empty){if(ne.gecko){let h=JR(l.node,l.offset);if(h&&h!=3){let d=sb(l.node,l.offset,h==1?1:-1);d&&(l=new mt(d,h==1?0:d.nodeValue.length))}}f.collapse(l.node,l.offset),a.bidiLevel!=null&&u.cursorBidiLevel!=null&&(u.cursorBidiLevel=a.bidiLevel)}else if(f.extend){f.collapse(l.node,l.offset);try{f.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new mt(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new mt(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,r=yl(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=Ft.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);r.collapse(u.node,u.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=t.from&&r.collapse(i,s)}nearest(e){for(let t=e;t;){let r=Me.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof Ft)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let s=this.children[i],o=r-s.breakAfter-s.length;if(e>o||e==o&&s.type!=Ke.WidgetBefore&&s.type!=Ke.WidgetAfter&&(!i||t==2||this.children[i-1].breakAfter||this.children[i-1].type==Ke.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);r=o}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Xe.LTR;for(let c=0,u=0;u<this.children.length;u++){let f=this.children[u],h=c+f.length;if(h>i)break;if(c>=r){let d=f.dom.getBoundingClientRect();if(t.push(d.height),o){let p=f.dom.lastChild,g=p?Ao(p):[];if(g.length){let m=g[g.length-1],v=l?m.right-d.left:d.right-m.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Xe.RTL:Xe.LTR}measureTextSize(){for(let s of this.children)if(s instanceof Ft){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ao(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new P1(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=t.lineBlockAt(o).bottom-t.lineBlockAt(r).top;e.push(Ge.replace({widget:new Kg(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return Ge.set(e)}updateDeco(){let e=this.view.state.facet(Po).map((t,r)=>(this.dynamicDecorationMap[r]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Z1(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom};IR(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Xe.LTR)}}function XR(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class Kg extends $s{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function ib(n){let e=n.observer.selectionRange,t=e.focusNode&&sb(e.focusNode,e.focusOffset,0);if(!t)return null;let r=n.docView.nearest(t);if(!r)return null;if(r instanceof Ft){let i=t;for(;i.parentNode!=r.dom;)i=i.parentNode;let s=i.previousSibling;for(;s&&!Me.get(s);)s=s.previousSibling;let o=s?Me.get(s).posAtEnd:r.posAtStart;return{from:o,to:o,node:i,text:t}}else{for(;;){let{parent:s}=r;if(!s)return null;if(s instanceof Ft)break;r=s}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:t}}}const to={deco:Ge.none,node:null};function YR(n,e){let t=ib(n);if(!t)return to;let{from:r,to:i,node:s,text:o}=t,a=e.mapPos(r,1),l=Math.max(a,e.mapPos(i,-1)),{state:c}=n,u=new rb([],c);s.nodeType==3?u.readTextNode(s):u.readRange(s.firstChild,null);let{text:f}=u;if(f.indexOf(Fi)>-1)return to;if(l-a<f.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+f.length))==f)l=a+f.length;else if(c.doc.sliceString(Math.max(0,l-f.length),l)==f)a=l-f.length;else return to;else if(c.doc.sliceString(a,l)!=f)return to;let h=Me.get(s);return h instanceof N1?h=h.widget.topView:h&&(h.parent=null),{deco:Ge.set(Ge.replace({widget:new QR(s,o,h),inclusive:!0}).range(a,l)),node:s}}class QR extends $s{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return N1}}function sb(n,e,t){if(t<=0)for(let r=n,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i>0)r=r.childNodes[i-1],i=Vr(r);else break}if(t>=0)for(let r=n,i=e;;){if(r.nodeType==3)return r;if(r.nodeType==1&&i<r.childNodes.length&&t>=0)r=r.childNodes[i],i=0;else break}return null}function JR(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class ZR{constructor(){this.changes=[]}compareRange(e,t){Uf(e,t,this.changes)}comparePoint(e,t){Uf(e,t,this.changes)}}function eN(n,e,t){let r=new ZR;return Ne.compare(n,e,t,r),r.changes}function tN(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function nN(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return K.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=Gt(i.text,s,!1):a=Gt(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let c=Gt(i.text,o,!1);if(r(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=Gt(i.text,a);if(r(i.text.slice(a,c))!=l)break;a=c}return K.range(o+i.from,a+i.from)}function rN(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function iN(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Au(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Gg(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function Xg(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Yf(n,e,t){let r,i,s,o,a=!1,l,c,u,f;for(let p=n.firstChild;p;p=p.nextSibling){let g=Ao(p);for(let m=0;m<g.length;m++){let v=g[m];i&&Au(i,v)&&(v=Gg(Xg(v,i.bottom),i.top));let y=rN(e,v),b=iN(t,v);if(y==0&&b==0)return p.nodeType==3?Yg(p,e,t):Yf(p,e,t);if(!r||o>b||o==b&&s>y){r=p,i=v,s=y,o=b;let w=b?t<v.top?-1:1:y?e<v.left?-1:1:0;a=!w||(w>0?m<g.length-1:m>0)}y==0?t>v.bottom&&(!u||u.bottom<v.bottom)?(l=p,u=v):t<v.top&&(!f||f.top>v.top)&&(c=p,f=v):u&&Au(u,v)?u=Xg(u,v.bottom):f&&Au(f,v)&&(f=Gg(f,v.top))}}if(u&&u.bottom>=t?(r=l,i=u):f&&f.top<=t&&(r=c,i=f),!r)return{node:n,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return Yg(r,h,t);if(a&&r.contentEditable!="false")return Yf(r,h,t);let d=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:d}}function Yg(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=ss(n,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let h=e>=(u.left+u.right)/2,d=h;if((ne.chrome||ne.gecko)&&ss(n,a).getBoundingClientRect().left==u.right&&(d=!h),f<=0)return{node:n,offset:a+(d?1:0)};i=a+(d?1:0),s=f}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function ob(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:c}=n.viewState,{x:u,y:f}=e,h=f-a;if(h<0)return 0;if(h>c)return n.state.doc.length;for(let w=n.viewState.heightOracle.textHeight/2,k=!1;l=n.elementAtHeight(h),l.type!=Ke.Text;)for(;h=r>0?l.bottom+w:l.top-w,!(h>=0&&h<=c);){if(k)return t?null:0;k=!0,r=-r}f=a+h;let d=l.from;if(d<n.viewport.from)return n.viewport.from==0?0:t?null:Qg(n,o,l,u,f);if(d>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:Qg(n,o,l,u,f);let p=n.dom.ownerDocument,g=n.root.elementFromPoint?n.root:p,m=g.elementFromPoint(u,f);m&&!n.contentDOM.contains(m)&&(m=null),m||(u=Math.max(o.left+1,Math.min(o.right-1,u)),m=g.elementFromPoint(u,f),m&&!n.contentDOM.contains(m)&&(m=null));let v,y=-1;if(m&&((i=n.docView.nearest(m))===null||i===void 0?void 0:i.isEditable)!=!1){if(p.caretPositionFromPoint){let w=p.caretPositionFromPoint(u,f);w&&({offsetNode:v,offset:y}=w)}else if(p.caretRangeFromPoint){let w=p.caretRangeFromPoint(u,f);w&&({startContainer:v,startOffset:y}=w,(!n.contentDOM.contains(v)||ne.safari&&sN(v,y,u)||ne.chrome&&oN(v,y,u))&&(v=void 0))}}if(!v||!n.docView.dom.contains(v)){let w=Ft.find(n.docView,d);if(!w)return h>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=Yf(w.dom,u,f))}let b=n.docView.nearest(v);if(!b)return null;if(b.isWidget&&((s=b.dom)===null||s===void 0?void 0:s.nodeType)==1){let w=b.dom.getBoundingClientRect();return e.y<w.top||e.y<=w.bottom&&e.x<=(w.left+w.right)/2?b.posAtStart:b.posAtEnd}else return b.localPosFromDOM(v,y)+b.posAtStart}function Qg(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+$R(o,s,n.state.tabSize)}function sN(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ss(n,r-1,r).getBoundingClientRect().left>t}function oN(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():ss(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Qf(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==Ke.Text))return r}return t}function aN(n,e,t,r){let i=Qf(n,e.head),s=!r||i.type!=Ke.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==Xe.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return K.cursor(l,t?-1:1)}return K.cursor(t?i.to:i.from,t?-1:1)}function Jg(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let c=GR(i,s,o,a,t),u=nb;if(!c){if(i.number==(t?n.state.doc.lines:1))return a;u=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),c=K.cursor(t?i.from:i.to)}if(l){if(!l(u))return a}else{if(!r)return c;l=r(u)}a=c}}function lN(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==rn.Space&&(i=o),i==o}}function cN(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return K.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(i),u=n.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let d=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-d.from))),a=(s<0?d.top:d.bottom)+u}let f=l.left+o,h=r??n.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=a+(h+d)*s,g=ob(n,{x:f,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?g<i:g>i))return K.cursor(g,e.assoc,void 0,o)}}function ja(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||t||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function Pu(n,e,t){let r=ja(n.state.facet(pd).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:K.cursor(r,r<t.from?1:-1)}class uN{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null;let t=(r,i)=>{this.ignoreDuringComposition(i)||i.type=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(i.type,e,i)?i.preventDefault():r(e,i))};for(let r in nt){let i=nt[r];e.contentDOM.addEventListener(r,s=>{Zg(e,s)&&t(i,s)},Jf[r]),this.registeredEvents.push(r)}e.scrollDOM.addEventListener("mousedown",r=>{if(r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&(t(nt.mousedown,r),!r.defaultPrevented&&r.button==2)){let i=e.contentDOM.style.minHeight;e.contentDOM.style.minHeight="100%",setTimeout(()=>e.contentDOM.style.minHeight=i,200)}}),e.scrollDOM.addEventListener("drop",r=>{r.target==e.scrollDOM&&r.clientY>e.contentDOM.getBoundingClientRect().bottom&&t(nt.drop,r)}),ne.chrome&&ne.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,ne.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let s of t)if(i=(r=s.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:i});for(let o in i)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,a=>{Zg(e,a)&&this.runCustomHandlers(o,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let s=i.handlers[e];if(s)try{if(s.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(o){wn(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(s){wn(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(t.keyCode!=27&&lb.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0),ne.android&&ne.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return ne.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((r=ab.find(i=>i.keyCode==t.keyCode))&&!t.ctrlKey||fN.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=r||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Ui(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:ne.safari&&!ne.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const ab=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],fN="dthko",lb=[16,17,18,20,91,92,224,225],ha=6;function da(n){return Math.max(0,n)*.7+8}class hN{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=RR(e.contentDOM),this.atoms=e.state.facet(pd).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ce.allowMultipleSelections)&&dN(e,t),this.dragging=gN(e,t)&&hb(t)==1?null:!1}start(e){this.dragging===!1&&(e.preventDefault(),this.select(e))}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging!==!1)return;this.select(this.lastEvent=e);let r=0,i=0,s=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=Z1(this.view);e.clientX-o.left<=s.left+ha?r=-da(s.left-e.clientX):e.clientX+o.right>=s.right-ha&&(r=da(e.clientX-s.right)),e.clientY-o.top<=s.top+ha?i=-da(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-ha&&(i=da(e.clientY-s.bottom)),this.setScrollSpeed(r,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=ja(this.atoms,i.from,0);o!=i.from&&(s=K.cursor(o,-1))}else{let o=ja(this.atoms,i.from,-1),a=ja(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=K.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?K.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection)||r.main.assoc!=t.state.selection.main.assoc)&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function dN(n,e){let t=n.state.facet(z1);return t.length?t[0](e):ne.mac?e.metaKey:e.ctrlKey}function pN(n,e){let t=n.state.facet(W1);return t.length?t[0](e):ne.mac?!e.altKey:!e.ctrlKey}function gN(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=yl(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Zg(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Me.get(t))&&r.ignoreEvent(e))return!1;return!0}const nt=Object.create(null),Jf=Object.create(null),cb=ne.ie&&ne.ie_version<15||ne.ios&&ne.webkit_version<604;function mN(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),ub(n,t.value)},50)}function ub(n,e){let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Zf!=null&&t.selection.ranges.every(l=>l.empty)&&Zf==s.toString()){let l=-1;r=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let f=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:f},range:K.cursor(c.from+f.length)}})}else o?r=t.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:K.cursor(l.from+c.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}nt.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27&&(n.inputState.lastEscPress=Date.now())};nt.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};nt.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Jf.touchstart=Jf.touchmove={passive:!0};nt.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let r of n.state.facet(q1))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=bN(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new hN(n,e,t,r)),r&&n.observer.ignore(()=>E1(n.contentDOM)),n.inputState.mouseSelection&&n.inputState.mouseSelection.start(e)}};function em(n,e,t,r){if(r==1)return K.cursor(e,t);if(r==2)return nN(n.state,e,t);{let i=Ft.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,K.range(o,a)}}let fb=(n,e)=>n>=e.top&&n<=e.bottom,tm=(n,e,t)=>fb(e,t)&&n>=t.left&&n<=t.right;function vN(n,e,t,r){let i=Ft.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&tm(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&tm(t,r,a)?1:o&&fb(r,o)?-1:1}function nm(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:vN(n,t,e.clientX,e.clientY)}}const yN=ne.ie&&ne.ie_version<=11;let rm=null,im=0,sm=0;function hb(n){if(!yN)return n.detail;let e=rm,t=sm;return rm=n,sm=Date.now(),im=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(im+1)%3:1}function bN(n,e){let t=nm(n,e),r=hb(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,a){let l=nm(n,s),c,u=em(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!o){let f=em(n,t.pos,t.bias,r),h=Math.min(f.from,u.from),d=Math.max(f.to,u.to);u=h<u.from?K.range(h,d):K.range(d,h)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&r==1&&i.ranges.length>1&&(c=xN(i,l.pos))?c:a?i.addRange(u):K.create([u])}}}function xN(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return K.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}nt.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function om(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=n.inputState,o=r&&s&&s.dragging&&pN(n,e)?{from:s.dragging.from,to:s.dragging.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"})}nt.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,s=()=>{++i==t.length&&om(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}}else om(n,e,e.dataTransfer.getData("Text"),!0)};nt.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=cb?null:e.clipboardData;t?(ub(n,t.getData("text/plain")||t.getData("text/uri-text")),e.preventDefault()):mN(n)};function wN(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function SN(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let Zf=null;nt.copy=nt.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=SN(n.state);if(!t&&!i)return;Zf=i?t:null;let s=cb?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):wN(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};const db=gr.define();function pb(n,e){let t=[];for(let r of n.facet(G1)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:db.of(!0)}):null}function gb(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=pb(n.state,e);t?n.dispatch(t):n.update([])}},10)}nt.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),gb(n)};nt.blur=n=>{n.observer.clearSelectionRange(),gb(n)};nt.compositionstart=nt.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};nt.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,ne.chrome&&ne.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)};nt.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};nt.beforeinput=(n,e)=>{var t;let r;if(ne.chrome&&ne.android&&(r=ab.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const am=["pre-wrap","normal","pre-line","break-spaces"];class kN{constructor(e){this.lineWrapping=e,this.doc=Oe.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return am.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let a=am.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class CN{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Wn{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?Ke.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Hr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Wn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Fe=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Fe||(Fe={}));const Va=.001;class Tt{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Va&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return Tt.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:f}=i[a],h=s.lineAt(l,Fe.ByPosNoHeight,r.setDoc(t),0,0),d=h.to>=c?h:s.lineAt(c,Fe.ByPosNoHeight,r,0,0);for(f+=d.to-c,c=d.to;a>0&&h.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<h.from&&(h=s.lineAt(l,Fe.ByPosNoHeight,r,0,0));u+=h.from-l,l=h.from;let p=gd.build(r.setDoc(o),e,u,f);s=s.replace(l,c,p)}return s.updateHeight(r,0)}static empty(){return new qt(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new _N(Tt.of(e.slice(0,t)),o,Tt.of(e.slice(r)))}}Tt.prototype.size=1;class mb extends Tt{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new Wn(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class qt extends mb{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new Wn(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof qt||i instanceof dt&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof dt?i=new qt(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Tt.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class dt extends Tt{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length),u=t.doc.lineAt(c),f=a+u.length*l,h=Math.max(r,e-f/2);return new Wn(u.from,u.length,h,f,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:u,length:f}=t.doc.line(s+c);return new Wn(u,f,r+a*c,a,0)}}lineAt(e,t,r,i,s){if(t==Fe.ByHeight)return this.blockAt(e,r,i,s);if(t==Fe.ByPosNoHeight){let{from:d,to:p}=r.doc.lineAt(e);return new Wn(d,p-d,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),c=r.doc.lineAt(e),u=a+c.length*l,f=c.number-o,h=i+a*f+l*(c.from-s-f);return new Wn(c.from,c.length,Math.max(i,Math.min(h,i+this.height-u)),u,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(r,s);for(let u=e,f=i;u<=t;){let h=r.doc.lineAt(u);if(u==e){let p=h.number-a;f+=l*p+c*(e-s-p)}let d=l+c*h.length;o(new Wn(h.from,h.length,f,d,0)),f+=d,u=h.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof dt?r[r.length-1]=new dt(s.length+i):r.push(null,new dt(i-1))}if(e>0){let s=r[0];s instanceof dt?r[0]=new dt(e+s.length):r.unshift(new dt(e-1),null)}return Tt.of(r)}decomposeLeft(e,t){t.push(new dt(e-1),null)}decomposeRight(e,t){t.push(null,new dt(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new dt(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let f=i.heights[i.index++];l==-1?l=f:Math.abs(f-l)>=Va&&(l=-2);let h=new qt(u,f);h.outdated=!1,o.push(h),a+=u+1}a<=s&&o.push(null,new dt(s-a).updateHeight(e,a));let c=Tt.of(o);return(l<0||Math.abs(c.height-this.height)>=Va||Math.abs(l-this.heightMetrics(e,t).perLine)>=Va)&&(e.heightChanged=!0),c}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class _N extends Tt{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==Fe.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=t==Fe.ByPosNoHeight?Fe.ByPosNoHeight:Fe.ByPos;return l?c.join(this.right.lineAt(a,u,r,o,a)):this.left.lineAt(a,u,r,i,s).join(c)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let c=this.lineAt(l,Fe.ByPos,r,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,r,i,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&lm(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),lm(s,a)}return Tt.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Tt.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function lm(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof dt&&(r=n[e+1])instanceof dt&&n.splice(e-1,3,new dt(t.length+1+r.length))}const $N=5;class gd{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof qt?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new qt(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new mb(o,i,r)):(o||s||i>=$N)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new qt(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new dt(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof qt)return e;let t=new qt(0,-1);return this.nodes.push(t),t}addBlock(e){var t;this.enterLine();let r=(t=e.deco)===null||t===void 0?void 0:t.type;r==Ke.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,r!=Ke.WidgetBefore&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof qt)&&!this.isCovered?this.nodes.push(new qt(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof qt&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new gd(r,e);return Ne.spans(t,r,i,s,0),s.finish(r)}}function EN(n,e,t){let r=new ON;return Ne.compare(n,e,t,r,0),r.changes}class ON{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&Uf(e,t,this.changes,5)}}function AN(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=r.body;)if(c.nodeType==1){let u=c,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),a=Math.max(a,h.top),l=c==n.parentNode?h.bottom:Math.min(l,h.bottom)}c=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function PN(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Tu{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e){return Ge.replace({widget:new TN(this.size,e)}).range(this.from,this.to)}}class TN extends $s{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class cm{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=um,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Xe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(dd).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new kN(t),this.stateDeco=e.facet(Po).filter(r=>typeof r!="function"),this.heightMap=Tt.empty().applyChanges(this.stateDeco,Oe.empty,this.heightOracle.setDoc(e.doc),[new Yn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ge.set(this.lineGaps.map(r=>r.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new pa(s,o))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?um:new RN(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:no(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Po).filter(u=>typeof u!="function");let i=e.changedRanges,s=Yn.extendWithRanges(i,EN(r,this.stateDeco,e?e.changes:ot.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let c=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Y1)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Xe.RTL:Xe.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0,f=parseInt(r.paddingTop)||0,h=parseInt(r.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8),this.scrollTop!=e.scrollDOM.scrollTop&&(this.scrollAnchorHeight=-1,this.scrollTop=e.scrollDOM.scrollTop),this.scrolledToBottom=A1(e.scrollDOM);let d=(this.printing?PN:AN)(t,this.paddingTop),p=d.top-this.pixelViewport.top,g=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let v=a.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let b=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(b)&&(o=!0),o||i.lineWrapping&&Math.abs(v-this.contentDOMWidth)>i.charWidth){let{lineHeight:w,charWidth:k,textHeight:x}=e.docView.measureTextSize();o=w>0&&i.refresh(s,w,k,x,v/k,b),o&&(e.docView.minWidth=0,c|=8)}p>0&&g>0?u=Math.max(p,g):p<0&&g<0&&(u=Math.min(p,g)),i.heightChanged=!1;for(let w of this.viewports){let k=w.from==this.viewport.from?b:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?Tt.empty().applyChanges(this.stateDeco,Oe.empty,this.heightOracle,[new Yn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new CN(w.from,k))}i.heightChanged&&(c|=2)}let y=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new pa(i.lineAt(o-r*1e3,Fe.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,Fe.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(c,Fe.ByPos,s,0,0),h;t.y=="center"?h=(f.top+f.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<l.from?h=f.top:h=f.bottom-u,l=new pa(i.lineAt(h-1e3/2,Fe.ByHeight,s,0,0).from,i.lineAt(h+u+1e3/2,Fe.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new pa(this.heightMap.lineAt(r,Fe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Fe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Fe.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,Fe.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new Tu(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=Xe.LTR&&!r)return[];let a=[],l=(c,u,f,h)=>{if(u-c<s)return;let d=this.state.selection.main,p=[d.from];d.empty||p.push(d.to);for(let m of p)if(m>c&&m<u){l(c,m-10,f,h),l(m+10,u,f,h);return}let g=IN(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-c)<s&&Math.abs(m.to-u)<s&&!p.some(v=>m.from<v&&m.to>v));if(!g){if(u<f.to&&t&&r&&t.visibleRanges.some(m=>m.from<=u&&m.to>=u)){let m=t.moveToLineBoundary(K.cursor(u),!1,!0).head;m>c&&(u=m)}g=new Tu(c,u,this.gapSize(f,c,u,h))}a.push(g)};for(let c of this.viewportLines){if(c.length<o)continue;let u=DN(c.from,c.to,this.stateDeco);if(u.total<o)continue;let f=this.scrollTarget?this.scrollTarget.range.head:null,h,d;if(r){let p=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,g,m;if(f!=null){let v=ma(u,f),y=((this.visibleBottom-this.visibleTop)/2+p)/c.height;g=v-y,m=v+y}else g=(this.visibleTop-c.top-p)/c.height,m=(this.visibleBottom-c.top+p)/c.height;h=ga(u,g),d=ga(u,m)}else{let p=u.total*this.heightOracle.charWidth,g=i*this.heightOracle.charWidth,m,v;if(f!=null){let y=ma(u,f),b=((this.pixelViewport.right-this.pixelViewport.left)/2+g)/p;m=y-b,v=y+b}else m=(this.pixelViewport.left-g)/p,v=(this.pixelViewport.right+g)/p;h=ga(u,m),d=ga(u,v)}h>c.from&&l(c.from,h,c,u),d<c.to&&l(d,c.to,c,u)}return a}gapSize(e,t,r,i){let s=ma(i,r)-ma(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Tu.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ge.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ne.spans(e,this.viewport.from,this.viewport.to,{span(i,s){t.push({from:i,to:s})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,s)=>i.from!=t[s].from||i.to!=t[s].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||no(this.heightMap.lineAt(e,Fe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return no(this.heightMap.lineAt(this.scaler.fromDOM(e),Fe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return no(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class pa{constructor(e,t){this.from=e,this.to=t}}function DN(n,e,t){let r=[],i=n,s=0;return Ne.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function ga({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function ma(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function IN(n,e){for(let t of n)if(e(t))return t}const um={toDOM(n){return n},fromDOM(n){return n},scale:1};class RN{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let c=t.lineAt(a,Fe.ByPos,e,0,0).top,u=t.lineAt(l,Fe.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}}function no(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Wn(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>no(i,e)):n._content)}const va=oe.define({combine:n=>n.join(" ")}),eh=oe.define({combine:n=>n.indexOf(!0)>-1}),th=Fr.newName(),vb=Fr.newName(),yb=Fr.newName(),bb={"&light":"."+vb,"&dark":"."+yb};function nh(n,e,t){return new Fr(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const NN=nh("."+th,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},bb);class MN{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:LN(e),l=new rb(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=FN(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!is(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!is(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset);this.newSel=K.single(c,l)}}}function xb(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(s===8||ne.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=BN(n.state.doc.sliceString(o,a,Fi),e.text,l-o,c);u&&(ne.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Fi+Fi&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:Oe.of(e.text.slice(u.from,u.toB).split(Fi))})}else r&&(!n.hasFocus&&n.state.facet(fc)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:(ne.mac||ne.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=K.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Oe.of([" "])}):ne.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=K.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:Oe.of([" "])}),t){let o=n.state;if(ne.ios&&n.inputState.flushIOSKey(n)||ne.android&&(t.from==i.from&&t.to==i.to&&t.insert.length==1&&t.insert.lines==2&&Ui(n.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&t.insert.length==0||s==8&&t.insert.length<t.to-t.from)&&Ui(n.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&t.insert.length==0&&Ui(n.contentDOM,"Delete",46)))return!0;let a=t.insert.toString();if(n.state.facet(K1).some(u=>u(n,t.from,t.to,a)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let l;if(t.from>=i.from&&t.to<=i.to&&t.to-t.from>=(i.to-i.from)/3&&(!r||r.main.empty&&r.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let u=i.from<t.from?o.sliceDoc(i.from,t.from):"",f=i.to>t.to?o.sliceDoc(t.to,i.to):"";l=o.replaceSelection(n.state.toText(u+t.insert.sliceString(0,void 0,n.state.lineBreak)+f))}else{let u=o.changes(t),f=r&&r.main.to<=u.newLength?r.main:void 0;if(o.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=i.to&&t.to>=i.to-10){let h=n.state.sliceDoc(t.from,t.to),d=ib(n)||n.state.doc.lineAt(i.head),p=i.to-t.to,g=i.to-i.from;l=o.changeByRange(m=>{if(m.from==i.from&&m.to==i.to)return{changes:u,range:f||m.map(u)};let v=m.to-p,y=v-h.length;if(m.to-m.from!=g||n.state.sliceDoc(y,v)!=h||d&&m.to>=d.from&&m.from<=d.to)return{range:m};let b=o.changes({from:y,to:v,insert:t.insert}),w=m.to-i.to;return{changes:b,range:f?K.range(Math.max(0,f.anchor+w),Math.max(0,f.head+w)):m.map(b)}})}else l={changes:u,selection:f&&o.selection.replaceRange(f)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(l,{scrollIntoView:!0,userEvent:c}),!0}else if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function BN(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function LN(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new qg(t,r)),(i!=t||s!=r)&&e.push(new qg(i,s))),e}function FN(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?K.single(t+e,r+e):null}const jN={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Du=ne.ie&&ne.ie_version<=11;class VN{constructor(e){this.view=e,this.active=!1,this.selectionRange=new NR,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(ne.ie&&ne.ie_version<=11||ne.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Du&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(fc)?r.root.activeElement!=this.dom:!Fa(r.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ne.ie&&ne.ie_version<=11||ne.android&&ne.chrome)&&!r.state.selection.main.empty&&i.focusNode&&bl(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=ne.safari&&e.root.nodeType==11&&TR(this.dom.ownerDocument)==this.dom&&HN(this.view)||yl(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=Fa(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&BR(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,jN),Du&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Du&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ui(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Fa(this.dom,this.selectionRange);return e<0&&!i?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new MN(this.view,e,t,r))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let r=this.view.state,i=xb(this.view,t);return this.view.state==r&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let r=fm(t,e.previousSibling||e.target.previousSibling,-1),i=fm(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect(),(i=this.resizeContent)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function fm(n,e,t){for(;e;){let r=Me.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function HN(n){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return bl(a.node,a.offset,s,o)&&([r,i,s,o]=[s,o,r,i]),{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:o}}class ce{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||MR(e.parent)||document,this.viewState=new cm(e.state||Ce.create(e)),this.plugins=this.state.facet(Zs).map(t=>new Ou(t));for(let t of this.plugins)t.update(this);this.observer=new VN(this),this.inputState=new uN(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Ug(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){let t=e.length==1&&e[0]instanceof at?e[0]:this.state.update(...e);this._dispatch(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(h=>h.annotation(db))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=pb(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Ce.phrases)!=this.state.facet(Ce.phrases))return this.setState(s);i=Sl.create(this,s,e),i.flags|=a;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new wl(d.empty?d:K.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(zg)&&(f=d.value)}this.viewState.update(i,f),this.bidiCache=kl.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(eo)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(va)!=i.state.facet(va)&&(this.viewState.mustMeasureContent=!0),(t||r||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(Kf))h(i);(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!xb(this,u)&&c.force&&Ui(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new cm(e),this.plugins=e.facet(Zs).map(r=>new Ou(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new Ug(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Zs),r=e.state.facet(Zs);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new Ou(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,{scrollTop:i}=r,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;i!=this.viewState.scrollTop&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(A1(r))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(i);s=d.from,o=d.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(d=>{try{return d.read(this)}catch(p){return wn(this.state,p),hm}}),f=Sl.create(this,this.state,[]),h=!1;f.flags|=l,t?t.flags|=l:t=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f));for(let d=0;d<c.length;d++)if(u[d]!=hm)try{let p=c[d];p.write&&p.write(u[d],this)}catch(p){wn(this.state,p)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){i=r.scrollTop=i+p,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(Kf))a(t)}get themeClasses(){return th+" "+(this.state.facet(eh)?yb:vb)+" "+this.state.facet(va)}updateAttrs(){let e=dm(this,Q1,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(fc)?"true":"false",class:"cm-content",style:`${ne.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),dm(this,dd,t);let r=this.observer.ignore(()=>{let i=qf(this.contentDOM,this.contentAttrs,t),s=qf(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(ce.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(eo),Fr.mount(this.root,this.styleModules.concat(NN).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Pu(this,e,Jg(this,e,t,r))}moveByGroup(e,t){return Pu(this,e,Jg(this,e,t,r=>lN(this,e.head,r)))}moveToLineBoundary(e,t,r=!0){return aN(this,e,t,r)}moveVertically(e,t,r){return Pu(this,e,cN(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),ob(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Ki.find(s,e-i.from,-1,t)];return cd(r,o.dir==Xe.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(X1)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>zN)return tb(e.length);let t=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t)return i.order;let r=KR(e.text,t);return this.bidiCache.push(new kl(e.from,e.to,t,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ne.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{E1(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return zg.of(new wl(typeof e=="number"?K.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return an.define(()=>({}),{eventHandlers:e})}static theme(e,t){let r=Fr.newName(),i=[va.of(r),eo.of(nh(`.${r}`,e))];return t&&t.dark&&i.push(eh.of(!0)),i}static baseTheme(e){return jo.lowest(eo.of(nh("."+th,e,bb)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Me.get(r)||Me.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}}ce.styleModule=eo;ce.inputHandler=K1;ce.focusChangeEffect=G1;ce.perLineTextDirection=X1;ce.exceptionSink=U1;ce.updateListener=Kf;ce.editable=fc;ce.mouseSelectionStyle=q1;ce.dragMovesSelection=W1;ce.clickAddsSelectionRange=z1;ce.decorations=Po;ce.atomicRanges=pd;ce.scrollMargins=J1;ce.darkTheme=eh;ce.contentAttributes=dd;ce.editorAttributes=Q1;ce.lineWrapping=ce.contentAttributes.of({class:"cm-lineWrapping"});ce.announce=Ve.define();const zN=4096,hm={};class kl{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:Xe.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new kl(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return r}}function dm(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&Wf(o,t)}return t}const WN=ne.mac?"mac":ne.windows?"win":ne.linux?"linux":"key";function qN(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function ya(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const UN=jo.default(ce.domEventHandlers({keydown(n,e){return YN(KN(e.state),n,e,"editor")}})),md=oe.define({enables:UN}),pm=new WeakMap;function KN(n){let e=n.facet(md),t=pm.get(e);return t||pm.set(e,t=XN(e.reduce((r,i)=>r.concat(i),[]))),t}let _r=null;const GN=4e3;function XN(n,e=WN){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c)=>{var u,f;let h=t[o]||(t[o]=Object.create(null)),d=a.split(/ (?!$)/).map(m=>qN(m,e));for(let m=1;m<d.length;m++){let v=d.slice(0,m).join(" ");i(v,!0),h[v]||(h[v]={preventDefault:!0,run:[y=>{let b=_r={view:y,prefix:v,scope:o};return setTimeout(()=>{_r==b&&(_r=null)},GN),!0}]})}let p=d.join(" ");i(p,!1);let g=h[p]||(h[p]={preventDefault:!1,run:((f=(u=h._any)===null||u===void 0?void 0:u.run)===null||f===void 0?void 0:f.slice())||[]});l&&g.run.push(l),c&&(g.preventDefault=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,run:[]});for(let f in u)u[f].run.push(o.any)}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault)}return t}function YN(n,e,t,r){let i=PR(e),s=St(i,0),o=vn(s)==i.length&&i!=" ",a="",l=!1;_r&&_r.view==t&&_r.scope==r&&(a=_r.prefix+" ",(l=lb.indexOf(e.keyCode)<0)&&(_r=null));let c=new Set,u=p=>{if(p){for(let g of p.run)if(!c.has(g)&&(c.add(g),g(t,e)))return!0;p.preventDefault&&(l=!0)}return!1},f=n[r],h,d;if(f){if(u(f[a+ya(i,e,!o)]))return!0;if(o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ne.windows&&e.ctrlKey&&e.altKey)&&(h=jr[e.keyCode])&&h!=i){if(u(f[a+ya(h,e,!0)]))return!0;if(e.shiftKey&&(d=Oo[e.keyCode])!=i&&d!=h&&u(f[a+ya(d,e,!1)]))return!0}else if(o&&e.shiftKey&&u(f[a+ya(i,e,!0)]))return!0;if(u(f._any))return!0}return l}class Ho{constructor(e,t,r,i,s){this.className=e,this.left=t,this.top=r,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let i=e.coordsAtPos(r.head,r.assoc||1);if(!i)return[];let s=wb(e);return[new Ho(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return QN(e,t,r)}}function wb(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Xe.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function gm(n,e,t){let r=K.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:Ke.Text}}function QN(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),i=Math.min(t.to,n.viewport.to),s=n.textDirection==Xe.LTR,o=n.contentDOM,a=o.getBoundingClientRect(),l=wb(n),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),f=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=a.right-(u?parseInt(u.paddingRight):0),d=Qf(n,r),p=Qf(n,i),g=d.type==Ke.Text?d:null,m=p.type==Ke.Text?p:null;if(g&&(n.lineWrapping||d.widgetLineBreaks)&&(g=gm(n,r,g)),m&&(n.lineWrapping||p.widgetLineBreaks)&&(m=gm(n,i,m)),g&&m&&g.from==m.from)return y(b(t.from,t.to,g));{let k=g?b(t.from,null,g):w(d,!1),x=m?b(null,t.to,m):w(p,!0),C=[];return(g||d).to<(m||p).from-(g&&m?1:0)||d.widgetLineBreaks>1&&k.bottom+n.defaultLineHeight/2<x.top?C.push(v(f,k.bottom,h,x.top)):k.bottom<x.top&&n.elementAtHeight((k.bottom+x.top)/2).type==Ke.Text&&(k.bottom=x.top=(k.bottom+x.top)/2),y(k).concat(C).concat(y(x))}function v(k,x,C,P){return new Ho(e,k-l.left,x-l.top-.01,C-k,P-x+.01)}function y({top:k,bottom:x,horizontal:C}){let P=[];for(let I=0;I<C.length;I+=2)P.push(v(C[I],k,C[I+1],x));return P}function b(k,x,C){let P=1e9,I=-1e9,$=[];function _(V,W,q,te,ee){let J=n.coordsAtPos(V,V==C.to?-2:2),H=n.coordsAtPos(q,q==C.from?2:-2);!J||!H||(P=Math.min(J.top,H.top,P),I=Math.max(J.bottom,H.bottom,I),ee==Xe.LTR?$.push(s&&W?f:J.left,s&&te?h:H.right):$.push(!s&&te?f:H.left,!s&&W?h:J.right))}let O=k??C.from,M=x??C.to;for(let V of n.visibleRanges)if(V.to>O&&V.from<M)for(let W=Math.max(V.from,O),q=Math.min(V.to,M);;){let te=n.state.doc.lineAt(W);for(let ee of n.bidiSpans(te)){let J=ee.from+te.from,H=ee.to+te.from;if(J>=q)break;H>W&&_(Math.max(J,W),k==null&&J<=O,Math.min(H,q),x==null&&H>=M,ee.dir)}if(W=te.to+1,W>=q)break}return $.length==0&&_(O,k==null,M,x==null,n.textDirection),{top:P,bottom:I,horizontal:$}}function w(k,x){let C=a.top+(x?k.top:k.bottom);return{top:C,bottom:C,horizontal:[]}}}function JN(n,e){return n.constructor==e.constructor&&n.eq(e)}class ZN{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Ha)!=e.state.facet(Ha)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Ha);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!JN(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[r].constructor&&i.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ha=oe.define();function Sb(n){return[an.define(e=>new ZN(e,n)),Ha.of(n)]}const kb=!ne.ios,To=oe.define({combine(n){return _s(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function eM(n={}){return[To.of(n),tM,nM,rM,Y1.of(!0)]}function Cb(n){return n.startState.facet(To)!=n.state.facet(To)}const tM=Sb({above:!0,markers(n){let{state:e}=n,t=e.facet(To),r=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||kb:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:K.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Ho.forRange(n,o,a))r.push(l)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Cb(n);return t&&mm(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){mm(e.state,n)},class:"cm-cursorLayer"});function mm(n,e){e.style.animationDuration=n.facet(To).cursorBlinkRate+"ms"}const nM=Sb({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Ho.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Cb(n)},class:"cm-selectionLayer"}),_b={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};kb&&(_b[".cm-line"].caretColor="transparent !important");const rM=jo.highest(ce.theme(_b)),$b=Ve.define({map(n,e){return n==null?null:e.mapPos(n)}}),ro=ln.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is($b)?r.value:t,n)}}),iM=an.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(ro);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(ro)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(ro),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(ro)!=n&&this.view.dispatch({effects:$b.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function sM(){return[ro,iM]}function vm(n,e,t,r,i){e.lastIndex=0;for(let s=n.iterRange(t,r),o=t,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)i(o+a.index,a)}function oM(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:s}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=s:r.push({from:i,to:s});return r}class aM{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof r=="function")this.addMatch=(a,l,c,u)=>{let f=r(a,l,c);f&&u(c,c+a[0].length,f)};else if(r)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,r);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new rs,r=t.add.bind(t);for(let{from:i,to:s}of oM(e,this.maxLength))vm(e.state.doc,this.regexp,i,s,(o,a)=>this.addMatch(a,e,o,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let s of e.visibleRanges){let o=Math.max(s.from,r),a=Math.min(s.to,i);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),f=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){f=a;break}}let h=[],d,p=(g,m,v)=>h.push(v.range(g,m));if(l==c)for(this.regexp.lastIndex=u-l.from;(d=this.regexp.exec(l.text))&&d.index<f-l.from;)this.addMatch(d,e,d.index+l.from,p);else vm(e.state.doc,this.regexp,u,f,(g,m)=>this.addMatch(m,e,g,p));t=t.update({filterFrom:u,filterTo:f,filter:(g,m)=>g<u||m>f,add:h})}}return t}}const rh=/x/.unicode!=null?"gu":"g",lM=new RegExp(`[\0-\b
--ÂÂ­Øâââ\u2028\u2029â­â®â¦â§â©\uFEFFï¿¹-ï¿¼]`,rh),cM={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Iu=null;function uM(){var n;if(Iu==null&&typeof document<"u"&&document.body){let e=document.body.style;Iu=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Iu||!1}const za=oe.define({combine(n){let e=_s(n,{render:null,specialChars:lM,addSpecialChars:null});return(e.replaceTabs=!uM())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,rh)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,rh)),e}});function fM(n={}){return[za.of(n),hM()]}let ym=null;function hM(){return ym||(ym=an.fromClass(class{constructor(n){this.view=n,this.decorations=Ge.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(za)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new aM({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,s=St(e[0],0);if(s==9){let o=i.lineAt(r),a=t.state.tabSize,l=lc(o.text,a,r-o.from);return Ge.replace({widget:new mM((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=Ge.replace({widget:new gM(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(za);n.startState.facet(za)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const dM="â¢";function pM(n){return n>=32?dM:n==10?"â¤":String.fromCharCode(9216+n)}class gM extends $s{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=pM(this.code),r=e.state.phrase("Control character")+" "+(cM[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=r,s.setAttribute("aria-label",r),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class mM extends $s{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const ba="-10000px";class vM{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){var t;let r=e.state.facet(this.facet),i=r.filter(o=>o);if(r===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<i.length;o++){let a=i[o],l=-1;if(a){for(let c=0;c<this.tooltips.length;c++){let u=this.tooltips[c];u&&u.create==a.create&&(l=c)}if(l<0)s[o]=this.createTooltipView(a);else{let c=s[o]=this.tooltipViews[l];c.update&&c.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(t=o.destroy)===null||t===void 0||t.call(o));return this.input=r,this.tooltips=i,this.tooltipViews=s,!0}}function yM(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const Ru=oe.define({combine:n=>{var e,t,r;return{position:ne.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||yM}}}),bm=new WeakMap,Eb=an.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(Ru);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new vM(n,Ob,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(Ru);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=ba,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Ru).tooltipSpace(this.view)}}writeMeasure(n){var e;let{editor:t,space:r}=n,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let o=this.manager.tooltips[s],a=this.manager.tooltipViews[s],{dom:l}=a,c=n.pos[s],u=n.size[s];if(!c||c.bottom<=Math.max(t.top,r.top)||c.top>=Math.min(t.bottom,r.bottom)||c.right<Math.max(t.left,r.left)-.1||c.left>Math.min(t.right,r.right)+.1){l.style.top=ba;continue}let f=o.arrow?a.dom.querySelector(".cm-tooltip-arrow"):null,h=f?7:0,d=u.right-u.left,p=(e=bm.get(a))!==null&&e!==void 0?e:u.bottom-u.top,g=a.offset||xM,m=this.view.textDirection==Xe.LTR,v=u.width>r.right-r.left?m?r.left:r.right-u.width:m?Math.min(c.left-(f?14:0)+g.x,r.right-d):Math.max(r.left,c.left-d+(f?14:0)-g.x),y=!!o.above;!o.strictSide&&(y?c.top-(u.bottom-u.top)-g.y<r.top:c.bottom+(u.bottom-u.top)+g.y>r.bottom)&&y==r.bottom-c.bottom>c.top-r.top&&(y=!y);let b=(y?c.top-r.top:r.bottom-c.bottom)-h;if(b<p&&a.resize!==!1){if(b<this.view.defaultLineHeight){l.style.top=ba;continue}bm.set(a,p),l.style.height=(p=b)+"px"}else l.style.height&&(l.style.height="");let w=y?c.top-p-h-g.y:c.bottom+h+g.y,k=v+d;if(a.overlap!==!0)for(let x of i)x.left<k&&x.right>v&&x.top<w+p&&x.bottom>w&&(w=y?x.top-p-2-h:x.bottom+h+2);this.position=="absolute"?(l.style.top=w-n.parent.top+"px",l.style.left=v-n.parent.left+"px"):(l.style.top=w+"px",l.style.left=v+"px"),f&&(f.style.left=`${c.left+(m?g.x:-g.x)-(v+14-7)}px`),a.overlap!==!0&&i.push({left:v,top:w,right:k,bottom:w+p}),l.classList.toggle("cm-tooltip-above",y),l.classList.toggle("cm-tooltip-below",!y),a.positioned&&a.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=ba}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),bM=ce.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),xM={x:0,y:0},Ob=oe.define({enables:[Eb,bM]});function Ab(n,e){let t=n.plugin(Eb);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}class yi extends mi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}yi.prototype.elementClass="";yi.prototype.toDOM=void 0;yi.prototype.mapMode=Bt.TrackBefore;yi.prototype.startSide=yi.prototype.endSide=-1;yi.prototype.point=!0;const Nu=oe.define(),Wa=oe.define(),ih=oe.define({combine:n=>n.some(e=>e)});function wM(n){let e=[SM];return n&&n.fixed===!1&&e.push(ih.of(!0)),e}const SM=an.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Wa).map(e=>new wm(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(ih),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ih)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Ne.iter(this.view.state.facet(Nu),this.view.viewport.from),r=[],i=this.gutters.map(s=>new kM(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Ke.Text&&o){sh(t,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==Ke.Text){sh(t,r,s.from);for(let o of i)o.line(this.view,s,r)}for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Wa),t=n.state.facet(Wa),r=n.docChanged||n.heightChanged||n.viewportChanged||!Ne.eq(n.startState.facet(Nu),n.state.facet(Nu),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new wm(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>ce.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Xe.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function xm(n){return Array.isArray(n)?n:[n]}function sh(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class kM{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Ne.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=t.top-this.height;if(this.i==i.elements.length){let o=new Pb(e,t.height,s,r);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,t.height,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];sh(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t);r&&this.addElement(e,t,[r])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class wm{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=xm(t.markers(e)),t.initialSpacer&&(this.spacer=new Pb(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=xm(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Ne.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Pb{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),CM(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(r+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(l)){a=f,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function CM(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const _M=oe.define(),ji=oe.define({combine(n){return _s(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return r}})}});class Mu extends yi{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Bu(n,e){return n.state.facet(ji).formatNumber(e,n.state)}const $M=Wa.compute([ji],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(_M)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new Mu(Bu(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(ji)!=e.state.facet(ji),initialSpacer(e){return new Mu(Bu(e,Sm(e.state.doc.lines)))},updateSpacer(e,t){let r=Bu(t.view,Sm(t.view.state.doc.lines));return r==e.number?e:new Mu(r)},domEventHandlers:n.facet(ji).domEventHandlers}));function EM(n={}){return[ji.of(n),wM(),$M]}function Sm(n){let e=9;for(;e<n;)e=e*10+9;return e}const Tb=1024;let OM=0;class Lu{constructor(e,t){this.from=e,this.to=t}}class ve{constructor(e={}){this.id=OM++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=zt.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}ve.closedBy=new ve({deserialize:n=>n.split(" ")});ve.openedBy=new ve({deserialize:n=>n.split(" ")});ve.group=new ve({deserialize:n=>n.split(" ")});ve.contextHash=new ve({perNode:!0});ve.lookAhead=new ve({perNode:!0});ve.mounted=new ve({perNode:!0});const AM=Object.create(null);class zt{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):AM,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new zt(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ve.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(ve.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}}zt.none=new zt("",Object.create(null),0,8);class vd{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new zt(r.name,i,r.id,r.flags):r)}return new vd(t)}}const xa=new WeakMap,km=new WeakMap;var ct;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(ct||(ct={}));class rt{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=this.prop(ve.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new $l(this.topNode,e)}cursorAt(e,t=0,r=0){let i=xa.get(this)||this.topNode,s=new $l(i);return s.moveTo(e,t),xa.set(this,s._tree),s}get topNode(){return new cr(this,0,0,null)}resolve(e,t=0){let r=as(xa.get(this)||this.topNode,e,t,!1);return xa.set(this,r),r}resolveInner(e,t=0){let r=as(km.get(this)||this.topNode,e,t,!0);return km.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&ct.IncludeAnonymous)>0;for(let l=this.cursor(o|ct.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:xd(zt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new rt(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new rt(zt.none,t,r,i)))}static build(e){return TM(e)}}rt.empty=new rt(zt.none,[],[],0);class yd{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new yd(this.buffer,this.index)}}class $i{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return zt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(Db(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=i[a++],s[l++]=i[a++]-r;let c=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,c)}return new $i(s,o,this.set)}}function Db(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Ib(n,e){let t=n.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}function as(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof cr&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:ct.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof cr&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class cr{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],f=l[e]+o.from;if(Db(i,r,f,f+u.length)){if(u instanceof $i){if(s&ct.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,r-f,i);if(h>-1)return new Pr(new PM(o,u,e,f),null,h)}else if(s&ct.IncludeAnonymous||!u.type.isAnonymous||bd(u)){let h;if(!(s&ct.IgnoreMounts)&&u.props&&(h=u.prop(ve.mounted))&&!h.overlay)return new cr(h.tree,f,e,o);let d=new cr(u,f,e,o);return s&ct.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?u.children.length-1:0,t,r,i)}}}if(s&ct.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&ct.IgnoreOverlays)&&(i=this._tree.prop(ve.mounted))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new cr(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new $l(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return as(this,e,t,!1)}resolveInner(e,t=0){return as(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Ib(this,e)}getChild(e,t=null,r=null){let i=Cl(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Cl(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return _l(this,e)}}function Cl(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function _l(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class PM{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Pr{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new Pr(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&ct.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new Pr(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Pr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Pr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new $l(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new rt(this.type,e,t,this.to-this.from)}resolve(e,t=0){return as(this,e,t,!1)}resolveInner(e,t=0){return as(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Ib(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=Cl(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Cl(this,e,t,r)}get node(){return this}matchContext(e){return _l(this,e)}}class $l{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof cr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof cr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&ct.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ct.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ct.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&ct.IncludeAnonymous||a instanceof $i||!a.type.isAnonymous||bd(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new Pr(this.buffer,t,this.stack[i]);return this.bufferNode=new Pr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return _l(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return _l(this.node,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function bd(n){return n.children.some(e=>e instanceof $i||!e.type.isAnonymous||bd(e))}function TM(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=Tb,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new yd(t,t.length):t,l=r.types,c=0,u=0;function f(w,k,x,C,P){let{id:I,start:$,end:_,size:O}=a,M=u;for(;O<0;)if(a.next(),O==-1){let ee=s[I];x.push(ee),C.push($-w);return}else if(O==-3){c=I;return}else if(O==-4){u=I;return}else throw new RangeError(`Unrecognized record size: ${O}`);let V=l[I],W,q,te=$-w;if(_-$<=i&&(q=g(a.pos-k,P))){let ee=new Uint16Array(q.size-q.skip),J=a.pos-q.size,H=ee.length;for(;a.pos>J;)H=m(q.start,ee,H);W=new $i(ee,_-q.start,r),te=q.start-w}else{let ee=a.pos-O;a.next();let J=[],H=[],E=I>=o?I:-1,R=0,T=_;for(;a.pos>ee;)E>=0&&a.id==E&&a.size>=0?(a.end<=T-i&&(d(J,H,$,R,a.end,T,E,M),R=J.length,T=a.end),a.next()):f($,ee,J,H,E);if(E>=0&&R>0&&R<J.length&&d(J,H,$,R,$,T,E,M),J.reverse(),H.reverse(),E>-1&&R>0){let S=h(V);W=xd(V,J,H,0,J.length,0,_-$,S,S)}else W=p(V,J,H,_-$,M-_)}x.push(W),C.push(te)}function h(w){return(k,x,C)=>{let P=0,I=k.length-1,$,_;if(I>=0&&($=k[I])instanceof rt){if(!I&&$.type==w&&$.length==C)return $;(_=$.prop(ve.lookAhead))&&(P=x[I]+$.length+_)}return p(w,k,x,C,P)}}function d(w,k,x,C,P,I,$,_){let O=[],M=[];for(;w.length>C;)O.push(w.pop()),M.push(k.pop()+x-P);w.push(p(r.types[$],O,M,I-P,_-I)),k.push(P-x)}function p(w,k,x,C,P=0,I){if(c){let $=[ve.contextHash,c];I=I?[$].concat(I):[$]}if(P>25){let $=[ve.lookAhead,P];I=I?[$].concat(I):[$]}return new rt(w,k,x,C,I)}function g(w,k){let x=a.fork(),C=0,P=0,I=0,$=x.end-i,_={size:0,start:0,skip:0};e:for(let O=x.pos-w;x.pos>O;){let M=x.size;if(x.id==k&&M>=0){_.size=C,_.start=P,_.skip=I,I+=4,C+=4,x.next();continue}let V=x.pos-M;if(M<0||V<O||x.start<$)break;let W=x.id>=o?4:0,q=x.start;for(x.next();x.pos>V;){if(x.size<0)if(x.size==-3)W+=4;else break e;else x.id>=o&&(W+=4);x.next()}P=q,C+=M,I+=W}return(k<0||C==w)&&(_.size=C,_.start=P,_.skip=I),_.size>4?_:void 0}function m(w,k,x){let{id:C,start:P,end:I,size:$}=a;if(a.next(),$>=0&&C<o){let _=x;if($>4){let O=a.pos-($-4);for(;a.pos>O;)x=m(w,k,x)}k[--x]=_,k[--x]=I-w,k[--x]=P-w,k[--x]=C}else $==-3?c=C:$==-4&&(u=C);return x}let v=[],y=[];for(;a.pos>0;)f(n.start||0,n.bufferStart||0,v,y,-1);let b=(e=n.length)!==null&&e!==void 0?e:v.length?y[0]+v[0].length:0;return new rt(l[n.topID],v.reverse(),y.reverse(),b)}const Cm=new WeakMap;function qa(n,e){if(!n.isAnonymous||e instanceof $i||e.type!=n)return 1;let t=Cm.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof rt)){t=1;break}t+=qa(n,r)}Cm.set(e,t)}return t}function xd(n,e,t,r,i,s,o,a,l){let c=0;for(let p=r;p<i;p++)c+=qa(n,e[p]);let u=Math.ceil(c*1.5/8),f=[],h=[];function d(p,g,m,v,y){for(let b=m;b<v;){let w=b,k=g[b],x=qa(n,p[b]);for(b++;b<v;b++){let C=qa(n,p[b]);if(x+C>=u)break;x+=C}if(b==w+1){if(x>u){let C=p[w];d(C.children,C.positions,0,C.children.length,g[w]+y);continue}f.push(p[w])}else{let C=g[b-1]+p[b-1].length-k;f.push(xd(n,p,g,w,b,k,C,null,l))}h.push(k+y-s)}}return d(e,t,r,i,0),(a||l)(f,h,o)}class di{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new di(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<t.length?t[a]:null,f=u?u.fromA:1e9;if(f-l>=r)for(;o&&o.from<f;){let h=o;if(l>=h.from||f<=h.to||c){let d=Math.max(h.from,l)-c,p=Math.min(h.to,f)-c;h=d>=p?null:new di(d,p,h.tree,h.offset+c,a>0,!!u)}if(h&&i.push(h),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class Rb{startParse(e,t,r){return typeof e=="string"&&(e=new DM(e)),r=r?r.length?r.map(i=>new Lu(i.from,i.to)):[new Lu(0,0)]:[new Lu(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}}class DM{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ve({perNode:!0});let IM=0;class Vn{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=IM++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new Vn([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new El;return t=>t.modified.indexOf(e)>-1?t:El.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let RM=0;class El{constructor(){this.instances=[],this.id=RM++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&NM(t,a.modified));if(r)return r;let i=[],s=new Vn(i,e,t);for(let a of t)a.instances.push(s);let o=MM(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(El.get(a,l));return s}}function NM(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function MM(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Nb(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let f=0;;){if(a=="..."&&f>0&&f+3==i.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!h)throw new RangeError("Invalid path: "+i);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==i.length)break;let d=i[f++];if(f==i.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+i);a=i.slice(f)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new Ol(r,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return Mb.add(e)}const Mb=new ve;class Ol{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ol.empty=new Ol([],2,null);function Bb(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:r}}function BM(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function LM(n,e,t,r=0,i=n.length){let s=new FM(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}class FM{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=i,u=jM(e)||Ol.empty,f=BM(s,u.tags);if(f&&(c&&(c+=" "),c+=f,u.mode==1&&(i+=(i?" ":"")+f)),this.startSpan(Math.max(t,a),c),u.opaque)return;let h=e.tree&&e.tree.prop(ve.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+a,1),p=this.highlighters.filter(m=>!m.scope||m.scope(h.tree.type)),g=e.firstChild();for(let m=0,v=a;;m++){let y=m<h.overlay.length?h.overlay[m]:null,b=y?y.from+a:l,w=Math.max(t,v),k=Math.min(r,b);if(w<k&&g)for(;e.from<k&&(this.highlightRange(e,w,k,i,s),this.startSpan(Math.min(k,e.to),c),!(e.to>=b||!e.nextSibling())););if(!y||b>r)break;v=y.to+a,v>t&&(this.highlightRange(d.cursor(),Math.max(t,y.from+a),Math.min(r,v),"",p),this.startSpan(Math.min(r,v),c))}g&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function jM(n){let e=n.type.prop(Mb);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const Y=Vn.define,wa=Y(),kr=Y(),_m=Y(kr),$m=Y(kr),Cr=Y(),Sa=Y(Cr),Fu=Y(Cr),jn=Y(),Qr=Y(jn),Bn=Y(),Ln=Y(),oh=Y(),Ws=Y(oh),ka=Y(),z={comment:wa,lineComment:Y(wa),blockComment:Y(wa),docComment:Y(wa),name:kr,variableName:Y(kr),typeName:_m,tagName:Y(_m),propertyName:$m,attributeName:Y($m),className:Y(kr),labelName:Y(kr),namespace:Y(kr),macroName:Y(kr),literal:Cr,string:Sa,docString:Y(Sa),character:Y(Sa),attributeValue:Y(Sa),number:Fu,integer:Y(Fu),float:Y(Fu),bool:Y(Cr),regexp:Y(Cr),escape:Y(Cr),color:Y(Cr),url:Y(Cr),keyword:Bn,self:Y(Bn),null:Y(Bn),atom:Y(Bn),unit:Y(Bn),modifier:Y(Bn),operatorKeyword:Y(Bn),controlKeyword:Y(Bn),definitionKeyword:Y(Bn),moduleKeyword:Y(Bn),operator:Ln,derefOperator:Y(Ln),arithmeticOperator:Y(Ln),logicOperator:Y(Ln),bitwiseOperator:Y(Ln),compareOperator:Y(Ln),updateOperator:Y(Ln),definitionOperator:Y(Ln),typeOperator:Y(Ln),controlOperator:Y(Ln),punctuation:oh,separator:Y(oh),bracket:Ws,angleBracket:Y(Ws),squareBracket:Y(Ws),paren:Y(Ws),brace:Y(Ws),content:jn,heading:Qr,heading1:Y(Qr),heading2:Y(Qr),heading3:Y(Qr),heading4:Y(Qr),heading5:Y(Qr),heading6:Y(Qr),contentSeparator:Y(jn),list:Y(jn),quote:Y(jn),emphasis:Y(jn),strong:Y(jn),link:Y(jn),monospace:Y(jn),strikethrough:Y(jn),inserted:Y(),deleted:Y(),changed:Y(),invalid:Y(),meta:ka,documentMeta:Y(ka),annotation:Y(ka),processingInstruction:Y(ka),definition:Vn.defineModifier(),constant:Vn.defineModifier(),function:Vn.defineModifier(),standard:Vn.defineModifier(),local:Vn.defineModifier(),special:Vn.defineModifier()};Bb([{tag:z.link,class:"tok-link"},{tag:z.heading,class:"tok-heading"},{tag:z.emphasis,class:"tok-emphasis"},{tag:z.strong,class:"tok-strong"},{tag:z.keyword,class:"tok-keyword"},{tag:z.atom,class:"tok-atom"},{tag:z.bool,class:"tok-bool"},{tag:z.url,class:"tok-url"},{tag:z.labelName,class:"tok-labelName"},{tag:z.inserted,class:"tok-inserted"},{tag:z.deleted,class:"tok-deleted"},{tag:z.literal,class:"tok-literal"},{tag:z.string,class:"tok-string"},{tag:z.number,class:"tok-number"},{tag:[z.regexp,z.escape,z.special(z.string)],class:"tok-string2"},{tag:z.variableName,class:"tok-variableName"},{tag:z.local(z.variableName),class:"tok-variableName tok-local"},{tag:z.definition(z.variableName),class:"tok-variableName tok-definition"},{tag:z.special(z.variableName),class:"tok-variableName2"},{tag:z.definition(z.propertyName),class:"tok-propertyName tok-definition"},{tag:z.typeName,class:"tok-typeName"},{tag:z.namespace,class:"tok-namespace"},{tag:z.className,class:"tok-className"},{tag:z.macroName,class:"tok-macroName"},{tag:z.propertyName,class:"tok-propertyName"},{tag:z.operator,class:"tok-operator"},{tag:z.comment,class:"tok-comment"},{tag:z.meta,class:"tok-meta"},{tag:z.invalid,class:"tok-invalid"},{tag:z.punctuation,class:"tok-punctuation"}]);var ju;const Vi=new ve;function VM(n){return oe.define({combine:n?e=>e.concat(n):void 0})}const HM=new ve;class bn{constructor(e,t,r=[],i=""){this.data=e,this.name=i,Ce.prototype.hasOwnProperty("tree")||Object.defineProperty(Ce.prototype,"tree",{get(){return Xt(this)}}),this.parser=t,this.extension=[cs.of(this),Ce.languageData.of((s,o,a)=>{let l=Em(s,o,a),c=l.type.prop(Vi);if(!c)return[];let u=s.facet(c),f=l.type.prop(HM);if(f){let h=l.resolve(o-l.from,a);for(let d of f)if(d.test(h,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(u)}}return u})].concat(r)}isActiveAt(e,t,r=-1){return Em(e,t,r).type.prop(Vi)==this.data}findRegions(e){let t=e.facet(cs);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(Vi)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(ve.mounted);if(a){if(a.tree.prop(Vi)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof rt&&i(c,s.positions[l]+o)}};return i(Xt(e),0),r}get allowsNesting(){return!0}}bn.setState=Ve.define();function Em(n,e,t){let r=n.facet(cs),i=Xt(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,ct.ExcludeBuffers))s.type.isTop&&(i=s);return i}class Al extends bn{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=VM(e.languageData);return new Al(t,e.parser.configure({props:[Vi.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new Al(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Xt(n){let e=n.field(bn.state,!1);return e?e.tree:rt.empty}class zM{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let qs=null;class Pl{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Pl(e,t,[],rt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new zM(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=rt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(di.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(di.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=qs;qs=this;try{return e()}finally{qs=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Om(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,f,h)=>l.push({fromA:c,toA:u,fromB:f,toB:h})),r=di.applyChanges(r,l),i=rt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);u<f&&a.push({from:u,to:f})}}}return new Pl(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=Om(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Rb{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=qs;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new rt(zt.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return qs}}function Om(n,e,t){return di.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class ls{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new ls(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Pl.create(e.facet(cs).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new ls(r)}}bn.state=ln.define({create:ls.init,update(n,e){for(let t of e.effects)if(t.is(bn.setState))return t.value;return e.startState.facet(cs)!=e.state.facet(cs)?ls.init(e.state):n.apply(e)}});let Lb=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Lb=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Vu=typeof navigator<"u"&&(!((ju=navigator.scheduling)===null||ju===void 0)&&ju.isInputPending)?()=>navigator.scheduling.isInputPending():null,WM=an.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(bn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(bn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Lb(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(bn.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Vu?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>Vu&&Vu()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:bn.setState.of(new ls(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>wn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),cs=oe.define({combine(n){return n.length?n[0]:null},enables:n=>[bn.state,WM,ce.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class qM{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const UM=oe.define(),wd=oe.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Tl(n){let e=n.facet(wd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Do(n,e){let t="",r=n.tabSize,i=n.facet(wd)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function Sd(n,e){n instanceof Ce&&(n=new hc(n));for(let r of n.state.facet(UM)){let i=r(n,e);if(i!==void 0)return i}let t=Xt(n.state);return t?KM(n,t,e):null}class hc{constructor(e,t={}){this.state=e,this.options=t,this.unit=Tl(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return lc(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Fb=new ve;function KM(n,e,t){return jb(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function GM(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function XM(n){let e=n.type.prop(Fb);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(ve.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>ZM(o,!0,1,void 0,s&&!GM(o)?i.from:void 0)}return n.parent==null?YM:null}function jb(n,e,t){for(;n;n=n.parent){let r=XM(n);if(r)return r(kd.create(t,e,n))}return null}function YM(){return 0}class kd extends hc{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new kd(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(QM(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){let e=this.node.parent;return e?jb(e,this.pos,this.base):0}}function QM(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function JM(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<o?t:null;a=l.to}}function ZM(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==n.pos+o,l=e?JM(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}function Am({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const e3=200;function t3(){return Ce.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+e3)return n;let s=t.sliceString(i.from,r);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let f=Sd(o,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],d=Do(o,f);h!=d&&l.push({from:u.from,to:u.from+h.length,insert:d})}return l.length?[n,{changes:l,sequential:!0}]:n})}const n3=new ve;function r3(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class zo{constructor(e,t){this.specs=e;let r;function i(a){let l=Fr.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof bn?a=>a.prop(Vi)==o.data:o?a=>a==o:void 0,this.style=Bb(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Fr(r):null,this.themeType=t.themeType}static define(e,t){return new zo(e,t||{})}}const ah=oe.define(),Vb=oe.define({combine(n){return n.length?[n[0]]:null}});function Hu(n){let e=n.facet(ah);return e.length?e:n.facet(Vb)}function Hb(n,e){let t=[s3],r;return n instanceof zo&&(n.module&&t.push(ce.styleModule.of(n.module)),r=n.themeType),e?.fallback?t.push(Vb.of(n)):r?t.push(ah.computeN([ce.darkTheme],i=>i.facet(ce.darkTheme)==(r=="dark")?[n]:[])):t.push(ah.of(n)),t}class i3{constructor(e){this.markCache=Object.create(null),this.tree=Xt(e.state),this.decorations=this.buildDeco(e,Hu(e.state))}update(e){let t=Xt(e.state),r=Hu(e.state),i=r!=Hu(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return Ge.none;let r=new rs;for(let{from:i,to:s}of e.visibleRanges)LM(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=Ge.mark({class:l})))},i,s);return r.finish()}}const s3=jo.high(an.fromClass(i3,{decorations:n=>n.decorations})),o3=zo.define([{tag:z.meta,color:"#404740"},{tag:z.link,textDecoration:"underline"},{tag:z.heading,textDecoration:"underline",fontWeight:"bold"},{tag:z.emphasis,fontStyle:"italic"},{tag:z.strong,fontWeight:"bold"},{tag:z.strikethrough,textDecoration:"line-through"},{tag:z.keyword,color:"#708"},{tag:[z.atom,z.bool,z.url,z.contentSeparator,z.labelName],color:"#219"},{tag:[z.literal,z.inserted],color:"#164"},{tag:[z.string,z.deleted],color:"#a11"},{tag:[z.regexp,z.escape,z.special(z.string)],color:"#e40"},{tag:z.definition(z.variableName),color:"#00f"},{tag:z.local(z.variableName),color:"#30a"},{tag:[z.typeName,z.namespace],color:"#085"},{tag:z.className,color:"#167"},{tag:[z.special(z.variableName),z.macroName],color:"#256"},{tag:z.definition(z.propertyName),color:"#00c"},{tag:z.comment,color:"#940"},{tag:z.invalid,color:"#f00"}]),a3=ce.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),zb=1e4,Wb="()[]{}",qb=oe.define({combine(n){return _s(n,{afterCursor:!0,brackets:Wb,maxScanDistance:zb,renderMatch:u3})}}),l3=Ge.mark({class:"cm-matchingBracket"}),c3=Ge.mark({class:"cm-nonmatchingBracket"});function u3(n){let e=[],t=n.matched?l3:c3;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const f3=ln.define({create(){return Ge.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(qb);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Un(e.state,i.head,-1,r)||i.head>0&&Un(e.state,i.head-1,1,r)||r.afterCursor&&(Un(e.state,i.head,1,r)||i.head<e.state.doc.length&&Un(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return Ge.set(t,!0)},provide:n=>ce.decorations.from(n)}),h3=[f3,a3];function d3(n={}){return[qb.of(n),h3]}const p3=new ve;function lh(n,e,t){let r=n.prop(e<0?ve.openedBy:ve.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function ch(n){let e=n.type.prop(p3);return e?e(n.node):n}function Un(n,e,t,r={}){let i=r.maxScanDistance||zb,s=r.brackets||Wb,o=Xt(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=lh(l.type,t,s);if(c&&l.from<l.to){let u=ch(l);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return g3(n,e,t,l,u,c,s)}}return m3(n,e,t,o,a.type,i,s)}function g3(n,e,t,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},c=0,u=a?.cursor();if(u&&(t<0?u.childBefore(r.from):u.childAfter(r.to)))do if(t<0?u.to<=r.from:u.from>=r.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let f=ch(u);return{start:l,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(lh(u.type,t,o))c++;else if(lh(u.type,-t,o)){if(c==0){let f=ch(u);return{start:l,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function m3(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=s;){let d=u.value;t<0&&(h+=d.length);let p=e+h*t;for(let g=t>0?0:d.length-1,m=t>0?d.length:-1;g!=m;g+=t){let v=o.indexOf(d[g]);if(!(v<0||r.resolveInner(p+g,1).type!=i))if(v%2==0==t>0)f++;else{if(f==1)return{start:c,end:{from:p+g,to:p+g+1},matched:v>>1==l>>1};f--}}t>0&&(h+=d.length)}return u.done?{start:c,matched:!1}:null}const v3=Object.create(null),Pm=[zt.none],Tm=[],y3=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])y3[n]=b3(v3,e);function zu(n,e){Tm.indexOf(n)>-1||(Tm.push(n),console.warn(e))}function b3(n,e){let t=null;for(let s of e.split(".")){let o=n[s]||z[s];o?typeof o=="function"?t?t=o(t):zu(s,`Modifier ${s} used at start of tag`):t?zu(s,`Tag ${s} used as modifier`):t=o:zu(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=zt.define({id:Pm.length,name:r,props:[Nb({[r]:t})]});return Pm.push(i),i.id}const x3=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=_d(n.state,t.from);return r.line?w3(n):r.block?k3(n):!1};function Cd(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const w3=Cd($3,0),S3=Cd(Ub,0),k3=Cd((n,e)=>Ub(n,e,_3(e)),0);function _d(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Us=50;function C3(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-Us,r),o=n.sliceDoc(i,i+Us),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,f;i-r<=2*Us?u=f=n.sliceDoc(r,i):(u=n.sliceDoc(r,r+Us),f=n.sliceDoc(i-Us,i));let h=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-t.length;return u.slice(h,h+e.length)==e&&f.slice(p,p+t.length)==t?{open:{pos:r+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:i-d-t.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function _3(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Ub(n,e,t=e.selection.ranges){let r=t.map(s=>_d(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>C3(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function $3(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9,c=_d(e,s).line;if(c){for(let u=s;u<=o;){let f=e.doc.lineAt(u);if(f.from>i&&(s==o||o>f.from)){i=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,p=f.text.slice(h,h+c.length)==c?h:-1;h<f.text.length&&h<l&&(l=h),r.push({line:f,comment:p,token:c,indent:h,empty:d,single:!1})}u=f.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:f}of r)(f||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const uh=gr.define(),E3=gr.define(),O3=oe.define(),Kb=oe.define({combine(n){return _s(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}});function A3(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}const Gb=ln.define({create(){return Kn.empty},update(n,e){let t=e.state.facet(Kb),r=e.annotation(uh);if(r){let l=e.docChanged?K.single(A3(e.changes)):void 0,c=jt.fromTransaction(e,l),u=r.side,f=u==0?n.undone:n.done;return c?f=Dl(f,f.length,t.minDepth,c):f=Qb(f,e.startState.selection),new Kn(u==0?r.rest:f,u==0?f:r.rest)}let i=e.annotation(E3);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(at.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=jt.fromTransaction(e),o=e.annotation(at.time),a=e.annotation(at.userEvent);return s?n=n.addChanges(s,o,a,t,e):e.selection&&(n=n.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Kn(n.done.map(jt.fromJSON),n.undone.map(jt.fromJSON))}});function P3(n={}){return[Gb,Kb.of(n),ce.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Xb:e.inputType=="historyRedo"?fh:null;return r?(e.preventDefault(),r(t)):!1}})]}function dc(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(Gb,!1);if(!i)return!1;let s=i.pop(n,t,e);return s?(r(s),!0):!1}}const Xb=dc(0,!1),fh=dc(1,!1),T3=dc(0,!0),D3=dc(1,!0);class jt{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new jt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new jt(e.changes&&ot.fromJSON(e.changes),[],e.mapped&&Xn.fromJSON(e.mapped),e.startSelection&&K.fromJSON(e.startSelection),e.selectionsAfter.map(K.fromJSON))}static fromTransaction(e,t){let r=sn;for(let i of e.startState.facet(O3)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new jt(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,sn)}static selection(e){return new jt(void 0,sn,void 0,void 0,e)}}function Dl(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function I3(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let c=t[l++],u=t[l++];a>=c&&o<=u&&(r=!0)}}),r}function R3(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function Yb(n,e){return n.length?e.length?n.concat(e):n:e}const sn=[],N3=200;function Qb(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-N3));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),Dl(n,n.length-1,1e9,t.setSelAfter(r)))}else return[jt.selection([e])]}function M3(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Wu(n,e){if(!n.length)return n;let t=n.length,r=sn;for(;t;){let i=B3(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[jt.selection(r)]:sn}function B3(n,e,t){let r=Yb(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):sn,t);if(!n.changes)return jt.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new jt(i,Ve.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}const L3=/^(input\.type|delete)($|\.)/;class Kn{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Kn(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||L3.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,I3(a.changes,e.changes))||r=="input.type.compose")?o=Dl(o,o.length-1,i.minDepth,new jt(e.changes.compose(a.changes),Yb(e.effects,a.effects),a.mapped,a.startSelection,sn)):o=Dl(o,o.length,i.minDepth,e),new Kn(o,sn,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:sn;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&R3(s[s.length-1],e)?this:new Kn(Qb(this.done,e),this.undone,t,r)}addMapping(e){return new Kn(Wu(this.done,e),Wu(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1];if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:uh.of({side:e,rest:M3(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?sn:i.slice(0,i.length-1);return s.mapped&&(o=Wu(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:uh.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Kn.empty=new Kn(sn,sn);const F3=[{key:"Mod-z",run:Xb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:fh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:fh,preventDefault:!0},{key:"Mod-u",run:T3,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:D3,preventDefault:!0}];function Es(n,e){return K.create(n.ranges.map(e),n.mainIndex)}function Jn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function En({state:n,dispatch:e},t){let r=Es(n.selection,t);return r.eq(n.selection)?!1:(e(Jn(n,r)),!0)}function pc(n,e){return K.cursor(e?n.to:n.from)}function Jb(n,e){return En(n,t=>t.empty?n.moveByChar(t,e):pc(t,e))}function Ct(n){return n.textDirectionAt(n.state.selection.main.head)==Xe.LTR}const Zb=n=>Jb(n,!Ct(n)),ex=n=>Jb(n,Ct(n));function tx(n,e){return En(n,t=>t.empty?n.moveByGroup(t,e):pc(t,e))}const j3=n=>tx(n,!Ct(n)),V3=n=>tx(n,Ct(n));function H3(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function gc(n,e,t){let r=Xt(n).resolveInner(e.head),i=t?ve.closedBy:ve.openedBy;for(let l=e.head;;){let c=t?r.childAfter(l):r.childBefore(l);if(!c)break;H3(n,c,i)?r=c:l=t?c.to:c.from}let s=r.type.prop(i),o,a;return s&&(o=t?Un(n,r.from,1):Un(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,K.cursor(a,t?-1:1)}const z3=n=>En(n,e=>gc(n.state,e,!Ct(n))),W3=n=>En(n,e=>gc(n.state,e,Ct(n)));function nx(n,e){return En(n,t=>{if(!t.empty)return pc(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const rx=n=>nx(n,!1),ix=n=>nx(n,!0);function sx(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(ce.scrollMargins)){let o=s(n);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function ox(n,e){let t=sx(n),{state:r}=n,i=Es(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):pc(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,c=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<c&&(s=ce.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(Jn(r,i),{effects:s}),!0}const Dm=n=>ox(n,!1),hh=n=>ox(n,!0);function Ur(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=K.cursor(r.from+s))}return i}const q3=n=>En(n,e=>Ur(n,e,!0)),U3=n=>En(n,e=>Ur(n,e,!1)),K3=n=>En(n,e=>Ur(n,e,!Ct(n))),G3=n=>En(n,e=>Ur(n,e,Ct(n))),X3=n=>En(n,e=>K.cursor(n.lineBlockAt(e.head).from,1)),Y3=n=>En(n,e=>K.cursor(n.lineBlockAt(e.head).to,-1));function Q3(n,e,t){let r=!1,i=Es(n.selection,s=>{let o=Un(n,s.head,-1)||Un(n,s.head,1)||s.head>0&&Un(n,s.head-1,1)||s.head<n.doc.length&&Un(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return t?K.range(s.anchor,a):K.cursor(a)});return r?(e(Jn(n,i)),!0):!1}const J3=({state:n,dispatch:e})=>Q3(n,e,!1);function cn(n,e){let t=Es(n.state.selection,r=>{let i=e(r);return K.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Jn(n.state,t)),!0)}function ax(n,e){return cn(n,t=>n.moveByChar(t,e))}const lx=n=>ax(n,!Ct(n)),cx=n=>ax(n,Ct(n));function ux(n,e){return cn(n,t=>n.moveByGroup(t,e))}const Z3=n=>ux(n,!Ct(n)),eB=n=>ux(n,Ct(n)),tB=n=>cn(n,e=>gc(n.state,e,!Ct(n))),nB=n=>cn(n,e=>gc(n.state,e,Ct(n)));function fx(n,e){return cn(n,t=>n.moveVertically(t,e))}const hx=n=>fx(n,!1),dx=n=>fx(n,!0);function px(n,e){return cn(n,t=>n.moveVertically(t,e,sx(n).height))}const Im=n=>px(n,!1),Rm=n=>px(n,!0),rB=n=>cn(n,e=>Ur(n,e,!0)),iB=n=>cn(n,e=>Ur(n,e,!1)),sB=n=>cn(n,e=>Ur(n,e,!Ct(n))),oB=n=>cn(n,e=>Ur(n,e,Ct(n))),aB=n=>cn(n,e=>K.cursor(n.lineBlockAt(e.head).from)),lB=n=>cn(n,e=>K.cursor(n.lineBlockAt(e.head).to)),Nm=({state:n,dispatch:e})=>(e(Jn(n,{anchor:0})),!0),Mm=({state:n,dispatch:e})=>(e(Jn(n,{anchor:n.doc.length})),!0),Bm=({state:n,dispatch:e})=>(e(Jn(n,{anchor:n.selection.main.anchor,head:0})),!0),Lm=({state:n,dispatch:e})=>(e(Jn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),cB=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),uB=({state:n,dispatch:e})=>{let t=vc(n).map(({from:r,to:i})=>K.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:K.create(t),userEvent:"select"})),!0},fB=({state:n,dispatch:e})=>{let t=Es(n.selection,r=>{var i;let s=Xt(n).resolveInner(r.head,1);for(;!(s.from<r.from&&s.to>=r.to||s.to>r.to&&s.from<=r.from||!(!((i=s.parent)===null||i===void 0)&&i.parent));)s=s.parent;return K.range(s.to,s.from)});return e(Jn(n,t)),!0},hB=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=K.create([t.main]):t.main.empty||(r=K.create([K.cursor(t.main.head)])),r?(e(Jn(n,r)),!0):!1};function mc(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(o);l<o?(t="delete.backward",l=Ca(n,l,!1)):l>o&&(t="delete.forward",l=Ca(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Ca(n,o,!1),a=Ca(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:K.cursor(o)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?ce.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ca(n,e,t){if(n instanceof ce)for(let r of n.state.facet(ce.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const gx=(n,e)=>mc(n,t=>{let{state:r}=n,i=r.doc.lineAt(t),s,o;if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(s=i.text.slice(0,t-i.from))){if(s[s.length-1]=="	")return t-1;let a=lc(s,r.tabSize),l=a%Tl(r)||Tl(r);for(let c=0;c<l&&s[s.length-1-c]==" ";c++)t--;o=t}else o=Gt(i.text,t-i.from,e,e)+i.from,o==t&&i.number!=(e?r.doc.lines:1)&&(o+=e?1:-1);return o}),dh=n=>gx(n,!1),mx=n=>gx(n,!0),vx=(n,e)=>mc(n,t=>{let r=t,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=Gt(s.text,r-s.from,e)+s.from,c=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||r!=t)&&(a=u),r=l}return r}),yx=n=>vx(n,!1),dB=n=>vx(n,!0),bx=n=>mc(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),pB=n=>mc(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),gB=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Oe.of(["",""])},range:K.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},mB=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:Gt(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:Gt(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:K.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function vc(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function xx(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of vc(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push(K.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push(K.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:K.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const vB=({state:n,dispatch:e})=>xx(n,e,!1),yB=({state:n,dispatch:e})=>xx(n,e,!0);function wx(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of vc(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const bB=({state:n,dispatch:e})=>wx(n,e,!1),xB=({state:n,dispatch:e})=>wx(n,e,!0),wB=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(vc(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=Es(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function SB(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Xt(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(ve.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const kB=Sx(!1),CB=Sx(!0);function Sx(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&SB(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new hc(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Sd(c,s);for(u==null&&(u=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let f=["",Do(e,u)];return l&&f.push(Do(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:Oe.of(f)},range:K.cursor(s+1+f[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function $d(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:K.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}const _B=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new hc(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=$d(n,(s,o,a)=>{let l=Sd(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=Do(n,l);(c!=u||a.from<s.from+c.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},$B=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update($d(n,(t,r)=>{r.push({from:t.from,insert:n.facet(wd)})}),{userEvent:"input.indent"})),!0),EB=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update($d(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=lc(i,n.tabSize),o=0,a=Do(n,Math.max(0,s-Tl(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),OB=[{key:"Ctrl-b",run:Zb,shift:lx,preventDefault:!0},{key:"Ctrl-f",run:ex,shift:cx},{key:"Ctrl-p",run:rx,shift:hx},{key:"Ctrl-n",run:ix,shift:dx},{key:"Ctrl-a",run:X3,shift:aB},{key:"Ctrl-e",run:Y3,shift:lB},{key:"Ctrl-d",run:mx},{key:"Ctrl-h",run:dh},{key:"Ctrl-k",run:bx},{key:"Ctrl-Alt-h",run:yx},{key:"Ctrl-o",run:gB},{key:"Ctrl-t",run:mB},{key:"Ctrl-v",run:hh}],AB=[{key:"ArrowLeft",run:Zb,shift:lx,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:j3,shift:Z3,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:K3,shift:sB,preventDefault:!0},{key:"ArrowRight",run:ex,shift:cx,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:V3,shift:eB,preventDefault:!0},{mac:"Cmd-ArrowRight",run:G3,shift:oB,preventDefault:!0},{key:"ArrowUp",run:rx,shift:hx,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Nm,shift:Bm},{mac:"Ctrl-ArrowUp",run:Dm,shift:Im},{key:"ArrowDown",run:ix,shift:dx,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Mm,shift:Lm},{mac:"Ctrl-ArrowDown",run:hh,shift:Rm},{key:"PageUp",run:Dm,shift:Im},{key:"PageDown",run:hh,shift:Rm},{key:"Home",run:U3,shift:iB,preventDefault:!0},{key:"Mod-Home",run:Nm,shift:Bm},{key:"End",run:q3,shift:rB,preventDefault:!0},{key:"Mod-End",run:Mm,shift:Lm},{key:"Enter",run:kB},{key:"Mod-a",run:cB},{key:"Backspace",run:dh,shift:dh},{key:"Delete",run:mx},{key:"Mod-Backspace",mac:"Alt-Backspace",run:yx},{key:"Mod-Delete",mac:"Alt-Delete",run:dB},{mac:"Mod-Backspace",run:pB},{mac:"Mod-Delete",run:bx}].concat(OB.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),PB=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:z3,shift:tB},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:W3,shift:nB},{key:"Alt-ArrowUp",run:vB},{key:"Shift-Alt-ArrowUp",run:bB},{key:"Alt-ArrowDown",run:yB},{key:"Shift-Alt-ArrowDown",run:xB},{key:"Escape",run:hB},{key:"Mod-Enter",run:CB},{key:"Alt-l",mac:"Ctrl-l",run:uB},{key:"Mod-i",run:fB,preventDefault:!0},{key:"Mod-[",run:EB},{key:"Mod-]",run:$B},{key:"Mod-Alt-\\",run:_B},{key:"Shift-Mod-k",run:wB},{key:"Shift-Mod-\\",run:J3},{key:"Mod-/",run:x3},{key:"Alt-A",run:S3}].concat(AB);class kx{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=Xt(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(Cx(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Fm(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function TB(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=Fm(e)+Fm(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function DB(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:TB(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}class jm{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Rr(n){return n.selection.main.from}function Cx(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const IB=gr.define();function RB(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>a!=i&&t!=r&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(t,r)?{range:a}:{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:e},range:K.cursor(a.from+s+e.length)})),{userEvent:"input.complete"})}const Vm=new WeakMap;function NB(n){if(!Array.isArray(n))return n;let e=Vm.get(n);return e||Vm.set(n,e=DB(n)),e}const Ed=Ve.define(),Io=Ve.define();class MB{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=St(e,t),i=vn(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(St(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[-100];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let y=St(e,0),b=vn(y),w=b==e.length?0:-100;if(y!=t[0])if(y==r[0])w+=-200;else return null;return[w,0,b]}let a=e.indexOf(this.pattern);if(a==0)return[e.length==this.pattern.length?0:-100,0,this.pattern.length];let l=t.length,c=0;if(a<0){for(let y=0,b=Math.min(e.length,200);y<b&&c<l;){let w=St(e,y);(w==t[c]||w==r[c])&&(i[c++]=y),y+=vn(w)}if(c<l)return null}let u=0,f=0,h=!1,d=0,p=-1,g=-1,m=/[a-z]/.test(e),v=!0;for(let y=0,b=Math.min(e.length,200),w=0;y<b&&f<l;){let k=St(e,y);a<0&&(u<l&&k==t[u]&&(s[u++]=y),d<l&&(k==t[d]||k==r[d]?(d==0&&(p=y),g=y+1,d++):d=0));let x,C=k<255?k>=48&&k<=57||k>=97&&k<=122?2:k>=65&&k<=90?1:0:(x=h1(k))!=x.toLowerCase()?1:x!=x.toUpperCase()?2:0;(!y||C==1&&m||w==0&&C!=0)&&(t[f]==k||r[f]==k&&(h=!0)?o[f++]=y:o.length&&(v=!1)),w=C,y+=vn(k)}return f==l&&o[0]==0&&v?this.result(-100+(h?-200:0),o,e):d==l&&p==0?[-200-e.length+(g==e.length?0:-100),0,g]:a>-1?[-700-e.length,a,a+this.pattern.length]:d==l?[-200+-700-e.length,p,g]:f==l?this.result(-100+(h?-200:0)+-700+(v?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[e-r.length],s=1;for(let o of t){let a=o+(this.astral?vn(St(r,o)):1);s>1&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return i}}const Vt=oe.define({combine(n){return _s(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:BB,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>Hm(e(r),t(r)),optionClass:(e,t)=>r=>Hm(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})}});function Hm(n,e){return n?e?n+" "+e:n:e}function BB(n,e,t,r,i){let s=n.textDirection==Xe.RTL,o=s,a=!1,l="top",c,u,f=e.left-i.left,h=i.right-e.right,d=r.right-r.left,p=r.bottom-r.top;if(o&&f<Math.min(d,h)?o=!1:!o&&h<Math.min(d,f)&&(o=!0),d<=(o?f:h))c=Math.max(i.top,Math.min(t.top,i.bottom-p))-e.top,u=Math.min(400,o?f:h);else{a=!0,u=Math.min(400,(s?e.right:i.right-e.left)-30);let g=i.bottom-e.bottom;g>=p||g>e.top?c=t.bottom-e.top:(l="bottom",c=e.bottom-t.top)}return{style:`${l}: ${c}px; max-width: ${u}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":o?"left":"right")}}function LB(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=t,a=0;for(let l=1;l<i.length;){let c=i[l++],u=i[l++];c>a&&s.appendChild(document.createTextNode(o.slice(a,c)));let f=s.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(o.slice(c,u))),f.className="cm-completionMatchedText",a=u}return a<o.length&&s.appendChild(document.createTextNode(o.slice(a))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function zm(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class FB{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,a=e.state.facet(Vt);this.optionContent=LB(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=zm(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{for(let c=l.target,u;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(u=/-(\d+)$/.exec(c.id))&&+u[1]<s.length){this.applyCompletion(e,s[+u[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Vt).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Io.of(null)})}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}mount(){this.updateSel()}update(e){var t,r,i;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);this.updateTooltipClass(e.state),s!=o&&(this.updateSel(),((t=s.open)===null||t===void 0?void 0:t.disabled)!=((r=o.open)===null||r===void 0?void 0:r.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((i=s.open)===null||i===void 0)&&i.disabled)))}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=zm(t.options.length,t.selected,this.view.state.facet(Vt).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>wn(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&VB(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(Vt).positionInfo(this.view,t,i,r,s)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let h=typeof c=="string"?c:c.name;if(h!=s&&(o>r.from||r.from==0))if(s=h,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let d=i.appendChild(document.createElement("completion-section"));d.textContent=h}}const u=i.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let f=this.optionClass(a);f&&(u.className=f);for(let h of this.optionContent){let d=h(a,this.view.state,l);d&&u.appendChild(d)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function jB(n,e){return t=>new FB(t,n,e)}function VB(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?n.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(n.scrollTop+=r.bottom-t.bottom)}function Wm(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function HB(n,e){let t=[],r=null,i=l=>{t.push(l);let{section:c}=l.completion;if(c){r||(r=[]);let u=typeof c=="string"?c:c.name;r.some(f=>f.name==u)||r.push(typeof c=="string"?{name:u}:c)}};for(let l of n)if(l.hasResult())if(l.result.filter===!1){let c=l.result.getMatch;for(let u of l.result.options){let f=[1e9-t.length];if(c)for(let h of c(u))f.push(h);i(new jm(u,l.source,f,f[0]))}}else{let c=new MB(e.sliceDoc(l.from,l.to)),u;for(let f of l.result.options)(u=c.match(f.label))&&i(new jm(f,l.source,u,u[0]+(f.boost||0)))}if(r){let l=Object.create(null),c=0,u=(f,h)=>{var d,p;return((d=f.rank)!==null&&d!==void 0?d:1e9)-((p=h.rank)!==null&&p!==void 0?p:1e9)||(f.name<h.name?-1:1)};for(let f of r.sort(u))c-=1e5,l[f.name]=c;for(let f of t){let{section:h}=f.completion;h&&(f.score+=l[typeof h=="string"?h:h.name])}}let s=[],o=null,a=e.facet(Vt).compareCompletions;for(let l of t.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=l.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?s.push(l):Wm(l.completion)>Wm(o)&&(s[s.length-1]=l),o=l.completion}return s}class Hi{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Hi(this.options,qm(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s){let o=HB(e,t);if(!o.length)return i&&e.some(l=>l.state==1)?new Hi(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let a=t.facet(Vt).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new Hi(o,qm(r,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:jB(Ut,Ex),above:s.aboveCursor},i?i.timestamp:Date.now(),a,!1)}map(e){return new Hi(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Il{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new Il(qB,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Vt),s=(r.override||t.languageDataAt("autocomplete",Rr(t)).map(NB)).map(a=>(this.active.find(c=>c.source==a)||new Mt(a,this.active.some(c=>c.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!zB(s,this.active)?o=Hi.build(s,t,this.id,o,r):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Mt(a.source,0):a));for(let a of e.effects)a.is($x)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Il(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:WB}}function zB(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}const WB={"aria-autocomplete":"list"};function qm(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const qB=[];function ph(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Mt{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=ph(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Mt(i.source,0));for(let s of e.effects)if(s.is(Ed))i=new Mt(i.source,1,s.value?Rr(e.state):-1);else if(s.is(Io))i=new Mt(i.source,0);else if(s.is(_x))for(let o of s.value)o.source==i.source&&(i=o);return i}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new Mt(this.source,1)}handleChange(e){return e.changes.touchesRange(Rr(e.startState))?new Mt(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Mt(this.source,this.state,e.mapPos(this.explicitPos))}}class Gi extends Mt{constructor(e,t,r,i,s){super(e,2,t),this.result=r,this.from=i,this.to=s}hasResult(){return!0}handleUserEvent(e,t,r){var i;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Rr(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||t=="delete"&&Rr(e.startState)==this.from)return new Mt(this.source,t=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return UB(this.result.validFor,e.state,s,o)?new Gi(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new kx(e.state,a,l>=0)))?new Gi(this.source,l,c,c.from,(i=c.to)!==null&&i!==void 0?i:Rr(e.state)):new Mt(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Mt(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Gi(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function UB(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):Cx(n,!0).test(i)}const _x=Ve.define({map(n,e){return n.map(t=>t.map(e))}}),$x=Ve.define(),Ut=ln.define({create(){return Il.start()},update(n,e){return n.update(e)},provide:n=>[Ob.from(n,e=>e.tooltip),ce.contentAttributes.from(n,e=>e.attrs)]});function Ex(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(Ut).active.find(i=>i.source==e.source);return r instanceof Gi?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},RB(n.state,t,r.from,r.to)),{annotations:IB.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}function _a(n,e="option"){return t=>{let r=t.state.field(Ut,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(Vt).interactionDelay)return!1;let i=1,s;e=="page"&&(s=Ab(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:$x.of(a)}),!0}}const KB=n=>{let e=n.state.field(Ut,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(Vt).interactionDelay?!1:Ex(n,e.open.options[e.open.selected])},GB=n=>n.state.field(Ut,!1)?(n.dispatch({effects:Ed.of(!0)}),!0):!1,XB=n=>{let e=n.state.field(Ut,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Io.of(null)}),!0)};class YB{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Um=50,QB=50,JB=1e3,ZB=an.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(Ut).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Ut);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Ut)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!ph(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(t||i.updates.length+n.transactions.length>QB&&Date.now()-i.time>JB){for(let s of i.context.abortListeners)try{s()}catch(o){wn(this.view.state,o)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),Um):-1,this.composing!=0)for(let r of n.transactions)ph(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(Ut);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Rr(e),r=new kx(e,t,n.explicitPos==t),i=new YB(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Io.of(null)}),wn(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Um))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Vt);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let o=new Gi(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:Rr(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)o=o.update(a,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(Ut).active.find(o=>o.source==i.active.source);if(s&&s.state==1)if(i.done==null){let o=new Mt(i.active.source,0);for(let a of i.updates)o=o.update(a,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:_x.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Ut,!1);if(e&&e.tooltip&&this.view.state.facet(Vt).closeOnBlur){let t=e.open&&Ab(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&this.view.dispatch({effects:Io.of(null)})}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ed.of(!1)}),20),this.composing=0}}}),eL=ce.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"Â·Â·Â·"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'Æ'"}},".cm-completionIcon-class":{"&:after":{content:"'â'"}},".cm-completionIcon-interface":{"&:after":{content:"'â'"}},".cm-completionIcon-variable":{"&:after":{content:"'ð¥'"}},".cm-completionIcon-constant":{"&:after":{content:"'ð¶'"}},".cm-completionIcon-type":{"&:after":{content:"'ð¡'"}},".cm-completionIcon-enum":{"&:after":{content:"'âª'"}},".cm-completionIcon-property":{"&:after":{content:"'â¡'"}},".cm-completionIcon-keyword":{"&:after":{content:"'ðï¸'"}},".cm-completionIcon-namespace":{"&:after":{content:"'â¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ro={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ui=Ve.define({map(n,e){let t=e.mapPos(n,-1,Bt.TrackAfter);return t??void 0}}),Od=new class extends mi{};Od.startSide=1;Od.endSide=-1;const Ox=ln.define({create(){return Ne.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(n=Ne.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(ui)&&(n=n.update({add:[Od.range(t.value,t.value+1)]}));return n}});function tL(){return[rL,Ox]}const qu="()[]{}<>";function Ax(n){for(let e=0;e<qu.length;e+=2)if(qu.charCodeAt(e)==n)return qu.charAt(e+1);return h1(n<128?n:n+1)}function Px(n,e){return n.languageDataAt("closeBrackets",e)[0]||Ro}const nL=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),rL=ce.inputHandler.of((n,e,t,r)=>{if((nL?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&vn(St(r,0))==1||e!=i.from||t!=i.to)return!1;let s=oL(n.state,r);return s?(n.dispatch(s),!0):!1}),iL=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=Px(n,n.selection.main.head).brackets||Ro.brackets,i=null,s=n.changeByRange(o=>{if(o.empty){let a=aL(n.doc,o.head);for(let l of r)if(l==a&&yc(n.doc,o.head)==Ax(St(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:K.cursor(o.head-l.length)}}return{range:i=o}});return i||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},sL=[{key:"Backspace",run:iL}];function oL(n,e){let t=Px(n,n.selection.main.head),r=t.brackets||Ro.brackets;for(let i of r){let s=Ax(St(i,0));if(e==i)return s==i?uL(n,i,r.indexOf(i+i+i)>-1,t):lL(n,i,s,t.before||Ro.before);if(e==s&&Tx(n,n.selection.main.from))return cL(n,i,s)}return null}function Tx(n,e){let t=!1;return n.field(Ox).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function yc(n,e){let t=n.sliceString(e,e+2);return t.slice(0,vn(St(t,0)))}function aL(n,e){let t=n.sliceString(e-2,e);return vn(St(t,0))==t.length?t:t.slice(1)}function lL(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:ui.of(o.to+e.length),range:K.range(o.anchor+e.length,o.head+e.length)};let a=yc(n.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:ui.of(o.head+e.length),range:K.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function cL(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&yc(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:K.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function uL(n,e,t,r){let i=r.stringPrefixes||Ro.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:ui.of(a.to+e.length),range:K.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=yc(n.doc,l),u;if(c==e){if(Km(n,l))return{changes:{insert:e+e,from:l},effects:ui.of(l+e.length),range:K.cursor(l+e.length)};if(Tx(n,l)){let h=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:K.cursor(l+h.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(u=Gm(n,l-2*e.length,i))>-1&&Km(n,u))return{changes:{insert:e+e+e+e,from:l},effects:ui.of(l+e.length),range:K.cursor(l+e.length)};if(n.charCategorizer(l)(c)!=rn.Word&&Gm(n,l,i)>-1&&!fL(n,l,e,i))return{changes:{insert:e+e,from:l},effects:ui.of(l+e.length),range:K.cursor(l+e.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Km(n,e){let t=Xt(n).resolveInner(e+1);return t.parent&&t.from==e}function fL(n,e,t,r){let i=Xt(n).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>t.length+l;){if(n.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function Gm(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=rn.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=rn.Word)return s}return-1}function hL(n={}){return[Ut,Vt.of(n),ZB,dL,eL]}const Dx=[{key:"Ctrl-Space",run:GB},{key:"Escape",run:XB},{key:"ArrowDown",run:_a(!0)},{key:"ArrowUp",run:_a(!1)},{key:"PageDown",run:_a(!0,"page")},{key:"PageUp",run:_a(!1,"page")},{key:"Enter",run:KB}],dL=jo.highest(md.computeN([Vt],n=>n.facet(Vt).defaultKeymap?[Dx]:[]));class Rl{constructor(e,t,r,i,s,o,a,l,c,u=0,f){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new Rl(e,[],t,r,r,0,[],0,i?new Xm(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=e&65535,{parser:s}=this.p,o=s.dynamicPrecedence(i);if(o&&(this.score+=o),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let a=this.stack.length-(r-1)*3-(e&262144?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let u=a?this.stack[a-1]:0,f=this.bufferBase+this.buffer.length-u;if(i<s.minRepeatTerm||e&131072){let h=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,h,f+4,!0)}if(e&262144)this.state=this.stack[a];else{let h=this.stack[a-3];this.state=s.getGoto(h,i,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==r)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4);else{let s=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(t,i),t<=o.maxNode&&this.buffer.push(t,i,r,4)}}apply(e,t,r){e&65536?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Rl(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new pL(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if(!(r&65536))return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let o=t[s+1];i.some((a,l)=>l&1&&a==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=t&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let l=o&65535,c=this.stack.length-a*3;if(c>=0&&e.getGoto(this.stack[c],l,!1)>=0)return a<<19|65536|l}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Xm(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Xm{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Ym;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth",n[n.MinBigReduction=2e3]="MinBigReduction"})(Ym||(Ym={}));class pL{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Nl{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Nl(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Nl(this.stack,this.pos,this.index)}}function $a(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}t?t[i++]=s:t=new e(s)}return t}class Ua{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Qm=new Ua;class gL{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Qm,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Qm,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class Xi{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;mL(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}Xi.prototype.contextual=Xi.prototype.fallback=Xi.prototype.extend=!1;Xi.prototype.fallback=Xi.prototype.extend=!1;function mL(n,e,t,r,i,s){let o=0,a=1<<r,{dialect:l}=t.p.parser;e:for(;a&n[o];){let c=n[o+1];for(let d=o+3;d<c;d+=2)if((n[d+1]&a)>0){let p=n[d];if(l.allows(p)&&(e.token.value==-1||e.token.value==p||vL(p,e.token.value,i,s))){e.acceptToken(p);break}}let u=e.next,f=0,h=n[o+2];if(e.next<0&&h>f&&n[c+h*3-3]==65535&&n[c+h*3-3]==65535){o=n[c+h*3-1];continue e}for(;f<h;){let d=f+h>>1,p=c+d+(d<<1),g=n[p],m=n[p+1]||65536;if(u<g)h=d;else if(u>=m)f=d+1;else{o=n[p+2],e.advance();continue e}}break}}function Jm(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function vL(n,e,t,r){let i=Jm(t,r,e);return i<0||Jm(t,r,n)<i}const dn=typeof process<"u"&&process.env&&/\bparse\b/.test({}.LOG);let Uu=null;var Zm;(function(n){n[n.Margin=25]="Margin"})(Zm||(Zm={}));function ev(n,e,t){let r=n.cursor(ct.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class yL{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ev(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ev(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof rt){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(ve.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class bL{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Ua)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<s.length;c++){if(!(1<<c&o))continue;let u=s[c],f=this.tokens[c];if(!(r&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=o||f.context!=a)&&(this.updateCachedToken(f,u,e),f.mask=o,f.context=a),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let h=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!u.extend&&(r=f,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new Ua,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Ua,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(s,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=or(a,c+2);else{i==0&&a[c+1]==2&&(i=this.putAction(or(a,c+2),t,r,i));break}a[c]==t&&(i=this.putAction(or(a,c+1),t,r,i))}return i}}var tv;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo",n[n.MaxLeftAssociativeReductionCount=300]="MaxLeftAssociativeReductionCount",n[n.MaxStackCount=12]="MaxStackCount"})(tv||(tv={}));class xL{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new gL(t,i),this.tokens=new bL(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[Rl.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new yL(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&SL(i);if(o)return this.stackToTree(o);if(this.parser.strict)throw dn&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let c=r[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=dn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!c||(f.prop(ve.contextHash)||0)==u))return e.useNode(f,h),dn&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof rt)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof rt&&f.positions[0]==0)f=d;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),dn&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],f=l[c++],h=l[c++],d=c==l.length||!r,p=d?e:e.split();if(p.apply(u,f,h),dn&&console.log(o+this.stackID(p)+` (via ${u&65536?`reduce of ${s.getName(u&65535)}`:"shift"} for ${s.getName(f)} @ ${i}${p==e?"":", split"})`),d)return!0;p.pos>i?t.push(p):r.push(p)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return nv(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],c=t[(o<<1)+1],u=dn?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),dn&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let f=a.split(),h=u;for(let d=0;f.forceReduce()&&d<10&&(dn&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));d++)dn&&(h=this.stackID(f)+" -> ");for(let d of a.recoverByInsert(l))dn&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,r);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),dn&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),nv(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),rt.build({buffer:Nl.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Uu||(Uu=new WeakMap)).get(e);return t||Uu.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function nv(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class wL{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class Ml extends Rb{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function s(a,l,c){i[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=ve[l]);for(let c=1;c<a.length;){let u=a[c++];if(u>=0)s(u,l,a[c++]);else{let f=a[c+-u];for(let h=-u;h>0;h--)s(a[c++],l,f);c++}}}this.nodeSet=new vd(t.map((a,l)=>zt.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Tb;let o=$a(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(rv),this.states=$a(e.states,Uint32Array),this.data=$a(e.stateData),this.goto=$a(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Xi(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new xL(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let c=s+(o>>1);s<c;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=or(r,s+2)];else{if(r[s+1]==2)return or(r,s+2);break}if(o==t||o==0)return or(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=or(this.data,s+2);else break;i=t(or(this.data,s+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=or(this.data,r+2);else break;if(!(this.data[r+2]&1)){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(Ml.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=rv(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new wL(e,r,i)}static deserialize(e){return new Ml(e)}}function or(n,e){return n[e]|n[e+1]<<16}function SL(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function rv(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}const kL=Nb({String:z.string,Number:z.number,"True False":z.bool,PropertyName:z.propertyName,Null:z.null,",":z.separator,"[ ]":z.squareBracket,"{ }":z.brace}),CL=Ml.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"â  JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[kL],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),_L=Al.define({name:"json",parser:CL.configure({props:[Fb.add({Object:Am({except:/^\s*\}/}),Array:Am({except:/^\s*\]/})}),n3.add({"Object Array":r3})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function $L(){return new qM(_L)}const pe={name:"customized",dark:!1,background:"#ffffff",foreground:"currentColor",gutterBackground:"#e9e9e9",gutterForeground:"currentColor",selection:"#c9ddf7",cursor:"#657b83",dropdownBackground:"#ffffff",dropdownBorder:"#c5c5c5",activeLine:"#f0f0f0",matchingBracket:"#f0f0f0",keyword:"#859900",storage:"#354207",variable:"#657b83",parameter:"#657b83",function:"#268BD2",string:"#2AA198",constant:"#CB4B16",type:"#b58900",class:"#268BD2",number:"#D33682",comment:"#93A1A1",heading:"#268BD2",invalid:"currentColor",regexp:"#D30102"},EL=ce.theme({"&":{color:pe.foreground,backgroundColor:pe.background},"&.cm-editor.cm-focused":{outline:"none"},".cm-content":{caretColor:pe.cursor},".cm-cursor, .cm-dropCursor":{borderLeftColor:pe.cursor},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:pe.selection},".cm-panels":{backgroundColor:pe.dropdownBackground,color:pe.foreground},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:pe.dropdownBackground,outline:`1px solid ${pe.dropdownBorder}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:pe.selection},".cm-activeLine":{backgroundColor:pe.activeLine},".cm-selectionMatch":{backgroundColor:pe.selection},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:pe.matchingBracket,outline:"none"},".cm-gutters":{backgroundColor:pe.gutterBackground,color:pe.gutterForeground,border:"none"},".cm-activeLineGutter":{backgroundColor:pe.activeLine},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:pe.foreground},".cm-tooltip":{border:`1px solid ${pe.dropdownBorder}`,backgroundColor:pe.dropdownBackground,color:pe.foreground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:pe.foreground,borderBottomColor:pe.foreground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{background:pe.selection,color:pe.foreground}}},{dark:pe.dark}),OL=zo.define([{tag:z.keyword,color:pe.keyword},{tag:[z.name,z.deleted,z.character,z.macroName],color:pe.variable},{tag:[z.propertyName],color:pe.function},{tag:[z.processingInstruction,z.string,z.inserted,z.special(z.string)],color:pe.string},{tag:[z.function(z.variableName),z.labelName],color:pe.function},{tag:[z.color,z.constant(z.name),z.standard(z.name)],color:pe.constant},{tag:[z.definition(z.name),z.separator],color:pe.variable},{tag:[z.className],color:pe.class},{tag:[z.number,z.changed,z.annotation,z.modifier,z.self,z.namespace],color:pe.number},{tag:[z.typeName],color:pe.type,fontStyle:pe.type},{tag:[z.operator,z.operatorKeyword],color:pe.keyword},{tag:[z.url,z.escape,z.regexp,z.link],color:pe.regexp},{tag:[z.meta,z.comment],color:pe.comment},{tag:z.strong,fontWeight:"bold"},{tag:z.emphasis,fontStyle:"italic"},{tag:z.link,textDecoration:"underline"},{tag:z.heading,fontWeight:"bold",color:pe.heading},{tag:[z.atom,z.bool,z.special(z.variableName)],color:pe.variable},{tag:z.invalid,color:pe.invalid},{tag:z.strikethrough,textDecoration:"line-through"}]),AL=[EL,Hb(OL)],PL=we('<label class="text-sm flex-none">'),TL=we('<div class="absolute left-6 top-[6px] text-grey-400 text-xs z-10 pointer-events-none">'),DL=we('<div><div class="relative flex-none rounded border border-grey-300 focus-within:border-primary-light transition-colors font-mono"><div>'),Ad=n=>{const e=_n(n,{label:"",placeholder:"",disabled:!1,class:""});let t,r;const[i,s]=tt(e.value??""),o=new Or,a=new Or,l=new Or,c=new Or;return wi(()=>{const u=Ce.create({doc:i(),extensions:[AL,$L(),EM(),fM(),P3(),eM(),sM(),Ce.allowMultipleSelections.of(!0),t3(),Hb(o3,{fallback:!0}),d3(),tL(),hL(),md.of([...sL,...PB,...F3,...Dx]),o.of([]),a.of([]),l.of([]),c.of([])]});r=new ce({state:u,parent:t})}),Ot([()=>e.height],()=>{let u={};e.height&&(u={"&":{height:e.height},".cm-scroller":{overflow:"auto"}});const f=ce.theme(u);r.dispatch({effects:o.reconfigure(f)})}),Ot([()=>e.disabled],()=>{r.dispatch({effects:a.reconfigure([Ce.readOnly.of(e.disabled),ce.editable.of(!e.disabled)])})}),Ot([()=>e.onInput],()=>{r.dispatch({effects:l.reconfigure(ce.updateListener.of(({docChanged:u,state:f})=>{if(u&&e.onInput){const h=f.doc.toString();s(h),e.onInput(h)}}))})}),Ot([()=>e.onChange],()=>{r.dispatch({effects:c.reconfigure(ce.updateListener.of(({focusChanged:u,view:f,state:h})=>{if(u&&e.onChange&&!f.hasFocus){const p=h.doc.toString();e.onChange(p)}}))})}),Ot([()=>e.value],()=>{if(e.value===i())return;const u=r.state.update({changes:{from:0,to:r.state.doc.length,insert:e.value}}),f=r.state.update(u);r.update([f])}),(()=>{const u=DL(),f=u.firstChild,h=f.firstChild;Q(u,G(Pt,{get when(){return!!e.label},get children(){const p=PL();return Q(p,()=>e.label),p}}),f),Q(f,G(Pt,{get when(){return!i()},get children(){const p=TL();return Q(p,()=>e.placeholder),p}}),h);const d=t;return typeof d=="function"?Ch(d,h):t=h,ut(p=>{const g=`flex flex-col ${e.class}`,m={"bg-grey-200 opacity-80":e.disabled};return g!==p._v$&&Si(u,p._v$=g),p._v$2=Nv(f,m,p._v$2),p},{_v$:void 0,_v$2:void 0}),u})()},IL="_root_1qcp8_1",RL="_textarea_1qcp8_21",Ks={root:IL,"delete-button":"_delete-button_1qcp8_3","role-button":"_role-button_1qcp8_11",textarea:RL},NL=we('<div><div class="flex gap-2 items-center"><div class="flex-none w-32"></div><div class="flex-none"></div><div class="flex-none"></div></div><div class="flex-1 flex flex-col gap-2 py-2"></div><div class="absolute top-2 right-2">'),ML=n=>{const[,{messages:e}]=Mr(qr);function t(){return!!(n.message.role==="user"&&n.message.functionName||n.message.role==="assistant"&&(n.message.functionName||n.message.functionParameters))}function r(){let l="user";n.message.role==="user"?l="assistant":n.message.role==="assistant"?l="function":n.message.role==="function"&&(l="user"),e.setRole(n.message.id,l),e.setUseFunction(n.message.id,t())}function i(){return n.message.role==="user"?"Enter a message from the user.":n.message.role==="assistant"?"Enter a message from the assistant.":""}function s(){return n.message.role==="user"?"function_to_force_call":n.message.role==="assistant"?"called_function":n.message.role==="function"?"function_name":""}function o(){return n.message.role==="assistant"?"Function arguments in JSON format":n.message.role==="function"?"Output from the function":""}const a=_e(()=>{const l={content:!1,functionName:!1,functionParameters:!1};return n.message.role==="user"?(l.content=!0,n.message.useFunction&&(l.functionName=!0)):n.message.role==="assistant"?n.message.useFunction?(l.functionName=!0,l.functionParameters=!0):l.content=!0:n.message.role==="function"&&(l.functionName=!0,l.functionParameters=!0),l});return(()=>{const l=NL(),c=l.firstChild,u=c.firstChild,f=u.nextSibling,h=f.nextSibling,d=c.nextSibling,p=d.nextSibling;return Q(u,G(At,{get"aria-label"(){return`Message role: ${jp[n.message.role]} -- click to change`},variation:"transparent",get class(){return Ks["role-button"]},onClick:r,get children(){return G(sd,{"aria-hidden":!0,get children(){return jp[n.message.role]}})}})),Q(f,G(At,{"aria-label":"toggle function",get variation(){return n.message.useFunction?"primary":"secondary"},onClick:()=>{e.setUseFunction(n.message.id,!n.message.useFunction)},get class(){return`square-button ${n.message.useFunction?"opacity-100":"opacity-50"} ${n.message.role==="function"?"invisible":"visible"}`},get children(){return G(oR,{size:16})}})),Q(h,G(Pt,{keyed:!0,get when(){return a().functionName},get children(){return G(gl,{get placeholder(){return s()},get value(){return n.message.functionName},onChange:g=>e.setFunctionName(n.message.id,g.currentTarget.value)})}})),Q(d,G(Pt,{keyed:!0,get when(){return a().content},get children(){return G(o1,{get placeholder(){return i()},autoGrow:!0,get value(){return n.message.content},onChange:g=>e.setContent(n.message.id,g.currentTarget.value),get class(){return`${Ks.textarea}`},inputClass:"py-1"})}}),null),Q(d,G(Pt,{keyed:!0,get when(){return a().functionParameters},get children(){return G(Ad,{get placeholder(){return o()},get value(){return n.message.functionParameters},onInput:g=>e.setFunctionParameters(n.message.id,g),get class(){return`mt-1 flex-1 ${Ks["code-input"]}`}})}}),null),Q(p,G(At,{"aria-label":"delete message",onClick:()=>e.delete(n.message.id),variation:"transparent",get class(){return`${Ks["delete-button"]} square-button hocus-visible:bg-grey-200 hocus-visible:text-danger px-[0.5rem] py-[0.2rem]`},get children(){return G(nd,{})}})),ut(()=>Si(l,`${Ks.root} relative w-full flex flex-col gap-2 p-4 hocus-within:bg-grey-100`)),l})()},BL=we('<div class="flex-none my-4"><p class="text-danger-light">'),LL=we('<div class="w-full h-full flex flex-col"><div class="flex-1 flex flex-col overflow-auto pb-6"><div class="mt-4 ml-4"></div></div><div class="flex-none">'),FL=()=>{const[n,{messages:e,submit:t}]=Mr(qr);function r(){let s="user";n.messages.length&&n.messages[n.messages.length-1].role!=="assistant"&&(s="assistant"),e.create({...ir(),role:s})}const i=_e(()=>Zi()?n.error:"Please enter your API key.");return(()=>{const s=LL(),o=s.firstChild,a=o.firstChild,l=o.nextSibling;return Q(o,G(Rv,{get each(){return n.messages},children:c=>[G(ML,{message:c}),G(sR,{})]}),a),Q(a,G(At,{"aria-label":"new message",variation:"secondary",onClick:r,class:"square-button hocus-visible:text-primary",get children(){return G(_h,{fill:"currentColor",size:14})}})),Q(s,G(Qy,{enterActiveClass:"transition-opacity ease-in-out duration-200",exitActiveClass:"transition-opacity ease-in-out duration-200",enterClass:"opacity-0",enterToClass:"opacity-1",exitToClass:"opacity-0",exitClass:"opacity-0",get children(){return G(Pt,{get when(){return i()},get children(){const c=BL(),u=c.firstChild;return Q(u,i),c}})}}),l),Q(l,G(At,{onClick:t,variation:"primary",get disabled(){return!Zi()||n.generating},children:"Submit"})),s})()};var gh={exports:{}},Ix={},Sn={},us={},Wo={},ye={},No={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.regexpCode=n.getEsmExportName=n.getProperty=n.safeStringify=n.stringify=n.strConcat=n.addCodeArg=n.str=n._=n.nil=n._Code=n.Name=n.IDENTIFIER=n._CodeOrName=void 0;class e{}n._CodeOrName=e,n.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class t extends e{constructor(y){if(super(),!n.IDENTIFIER.test(y))throw new Error("CodeGen: name must be a valid identifier");this.str=y}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}n.Name=t;class r extends e{constructor(y){super(),this._items=typeof y=="string"?[y]:y}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const y=this._items[0];return y===""||y==='""'}get str(){var y;return(y=this._str)!==null&&y!==void 0?y:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var y;return(y=this._names)!==null&&y!==void 0?y:this._names=this._items.reduce((b,w)=>(w instanceof t&&(b[w.str]=(b[w.str]||0)+1),b),{})}}n._Code=r,n.nil=new r("");function i(v,...y){const b=[v[0]];let w=0;for(;w<y.length;)a(b,y[w]),b.push(v[++w]);return new r(b)}n._=i;const s=new r("+");function o(v,...y){const b=[d(v[0])];let w=0;for(;w<y.length;)b.push(s),a(b,y[w]),b.push(s,d(v[++w]));return l(b),new r(b)}n.str=o;function a(v,y){y instanceof r?v.push(...y._items):y instanceof t?v.push(y):v.push(f(y))}n.addCodeArg=a;function l(v){let y=1;for(;y<v.length-1;){if(v[y]===s){const b=c(v[y-1],v[y+1]);if(b!==void 0){v.splice(y-1,3,b);continue}v[y++]="+"}y++}}function c(v,y){if(y==='""')return v;if(v==='""')return y;if(typeof v=="string")return y instanceof t||v[v.length-1]!=='"'?void 0:typeof y!="string"?`${v.slice(0,-1)}${y}"`:y[0]==='"'?v.slice(0,-1)+y.slice(1):void 0;if(typeof y=="string"&&y[0]==='"'&&!(v instanceof t))return`"${v}${y.slice(1)}`}function u(v,y){return y.emptyStr()?v:v.emptyStr()?y:o`${v}${y}`}n.strConcat=u;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:d(Array.isArray(v)?v.join(","):v)}function h(v){return new r(d(v))}n.stringify=h;function d(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}n.safeStringify=d;function p(v){return typeof v=="string"&&n.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}n.getProperty=p;function g(v){if(typeof v=="string"&&n.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}n.getEsmExportName=g;function m(v){return new r(v.toString())}n.regexpCode=m})(No);var mh={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueScope=n.ValueScopeName=n.Scope=n.varKinds=n.UsedValueState=void 0;const e=No;class t extends Error{constructor(c){super(`CodeGen: "code" for ${c} not defined`),this.value=c.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r=n.UsedValueState||(n.UsedValueState={})),n.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:c,parent:u}={}){this._names={},this._prefixes=c,this._parent=u}toName(c){return c instanceof e.Name?c:this.name(c)}name(c){return new e.Name(this._newName(c))}_newName(c){const u=this._names[c]||this._nameGroup(c);return`${c}${u.index++}`}_nameGroup(c){var u,f;if(!((f=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||f===void 0)&&f.has(c)||this._prefixes&&!this._prefixes.has(c))throw new Error(`CodeGen: prefix "${c}" is not allowed in this scope`);return this._names[c]={prefix:c,index:0}}}n.Scope=i;class s extends e.Name{constructor(c,u){super(u),this.prefix=c}setValue(c,{property:u,itemIndex:f}){this.value=c,this.scopePath=(0,e._)`.${new e.Name(u)}[${f}]`}}n.ValueScopeName=s;const o=(0,e._)`\n`;class a extends i{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?o:e.nil}}get(){return this._scope}name(c){return new s(c,this._newName(c))}value(c,u){var f;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(c),{prefix:d}=h,p=(f=u.key)!==null&&f!==void 0?f:u.ref;let g=this._values[d];if(g){const y=g.get(p);if(y)return y}else g=this._values[d]=new Map;g.set(p,h);const m=this._scope[d]||(this._scope[d]=[]),v=m.length;return m[v]=u.ref,h.setValue(u,{property:d,itemIndex:v}),h}getValue(c,u){const f=this._values[c];if(f)return f.get(u)}scopeRefs(c,u=this._values){return this._reduceValues(u,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,e._)`${c}${f.scopePath}`})}scopeCode(c=this._values,u,f){return this._reduceValues(c,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},u,f)}_reduceValues(c,u,f={},h){let d=e.nil;for(const p in c){const g=c[p];if(!g)continue;const m=f[p]=f[p]||new Map;g.forEach(v=>{if(m.has(v))return;m.set(v,r.Started);let y=u(v);if(y){const b=this.opts.es5?n.varKinds.var:n.varKinds.const;d=(0,e._)`${d}${b} ${v} = ${y};${this.opts._n}`}else if(y=h?.(v))d=(0,e._)`${d}${y}${this.opts._n}`;else throw new t(v);m.set(v,r.Completed)})}return d}}n.ValueScope=a})(mh);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.or=n.and=n.not=n.CodeGen=n.operators=n.varKinds=n.ValueScopeName=n.ValueScope=n.Scope=n.Name=n.regexpCode=n.stringify=n.getProperty=n.nil=n.strConcat=n.str=n._=void 0;const e=No,t=mh;var r=No;Object.defineProperty(n,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(n,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(n,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(n,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return r.Name}});var i=mh;Object.defineProperty(n,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(n,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(n,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(n,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),n.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(S,D){return this}}class o extends s{constructor(S,D,L){super(),this.varKind=S,this.name=D,this.rhs=L}render({es5:S,_n:D}){const L=S?t.varKinds.var:this.varKind,X=this.rhs===void 0?"":` = ${this.rhs}`;return`${L} ${this.name}${X};`+D}optimizeNames(S,D){if(S[this.name.str])return this.rhs&&(this.rhs=V(this.rhs,S,D)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(S,D,L){super(),this.lhs=S,this.rhs=D,this.sideEffects=L}render({_n:S}){return`${this.lhs} = ${this.rhs};`+S}optimizeNames(S,D){if(!(this.lhs instanceof e.Name&&!S[this.lhs.str]&&!this.sideEffects))return this.rhs=V(this.rhs,S,D),this}get names(){const S=this.lhs instanceof e.Name?{}:{...this.lhs.names};return M(S,this.rhs)}}class l extends a{constructor(S,D,L,X){super(S,L,X),this.op=D}render({_n:S}){return`${this.lhs} ${this.op}= ${this.rhs};`+S}}class c extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`${this.label}:`+S}}class u extends s{constructor(S){super(),this.label=S,this.names={}}render({_n:S}){return`break${this.label?` ${this.label}`:""};`+S}}class f extends s{constructor(S){super(),this.error=S}render({_n:S}){return`throw ${this.error};`+S}get names(){return this.error.names}}class h extends s{constructor(S){super(),this.code=S}render({_n:S}){return`${this.code};`+S}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(S,D){return this.code=V(this.code,S,D),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class d extends s{constructor(S=[]){super(),this.nodes=S}render(S){return this.nodes.reduce((D,L)=>D+L.render(S),"")}optimizeNodes(){const{nodes:S}=this;let D=S.length;for(;D--;){const L=S[D].optimizeNodes();Array.isArray(L)?S.splice(D,1,...L):L?S[D]=L:S.splice(D,1)}return S.length>0?this:void 0}optimizeNames(S,D){const{nodes:L}=this;let X=L.length;for(;X--;){const U=L[X];U.optimizeNames(S,D)||(W(S,U.names),L.splice(X,1))}return L.length>0?this:void 0}get names(){return this.nodes.reduce((S,D)=>O(S,D.names),{})}}class p extends d{render(S){return"{"+S._n+super.render(S)+"}"+S._n}}class g extends d{}class m extends p{}m.kind="else";class v extends p{constructor(S,D){super(D),this.condition=S}render(S){let D=`if(${this.condition})`+super.render(S);return this.else&&(D+="else "+this.else.render(S)),D}optimizeNodes(){super.optimizeNodes();const S=this.condition;if(S===!0)return this.nodes;let D=this.else;if(D){const L=D.optimizeNodes();D=this.else=Array.isArray(L)?new m(L):L}if(D)return S===!1?D instanceof v?D:D.nodes:this.nodes.length?this:new v(q(S),D instanceof v?[D]:D.nodes);if(!(S===!1||!this.nodes.length))return this}optimizeNames(S,D){var L;if(this.else=(L=this.else)===null||L===void 0?void 0:L.optimizeNames(S,D),!!(super.optimizeNames(S,D)||this.else))return this.condition=V(this.condition,S,D),this}get names(){const S=super.names;return M(S,this.condition),this.else&&O(S,this.else.names),S}}v.kind="if";class y extends p{}y.kind="for";class b extends y{constructor(S){super(),this.iteration=S}render(S){return`for(${this.iteration})`+super.render(S)}optimizeNames(S,D){if(super.optimizeNames(S,D))return this.iteration=V(this.iteration,S,D),this}get names(){return O(super.names,this.iteration.names)}}class w extends y{constructor(S,D,L,X){super(),this.varKind=S,this.name=D,this.from=L,this.to=X}render(S){const D=S.es5?t.varKinds.var:this.varKind,{name:L,from:X,to:U}=this;return`for(${D} ${L}=${X}; ${L}<${U}; ${L}++)`+super.render(S)}get names(){const S=M(super.names,this.from);return M(S,this.to)}}class k extends y{constructor(S,D,L,X){super(),this.loop=S,this.varKind=D,this.name=L,this.iterable=X}render(S){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(S)}optimizeNames(S,D){if(super.optimizeNames(S,D))return this.iterable=V(this.iterable,S,D),this}get names(){return O(super.names,this.iterable.names)}}class x extends p{constructor(S,D,L){super(),this.name=S,this.args=D,this.async=L}render(S){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(S)}}x.kind="func";class C extends d{render(S){return"return "+super.render(S)}}C.kind="return";class P extends p{render(S){let D="try"+super.render(S);return this.catch&&(D+=this.catch.render(S)),this.finally&&(D+=this.finally.render(S)),D}optimizeNodes(){var S,D;return super.optimizeNodes(),(S=this.catch)===null||S===void 0||S.optimizeNodes(),(D=this.finally)===null||D===void 0||D.optimizeNodes(),this}optimizeNames(S,D){var L,X;return super.optimizeNames(S,D),(L=this.catch)===null||L===void 0||L.optimizeNames(S,D),(X=this.finally)===null||X===void 0||X.optimizeNames(S,D),this}get names(){const S=super.names;return this.catch&&O(S,this.catch.names),this.finally&&O(S,this.finally.names),S}}class I extends p{constructor(S){super(),this.error=S}render(S){return`catch(${this.error})`+super.render(S)}}I.kind="catch";class $ extends p{render(S){return"finally"+super.render(S)}}$.kind="finally";class _{constructor(S,D={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...D,_n:D.lines?`
`:""},this._extScope=S,this._scope=new t.Scope({parent:S}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(S){return this._scope.name(S)}scopeName(S){return this._extScope.name(S)}scopeValue(S,D){const L=this._extScope.value(S,D);return(this._values[L.prefix]||(this._values[L.prefix]=new Set)).add(L),L}getScopeValue(S,D){return this._extScope.getValue(S,D)}scopeRefs(S){return this._extScope.scopeRefs(S,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(S,D,L,X){const U=this._scope.toName(D);return L!==void 0&&X&&(this._constants[U.str]=L),this._leafNode(new o(S,U,L)),U}const(S,D,L){return this._def(t.varKinds.const,S,D,L)}let(S,D,L){return this._def(t.varKinds.let,S,D,L)}var(S,D,L){return this._def(t.varKinds.var,S,D,L)}assign(S,D,L){return this._leafNode(new a(S,D,L))}add(S,D){return this._leafNode(new l(S,n.operators.ADD,D))}code(S){return typeof S=="function"?S():S!==e.nil&&this._leafNode(new h(S)),this}object(...S){const D=["{"];for(const[L,X]of S)D.length>1&&D.push(","),D.push(L),(L!==X||this.opts.es5)&&(D.push(":"),(0,e.addCodeArg)(D,X));return D.push("}"),new e._Code(D)}if(S,D,L){if(this._blockNode(new v(S)),D&&L)this.code(D).else().code(L).endIf();else if(D)this.code(D).endIf();else if(L)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(S){return this._elseNode(new v(S))}else(){return this._elseNode(new m)}endIf(){return this._endBlockNode(v,m)}_for(S,D){return this._blockNode(S),D&&this.code(D).endFor(),this}for(S,D){return this._for(new b(S),D)}forRange(S,D,L,X,U=this.opts.es5?t.varKinds.var:t.varKinds.let){const he=this._scope.toName(S);return this._for(new w(U,he,D,L),()=>X(he))}forOf(S,D,L,X=t.varKinds.const){const U=this._scope.toName(S);if(this.opts.es5){const he=D instanceof e.Name?D:this.var("_arr",D);return this.forRange("_i",0,(0,e._)`${he}.length`,de=>{this.var(U,(0,e._)`${he}[${de}]`),L(U)})}return this._for(new k("of",X,U,D),()=>L(U))}forIn(S,D,L,X=this.opts.es5?t.varKinds.var:t.varKinds.const){if(this.opts.ownProperties)return this.forOf(S,(0,e._)`Object.keys(${D})`,L);const U=this._scope.toName(S);return this._for(new k("in",X,U,D),()=>L(U))}endFor(){return this._endBlockNode(y)}label(S){return this._leafNode(new c(S))}break(S){return this._leafNode(new u(S))}return(S){const D=new C;if(this._blockNode(D),this.code(S),D.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(S,D,L){if(!D&&!L)throw new Error('CodeGen: "try" without "catch" and "finally"');const X=new P;if(this._blockNode(X),this.code(S),D){const U=this.name("e");this._currNode=X.catch=new I(U),D(U)}return L&&(this._currNode=X.finally=new $,this.code(L)),this._endBlockNode(I,$)}throw(S){return this._leafNode(new f(S))}block(S,D){return this._blockStarts.push(this._nodes.length),S&&this.code(S).endBlock(D),this}endBlock(S){const D=this._blockStarts.pop();if(D===void 0)throw new Error("CodeGen: not in self-balancing block");const L=this._nodes.length-D;if(L<0||S!==void 0&&L!==S)throw new Error(`CodeGen: wrong number of nodes: ${L} vs ${S} expected`);return this._nodes.length=D,this}func(S,D=e.nil,L,X){return this._blockNode(new x(S,D,L)),X&&this.code(X).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(S=1){for(;S-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(S){return this._currNode.nodes.push(S),this}_blockNode(S){this._currNode.nodes.push(S),this._nodes.push(S)}_endBlockNode(S,D){const L=this._currNode;if(L instanceof S||D&&L instanceof D)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${D?`${S.kind}/${D.kind}`:S.kind}"`)}_elseNode(S){const D=this._currNode;if(!(D instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=D.else=S,this}get _root(){return this._nodes[0]}get _currNode(){const S=this._nodes;return S[S.length-1]}set _currNode(S){const D=this._nodes;D[D.length-1]=S}}n.CodeGen=_;function O(T,S){for(const D in S)T[D]=(T[D]||0)+(S[D]||0);return T}function M(T,S){return S instanceof e._CodeOrName?O(T,S.names):T}function V(T,S,D){if(T instanceof e.Name)return L(T);if(!X(T))return T;return new e._Code(T._items.reduce((U,he)=>(he instanceof e.Name&&(he=L(he)),he instanceof e._Code?U.push(...he._items):U.push(he),U),[]));function L(U){const he=D[U.str];return he===void 0||S[U.str]!==1?U:(delete S[U.str],he)}function X(U){return U instanceof e._Code&&U._items.some(he=>he instanceof e.Name&&S[he.str]===1&&D[he.str]!==void 0)}}function W(T,S){for(const D in S)T[D]=(T[D]||0)-(S[D]||0)}function q(T){return typeof T=="boolean"||typeof T=="number"||T===null?!T:(0,e._)`!${R(T)}`}n.not=q;const te=E(n.operators.AND);function ee(...T){return T.reduce(te)}n.and=ee;const J=E(n.operators.OR);function H(...T){return T.reduce(J)}n.or=H;function E(T){return(S,D)=>S===e.nil?D:D===e.nil?S:(0,e._)`${R(S)} ${T} ${R(D)}`}function R(T){return T instanceof e.Name?T:(0,e._)`(${T})`}})(ye);var $e={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkStrictMode=n.getErrorPath=n.Type=n.useFunc=n.setEvaluated=n.evaluatedPropsToName=n.mergeEvaluated=n.eachItem=n.unescapeJsonPointer=n.escapeJsonPointer=n.escapeFragment=n.unescapeFragment=n.schemaRefOrVal=n.schemaHasRulesButRef=n.schemaHasRules=n.checkUnknownRules=n.alwaysValidSchema=n.toHash=void 0;const e=ye,t=No;function r(x){const C={};for(const P of x)C[P]=!0;return C}n.toHash=r;function i(x,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(s(x,C),!o(C,x.self.RULES.all))}n.alwaysValidSchema=i;function s(x,C=x.schema){const{opts:P,self:I}=x;if(!P.strictSchema||typeof C=="boolean")return;const $=I.RULES.keywords;for(const _ in C)$[_]||k(x,`unknown keyword: "${_}"`)}n.checkUnknownRules=s;function o(x,C){if(typeof x=="boolean")return!x;for(const P in x)if(C[P])return!0;return!1}n.schemaHasRules=o;function a(x,C){if(typeof x=="boolean")return!x;for(const P in x)if(P!=="$ref"&&C.all[P])return!0;return!1}n.schemaHasRulesButRef=a;function l({topSchemaRef:x,schemaPath:C},P,I,$){if(!$){if(typeof P=="number"||typeof P=="boolean")return P;if(typeof P=="string")return(0,e._)`${P}`}return(0,e._)`${x}${C}${(0,e.getProperty)(I)}`}n.schemaRefOrVal=l;function c(x){return h(decodeURIComponent(x))}n.unescapeFragment=c;function u(x){return encodeURIComponent(f(x))}n.escapeFragment=u;function f(x){return typeof x=="number"?`${x}`:x.replace(/~/g,"~0").replace(/\//g,"~1")}n.escapeJsonPointer=f;function h(x){return x.replace(/~1/g,"/").replace(/~0/g,"~")}n.unescapeJsonPointer=h;function d(x,C){if(Array.isArray(x))for(const P of x)C(P);else C(x)}n.eachItem=d;function p({mergeNames:x,mergeToName:C,mergeValues:P,resultToName:I}){return($,_,O,M)=>{const V=O===void 0?_:O instanceof e.Name?(_ instanceof e.Name?x($,_,O):C($,_,O),O):_ instanceof e.Name?(C($,O,_),_):P(_,O);return M===e.Name&&!(V instanceof e.Name)?I($,V):V}}n.mergeEvaluated={props:p({mergeNames:(x,C,P)=>x.if((0,e._)`${P} !== true && ${C} !== undefined`,()=>{x.if((0,e._)`${C} === true`,()=>x.assign(P,!0),()=>x.assign(P,(0,e._)`${P} || {}`).code((0,e._)`Object.assign(${P}, ${C})`))}),mergeToName:(x,C,P)=>x.if((0,e._)`${P} !== true`,()=>{C===!0?x.assign(P,!0):(x.assign(P,(0,e._)`${P} || {}`),m(x,P,C))}),mergeValues:(x,C)=>x===!0?!0:{...x,...C},resultToName:g}),items:p({mergeNames:(x,C,P)=>x.if((0,e._)`${P} !== true && ${C} !== undefined`,()=>x.assign(P,(0,e._)`${C} === true ? true : ${P} > ${C} ? ${P} : ${C}`)),mergeToName:(x,C,P)=>x.if((0,e._)`${P} !== true`,()=>x.assign(P,C===!0?!0:(0,e._)`${P} > ${C} ? ${P} : ${C}`)),mergeValues:(x,C)=>x===!0?!0:Math.max(x,C),resultToName:(x,C)=>x.var("items",C)})};function g(x,C){if(C===!0)return x.var("props",!0);const P=x.var("props",(0,e._)`{}`);return C!==void 0&&m(x,P,C),P}n.evaluatedPropsToName=g;function m(x,C,P){Object.keys(P).forEach(I=>x.assign((0,e._)`${C}${(0,e.getProperty)(I)}`,!0))}n.setEvaluated=m;const v={};function y(x,C){return x.scopeValue("func",{ref:C,code:v[C.code]||(v[C.code]=new t._Code(C.code))})}n.useFunc=y;var b;(function(x){x[x.Num=0]="Num",x[x.Str=1]="Str"})(b=n.Type||(n.Type={}));function w(x,C,P){if(x instanceof e.Name){const I=C===b.Num;return P?I?(0,e._)`"[" + ${x} + "]"`:(0,e._)`"['" + ${x} + "']"`:I?(0,e._)`"/" + ${x}`:(0,e._)`"/" + ${x}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return P?(0,e.getProperty)(x).toString():"/"+f(x)}n.getErrorPath=w;function k(x,C,P=x.opts.strictSchema){if(P){if(C=`strict mode: ${C}`,P===!0)throw new Error(C);x.self.logger.warn(C)}}n.checkStrictMode=k})($e);var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0});const bt=ye,jL={data:new bt.Name("data"),valCxt:new bt.Name("valCxt"),instancePath:new bt.Name("instancePath"),parentData:new bt.Name("parentData"),parentDataProperty:new bt.Name("parentDataProperty"),rootData:new bt.Name("rootData"),dynamicAnchors:new bt.Name("dynamicAnchors"),vErrors:new bt.Name("vErrors"),errors:new bt.Name("errors"),this:new bt.Name("this"),self:new bt.Name("self"),scope:new bt.Name("scope"),json:new bt.Name("json"),jsonPos:new bt.Name("jsonPos"),jsonLen:new bt.Name("jsonLen"),jsonPart:new bt.Name("jsonPart")};Zn.default=jL;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendErrors=n.resetErrorsCount=n.reportExtraError=n.reportError=n.keyword$DataError=n.keywordError=void 0;const e=ye,t=$e,r=Zn;n.keywordError={message:({keyword:m})=>(0,e.str)`must pass "${m}" keyword validation`},n.keyword$DataError={message:({keyword:m,schemaType:v})=>v?(0,e.str)`"${m}" keyword must be ${v} ($data)`:(0,e.str)`"${m}" keyword is invalid ($data)`};function i(m,v=n.keywordError,y,b){const{it:w}=m,{gen:k,compositeRule:x,allErrors:C}=w,P=f(m,v,y);b??(x||C)?l(k,P):c(w,(0,e._)`[${P}]`)}n.reportError=i;function s(m,v=n.keywordError,y){const{it:b}=m,{gen:w,compositeRule:k,allErrors:x}=b,C=f(m,v,y);l(w,C),k||x||c(b,r.default.vErrors)}n.reportExtraError=s;function o(m,v){m.assign(r.default.errors,v),m.if((0,e._)`${r.default.vErrors} !== null`,()=>m.if(v,()=>m.assign((0,e._)`${r.default.vErrors}.length`,v),()=>m.assign(r.default.vErrors,null)))}n.resetErrorsCount=o;function a({gen:m,keyword:v,schemaValue:y,data:b,errsCount:w,it:k}){if(w===void 0)throw new Error("ajv implementation error");const x=m.name("err");m.forRange("i",w,r.default.errors,C=>{m.const(x,(0,e._)`${r.default.vErrors}[${C}]`),m.if((0,e._)`${x}.instancePath === undefined`,()=>m.assign((0,e._)`${x}.instancePath`,(0,e.strConcat)(r.default.instancePath,k.errorPath))),m.assign((0,e._)`${x}.schemaPath`,(0,e.str)`${k.errSchemaPath}/${v}`),k.opts.verbose&&(m.assign((0,e._)`${x}.schema`,y),m.assign((0,e._)`${x}.data`,b))})}n.extendErrors=a;function l(m,v){const y=m.const("err",v);m.if((0,e._)`${r.default.vErrors} === null`,()=>m.assign(r.default.vErrors,(0,e._)`[${y}]`),(0,e._)`${r.default.vErrors}.push(${y})`),m.code((0,e._)`${r.default.errors}++`)}function c(m,v){const{gen:y,validateName:b,schemaEnv:w}=m;w.$async?y.throw((0,e._)`new ${m.ValidationError}(${v})`):(y.assign((0,e._)`${b}.errors`,v),y.return(!1))}const u={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function f(m,v,y){const{createErrors:b}=m.it;return b===!1?(0,e._)`{}`:h(m,v,y)}function h(m,v,y={}){const{gen:b,it:w}=m,k=[d(w,y),p(m,y)];return g(m,v,k),b.object(...k)}function d({errorPath:m},{instancePath:v}){const y=v?(0,e.str)`${m}${(0,t.getErrorPath)(v,t.Type.Str)}`:m;return[r.default.instancePath,(0,e.strConcat)(r.default.instancePath,y)]}function p({keyword:m,it:{errSchemaPath:v}},{schemaPath:y,parentSchema:b}){let w=b?v:(0,e.str)`${v}/${m}`;return y&&(w=(0,e.str)`${w}${(0,t.getErrorPath)(y,t.Type.Str)}`),[u.schemaPath,w]}function g(m,{params:v,message:y},b){const{keyword:w,data:k,schemaValue:x,it:C}=m,{opts:P,propertyName:I,topSchemaRef:$,schemaPath:_}=C;b.push([u.keyword,w],[u.params,typeof v=="function"?v(m):v||(0,e._)`{}`]),P.messages&&b.push([u.message,typeof y=="function"?y(m):y]),P.verbose&&b.push([u.schema,x],[u.parentSchema,(0,e._)`${$}${_}`],[r.default.data,k]),I&&b.push([u.propertyName,I])}})(Wo);Object.defineProperty(us,"__esModule",{value:!0});us.boolOrEmptySchema=us.topBoolOrEmptySchema=void 0;const VL=Wo,HL=ye,zL=Zn,WL={message:"boolean schema is false"};function qL(n){const{gen:e,schema:t,validateName:r}=n;t===!1?Rx(n,!1):typeof t=="object"&&t.$async===!0?e.return(zL.default.data):(e.assign((0,HL._)`${r}.errors`,null),e.return(!0))}us.topBoolOrEmptySchema=qL;function UL(n,e){const{gen:t,schema:r}=n;r===!1?(t.var(e,!1),Rx(n)):t.var(e,!0)}us.boolOrEmptySchema=UL;function Rx(n,e){const{gen:t,data:r}=n,i={gen:t,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:n};(0,VL.reportError)(i,WL,void 0,e)}var qo={},bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.getRules=bi.isJSONType=void 0;const KL=["string","number","integer","boolean","null","object","array"],GL=new Set(KL);function XL(n){return typeof n=="string"&&GL.has(n)}bi.isJSONType=XL;function YL(){const n={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...n,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},n.number,n.string,n.array,n.object],post:{rules:[]},all:{},keywords:{}}}bi.getRules=YL;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.shouldUseRule=ur.shouldUseGroup=ur.schemaHasRulesForType=void 0;function QL({schema:n,self:e},t){const r=e.RULES.types[t];return r&&r!==!0&&Nx(n,r)}ur.schemaHasRulesForType=QL;function Nx(n,e){return e.rules.some(t=>Mx(n,t))}ur.shouldUseGroup=Nx;function Mx(n,e){var t;return n[e.keyword]!==void 0||((t=e.definition.implements)===null||t===void 0?void 0:t.some(r=>n[r]!==void 0))}ur.shouldUseRule=Mx;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.reportTypeError=n.checkDataTypes=n.checkDataType=n.coerceAndCheckDataType=n.getJSONTypes=n.getSchemaTypes=n.DataType=void 0;const e=bi,t=ur,r=Wo,i=ye,s=$e;var o;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(o=n.DataType||(n.DataType={}));function a(b){const w=l(b.type);if(w.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&w.push("null")}return w}n.getSchemaTypes=a;function l(b){const w=Array.isArray(b)?b:b?[b]:[];if(w.every(e.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}n.getJSONTypes=l;function c(b,w){const{gen:k,data:x,opts:C}=b,P=f(w,C.coerceTypes),I=w.length>0&&!(P.length===0&&w.length===1&&(0,t.schemaHasRulesForType)(b,w[0]));if(I){const $=g(w,x,C.strictNumbers,o.Wrong);k.if($,()=>{P.length?h(b,w,P):v(b)})}return I}n.coerceAndCheckDataType=c;const u=new Set(["string","number","integer","boolean","null"]);function f(b,w){return w?b.filter(k=>u.has(k)||w==="array"&&k==="array"):[]}function h(b,w,k){const{gen:x,data:C,opts:P}=b,I=x.let("dataType",(0,i._)`typeof ${C}`),$=x.let("coerced",(0,i._)`undefined`);P.coerceTypes==="array"&&x.if((0,i._)`${I} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>x.assign(C,(0,i._)`${C}[0]`).assign(I,(0,i._)`typeof ${C}`).if(g(w,C,P.strictNumbers),()=>x.assign($,C))),x.if((0,i._)`${$} !== undefined`);for(const O of k)(u.has(O)||O==="array"&&P.coerceTypes==="array")&&_(O);x.else(),v(b),x.endIf(),x.if((0,i._)`${$} !== undefined`,()=>{x.assign(C,$),d(b,$)});function _(O){switch(O){case"string":x.elseIf((0,i._)`${I} == "number" || ${I} == "boolean"`).assign($,(0,i._)`"" + ${C}`).elseIf((0,i._)`${C} === null`).assign($,(0,i._)`""`);return;case"number":x.elseIf((0,i._)`${I} == "boolean" || ${C} === null
              || (${I} == "string" && ${C} && ${C} == +${C})`).assign($,(0,i._)`+${C}`);return;case"integer":x.elseIf((0,i._)`${I} === "boolean" || ${C} === null
              || (${I} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign($,(0,i._)`+${C}`);return;case"boolean":x.elseIf((0,i._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign($,!1).elseIf((0,i._)`${C} === "true" || ${C} === 1`).assign($,!0);return;case"null":x.elseIf((0,i._)`${C} === "" || ${C} === 0 || ${C} === false`),x.assign($,null);return;case"array":x.elseIf((0,i._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${C} === null`).assign($,(0,i._)`[${C}]`)}}}function d({gen:b,parentData:w,parentDataProperty:k},x){b.if((0,i._)`${w} !== undefined`,()=>b.assign((0,i._)`${w}[${k}]`,x))}function p(b,w,k,x=o.Correct){const C=x===o.Correct?i.operators.EQ:i.operators.NEQ;let P;switch(b){case"null":return(0,i._)`${w} ${C} null`;case"array":P=(0,i._)`Array.isArray(${w})`;break;case"object":P=(0,i._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":P=I((0,i._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":P=I();break;default:return(0,i._)`typeof ${w} ${C} ${b}`}return x===o.Correct?P:(0,i.not)(P);function I($=i.nil){return(0,i.and)((0,i._)`typeof ${w} == "number"`,$,k?(0,i._)`isFinite(${w})`:i.nil)}}n.checkDataType=p;function g(b,w,k,x){if(b.length===1)return p(b[0],w,k,x);let C;const P=(0,s.toHash)(b);if(P.array&&P.object){const I=(0,i._)`typeof ${w} != "object"`;C=P.null?I:(0,i._)`!${w} || ${I}`,delete P.null,delete P.array,delete P.object}else C=i.nil;P.number&&delete P.integer;for(const I in P)C=(0,i.and)(C,p(I,w,k,x));return C}n.checkDataTypes=g;const m={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:w})=>typeof b=="string"?(0,i._)`{type: ${b}}`:(0,i._)`{type: ${w}}`};function v(b){const w=y(b);(0,r.reportError)(w,m)}n.reportTypeError=v;function y(b){const{gen:w,data:k,schema:x}=b,C=(0,s.schemaRefOrVal)(b,x,"type");return{gen:w,keyword:"type",data:k,schema:x.type,schemaCode:C,schemaValue:C,parentSchema:x,params:{},it:b}}})(qo);var bc={};Object.defineProperty(bc,"__esModule",{value:!0});bc.assignDefaults=void 0;const Ii=ye,JL=$e;function ZL(n,e){const{properties:t,items:r}=n.schema;if(e==="object"&&t)for(const i in t)iv(n,i,t[i].default);else e==="array"&&Array.isArray(r)&&r.forEach((i,s)=>iv(n,s,i.default))}bc.assignDefaults=ZL;function iv(n,e,t){const{gen:r,compositeRule:i,data:s,opts:o}=n;if(t===void 0)return;const a=(0,Ii._)`${s}${(0,Ii.getProperty)(e)}`;if(i){(0,JL.checkStrictMode)(n,`default is ignored for: ${a}`);return}let l=(0,Ii._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,Ii._)`${l} || ${a} === null || ${a} === ""`),r.if(l,(0,Ii._)`${a} = ${(0,Ii.stringify)(t)}`)}var Gn={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.validateUnion=me.validateArray=me.usePattern=me.callValidateCode=me.schemaProperties=me.allSchemaProperties=me.noPropertyInData=me.propertyInData=me.isOwnProperty=me.hasPropFunc=me.reportMissingProp=me.checkMissingProp=me.checkReportMissingProp=void 0;const je=ye,Pd=$e,xr=Zn,e6=$e;function t6(n,e){const{gen:t,data:r,it:i}=n;t.if(Dd(t,r,e,i.opts.ownProperties),()=>{n.setParams({missingProperty:(0,je._)`${e}`},!0),n.error()})}me.checkReportMissingProp=t6;function n6({gen:n,data:e,it:{opts:t}},r,i){return(0,je.or)(...r.map(s=>(0,je.and)(Dd(n,e,s,t.ownProperties),(0,je._)`${i} = ${s}`)))}me.checkMissingProp=n6;function r6(n,e){n.setParams({missingProperty:e},!0),n.error()}me.reportMissingProp=r6;function Bx(n){return n.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,je._)`Object.prototype.hasOwnProperty`})}me.hasPropFunc=Bx;function Td(n,e,t){return(0,je._)`${Bx(n)}.call(${e}, ${t})`}me.isOwnProperty=Td;function i6(n,e,t,r){const i=(0,je._)`${e}${(0,je.getProperty)(t)} !== undefined`;return r?(0,je._)`${i} && ${Td(n,e,t)}`:i}me.propertyInData=i6;function Dd(n,e,t,r){const i=(0,je._)`${e}${(0,je.getProperty)(t)} === undefined`;return r?(0,je.or)(i,(0,je.not)(Td(n,e,t))):i}me.noPropertyInData=Dd;function Lx(n){return n?Object.keys(n).filter(e=>e!=="__proto__"):[]}me.allSchemaProperties=Lx;function s6(n,e){return Lx(e).filter(t=>!(0,Pd.alwaysValidSchema)(n,e[t]))}me.schemaProperties=s6;function o6({schemaCode:n,data:e,it:{gen:t,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,l,c){const u=c?(0,je._)`${n}, ${e}, ${r}${i}`:e,f=[[xr.default.instancePath,(0,je.strConcat)(xr.default.instancePath,s)],[xr.default.parentData,o.parentData],[xr.default.parentDataProperty,o.parentDataProperty],[xr.default.rootData,xr.default.rootData]];o.opts.dynamicRef&&f.push([xr.default.dynamicAnchors,xr.default.dynamicAnchors]);const h=(0,je._)`${u}, ${t.object(...f)}`;return l!==je.nil?(0,je._)`${a}.call(${l}, ${h})`:(0,je._)`${a}(${h})`}me.callValidateCode=o6;const a6=(0,je._)`new RegExp`;function l6({gen:n,it:{opts:e}},t){const r=e.unicodeRegExp?"u":"",{regExp:i}=e.code,s=i(t,r);return n.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,je._)`${i.code==="new RegExp"?a6:(0,e6.useFunc)(n,i)}(${t}, ${r})`})}me.usePattern=l6;function c6(n){const{gen:e,data:t,keyword:r,it:i}=n,s=e.name("valid");if(i.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(s,!0),o(()=>e.break()),s;function o(a){const l=e.const("len",(0,je._)`${t}.length`);e.forRange("i",0,l,c=>{n.subschema({keyword:r,dataProp:c,dataPropType:Pd.Type.Num},s),e.if((0,je.not)(s),a)})}}me.validateArray=c6;function u6(n){const{gen:e,schema:t,keyword:r,it:i}=n;if(!Array.isArray(t))throw new Error("ajv implementation error");if(t.some(l=>(0,Pd.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>t.forEach((l,c)=>{const u=n.subschema({keyword:r,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,je._)`${o} || ${a}`),n.mergeValidEvaluated(u,a)||e.if((0,je.not)(o))})),n.result(o,()=>n.reset(),()=>n.error(!0))}me.validateUnion=u6;Object.defineProperty(Gn,"__esModule",{value:!0});Gn.validateKeywordUsage=Gn.validSchemaType=Gn.funcKeywordCode=Gn.macroKeywordCode=void 0;const Et=ye,si=Zn,f6=me,h6=Wo;function d6(n,e){const{gen:t,keyword:r,schema:i,parentSchema:s,it:o}=n,a=e.macro.call(o.self,i,s,o),l=Fx(t,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const c=t.name("valid");n.subschema({schema:a,schemaPath:Et.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},c),n.pass(c,()=>n.error(!0))}Gn.macroKeywordCode=d6;function p6(n,e){var t;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:l}=n;m6(l,e);const c=!a&&e.compile?e.compile.call(l.self,s,o,l):e.validate,u=Fx(r,i,c),f=r.let("valid");n.block$data(f,h),n.ok((t=e.valid)!==null&&t!==void 0?t:f);function h(){if(e.errors===!1)g(),e.modifying&&sv(n),m(()=>n.error());else{const v=e.async?d():p();e.modifying&&sv(n),m(()=>g6(n,v))}}function d(){const v=r.let("ruleErrs",null);return r.try(()=>g((0,Et._)`await `),y=>r.assign(f,!1).if((0,Et._)`${y} instanceof ${l.ValidationError}`,()=>r.assign(v,(0,Et._)`${y}.errors`),()=>r.throw(y))),v}function p(){const v=(0,Et._)`${u}.errors`;return r.assign(v,null),g(Et.nil),v}function g(v=e.async?(0,Et._)`await `:Et.nil){const y=l.opts.passContext?si.default.this:si.default.self,b=!("compile"in e&&!a||e.schema===!1);r.assign(f,(0,Et._)`${v}${(0,f6.callValidateCode)(n,u,y,b)}`,e.modifying)}function m(v){var y;r.if((0,Et.not)((y=e.valid)!==null&&y!==void 0?y:f),v)}}Gn.funcKeywordCode=p6;function sv(n){const{gen:e,data:t,it:r}=n;e.if(r.parentData,()=>e.assign(t,(0,Et._)`${r.parentData}[${r.parentDataProperty}]`))}function g6(n,e){const{gen:t}=n;t.if((0,Et._)`Array.isArray(${e})`,()=>{t.assign(si.default.vErrors,(0,Et._)`${si.default.vErrors} === null ? ${e} : ${si.default.vErrors}.concat(${e})`).assign(si.default.errors,(0,Et._)`${si.default.vErrors}.length`),(0,h6.extendErrors)(n)},()=>n.error())}function m6({schemaEnv:n},e){if(e.async&&!n.$async)throw new Error("async keyword in sync schema")}function Fx(n,e,t){if(t===void 0)throw new Error(`keyword "${e}" failed to compile`);return n.scopeValue("keyword",typeof t=="function"?{ref:t}:{ref:t,code:(0,Et.stringify)(t)})}function v6(n,e,t=!1){return!e.length||e.some(r=>r==="array"?Array.isArray(n):r==="object"?n&&typeof n=="object"&&!Array.isArray(n):typeof n==r||t&&typeof n>"u")}Gn.validSchemaType=v6;function y6({schema:n,opts:e,self:t,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(n,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(n[s])){const l=`keyword "${s}" value is invalid at path "${r}": `+t.errorsText(i.validateSchema.errors);if(e.validateSchema==="log")t.logger.error(l);else throw new Error(l)}}Gn.validateKeywordUsage=y6;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.extendSubschemaMode=Nr.extendSubschemaData=Nr.getSubschema=void 0;const qn=ye,jx=$e;function b6(n,{keyword:e,schemaProp:t,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(e!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){const a=n.schema[e];return t===void 0?{schema:a,schemaPath:(0,qn._)`${n.schemaPath}${(0,qn.getProperty)(e)}`,errSchemaPath:`${n.errSchemaPath}/${e}`}:{schema:a[t],schemaPath:(0,qn._)`${n.schemaPath}${(0,qn.getProperty)(e)}${(0,qn.getProperty)(t)}`,errSchemaPath:`${n.errSchemaPath}/${e}/${(0,jx.escapeFragment)(t)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}Nr.getSubschema=b6;function x6(n,e,{dataProp:t,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&t!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=e;if(t!==void 0){const{errorPath:c,dataPathArr:u,opts:f}=e,h=a.let("data",(0,qn._)`${e.data}${(0,qn.getProperty)(t)}`,!0);l(h),n.errorPath=(0,qn.str)`${c}${(0,jx.getErrorPath)(t,r,f.jsPropertySyntax)}`,n.parentDataProperty=(0,qn._)`${t}`,n.dataPathArr=[...u,n.parentDataProperty]}if(i!==void 0){const c=i instanceof qn.Name?i:a.let("data",i,!0);l(c),o!==void 0&&(n.propertyName=o)}s&&(n.dataTypes=s);function l(c){n.data=c,n.dataLevel=e.dataLevel+1,n.dataTypes=[],e.definedProperties=new Set,n.parentData=e.data,n.dataNames=[...e.dataNames,c]}}Nr.extendSubschemaData=x6;function w6(n,{jtdDiscriminator:e,jtdMetadata:t,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(n.compositeRule=r),i!==void 0&&(n.createErrors=i),s!==void 0&&(n.allErrors=s),n.jtdDiscriminator=e,n.jtdMetadata=t}Nr.extendSubschemaMode=w6;var gt={},Vx=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},Hx={exports:{}},Tr=Hx.exports=function(n,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var r=typeof t=="function"?t:t.pre||function(){},i=t.post||function(){};Ka(e,r,i,n,"",n)};Tr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Tr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Tr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Tr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ka(n,e,t,r,i,s,o,a,l,c){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,i,s,o,a,l,c);for(var u in r){var f=r[u];if(Array.isArray(f)){if(u in Tr.arrayKeywords)for(var h=0;h<f.length;h++)Ka(n,e,t,f[h],i+"/"+u+"/"+h,s,i,u,r,h)}else if(u in Tr.propsKeywords){if(f&&typeof f=="object")for(var d in f)Ka(n,e,t,f[d],i+"/"+u+"/"+S6(d),s,i,u,r,d)}else(u in Tr.keywords||n.allKeys&&!(u in Tr.skipKeywords))&&Ka(n,e,t,f,i+"/"+u,s,i,u,r)}t(r,i,s,o,a,l,c)}}function S6(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}var k6=Hx.exports;Object.defineProperty(gt,"__esModule",{value:!0});gt.getSchemaRefs=gt.resolveUrl=gt.normalizeId=gt._getFullPath=gt.getFullPath=gt.inlineRef=void 0;const C6=$e,_6=Vx,$6=k6,E6=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function O6(n,e=!0){return typeof n=="boolean"?!0:e===!0?!vh(n):e?zx(n)<=e:!1}gt.inlineRef=O6;const A6=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function vh(n){for(const e in n){if(A6.has(e))return!0;const t=n[e];if(Array.isArray(t)&&t.some(vh)||typeof t=="object"&&vh(t))return!0}return!1}function zx(n){let e=0;for(const t in n){if(t==="$ref")return 1/0;if(e++,!E6.has(t)&&(typeof n[t]=="object"&&(0,C6.eachItem)(n[t],r=>e+=zx(r)),e===1/0))return 1/0}return e}function Wx(n,e="",t){t!==!1&&(e=Yi(e));const r=n.parse(e);return qx(n,r)}gt.getFullPath=Wx;function qx(n,e){return n.serialize(e).split("#")[0]+"#"}gt._getFullPath=qx;const P6=/#\/?$/;function Yi(n){return n?n.replace(P6,""):""}gt.normalizeId=Yi;function T6(n,e,t){return t=Yi(t),n.resolve(e,t)}gt.resolveUrl=T6;const D6=/^[a-z_][-a-z0-9._]*$/i;function I6(n,e){if(typeof n=="boolean")return{};const{schemaId:t,uriResolver:r}=this.opts,i=Yi(n[t]||e),s={"":i},o=Wx(r,i,!1),a={},l=new Set;return $6(n,{allKeys:!0},(f,h,d,p)=>{if(p===void 0)return;const g=o+h;let m=s[p];typeof f[t]=="string"&&(m=v.call(this,f[t])),y.call(this,f.$anchor),y.call(this,f.$dynamicAnchor),s[h]=m;function v(b){const w=this.opts.uriResolver.resolve;if(b=Yi(m?w(m,b):b),l.has(b))throw u(b);l.add(b);let k=this.refs[b];return typeof k=="string"&&(k=this.refs[k]),typeof k=="object"?c(f,k.schema,b):b!==Yi(g)&&(b[0]==="#"?(c(f,a[b],b),a[b]=f):this.refs[b]=g),b}function y(b){if(typeof b=="string"){if(!D6.test(b))throw new Error(`invalid anchor "${b}"`);v.call(this,`#${b}`)}}}),a;function c(f,h,d){if(h!==void 0&&!_6(f,h))throw u(d)}function u(f){return new Error(`reference "${f}" resolves to more than one schema`)}}gt.getSchemaRefs=I6;Object.defineProperty(Sn,"__esModule",{value:!0});Sn.getData=Sn.KeywordCxt=Sn.validateFunctionCode=void 0;const Ux=us,ov=qo,Id=ur,Bl=qo,R6=bc,ho=Gn,Ku=Nr,re=ye,ae=Zn,N6=gt,fr=$e,Gs=Wo;function M6(n){if(Xx(n)&&(Yx(n),Gx(n))){F6(n);return}Kx(n,()=>(0,Ux.topBoolOrEmptySchema)(n))}Sn.validateFunctionCode=M6;function Kx({gen:n,validateName:e,schema:t,schemaEnv:r,opts:i},s){i.code.es5?n.func(e,(0,re._)`${ae.default.data}, ${ae.default.valCxt}`,r.$async,()=>{n.code((0,re._)`"use strict"; ${av(t,i)}`),L6(n,i),n.code(s)}):n.func(e,(0,re._)`${ae.default.data}, ${B6(i)}`,r.$async,()=>n.code(av(t,i)).code(s))}function B6(n){return(0,re._)`{${ae.default.instancePath}="", ${ae.default.parentData}, ${ae.default.parentDataProperty}, ${ae.default.rootData}=${ae.default.data}${n.dynamicRef?(0,re._)`, ${ae.default.dynamicAnchors}={}`:re.nil}}={}`}function L6(n,e){n.if(ae.default.valCxt,()=>{n.var(ae.default.instancePath,(0,re._)`${ae.default.valCxt}.${ae.default.instancePath}`),n.var(ae.default.parentData,(0,re._)`${ae.default.valCxt}.${ae.default.parentData}`),n.var(ae.default.parentDataProperty,(0,re._)`${ae.default.valCxt}.${ae.default.parentDataProperty}`),n.var(ae.default.rootData,(0,re._)`${ae.default.valCxt}.${ae.default.rootData}`),e.dynamicRef&&n.var(ae.default.dynamicAnchors,(0,re._)`${ae.default.valCxt}.${ae.default.dynamicAnchors}`)},()=>{n.var(ae.default.instancePath,(0,re._)`""`),n.var(ae.default.parentData,(0,re._)`undefined`),n.var(ae.default.parentDataProperty,(0,re._)`undefined`),n.var(ae.default.rootData,ae.default.data),e.dynamicRef&&n.var(ae.default.dynamicAnchors,(0,re._)`{}`)})}function F6(n){const{schema:e,opts:t,gen:r}=n;Kx(n,()=>{t.$comment&&e.$comment&&Jx(n),W6(n),r.let(ae.default.vErrors,null),r.let(ae.default.errors,0),t.unevaluated&&j6(n),Qx(n),K6(n)})}function j6(n){const{gen:e,validateName:t}=n;n.evaluated=e.const("evaluated",(0,re._)`${t}.evaluated`),e.if((0,re._)`${n.evaluated}.dynamicProps`,()=>e.assign((0,re._)`${n.evaluated}.props`,(0,re._)`undefined`)),e.if((0,re._)`${n.evaluated}.dynamicItems`,()=>e.assign((0,re._)`${n.evaluated}.items`,(0,re._)`undefined`))}function av(n,e){const t=typeof n=="object"&&n[e.schemaId];return t&&(e.code.source||e.code.process)?(0,re._)`/*# sourceURL=${t} */`:re.nil}function V6(n,e){if(Xx(n)&&(Yx(n),Gx(n))){H6(n,e);return}(0,Ux.boolOrEmptySchema)(n,e)}function Gx({schema:n,self:e}){if(typeof n=="boolean")return!n;for(const t in n)if(e.RULES.all[t])return!0;return!1}function Xx(n){return typeof n.schema!="boolean"}function H6(n,e){const{schema:t,gen:r,opts:i}=n;i.$comment&&t.$comment&&Jx(n),q6(n),U6(n);const s=r.const("_errs",ae.default.errors);Qx(n,s),r.var(e,(0,re._)`${s} === ${ae.default.errors}`)}function Yx(n){(0,fr.checkUnknownRules)(n),z6(n)}function Qx(n,e){if(n.opts.jtd)return lv(n,[],!1,e);const t=(0,ov.getSchemaTypes)(n.schema),r=(0,ov.coerceAndCheckDataType)(n,t);lv(n,t,!r,e)}function z6(n){const{schema:e,errSchemaPath:t,opts:r,self:i}=n;e.$ref&&r.ignoreKeywordsWithRef&&(0,fr.schemaHasRulesButRef)(e,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${t}"`)}function W6(n){const{schema:e,opts:t}=n;e.default!==void 0&&t.useDefaults&&t.strictSchema&&(0,fr.checkStrictMode)(n,"default is ignored in the schema root")}function q6(n){const e=n.schema[n.opts.schemaId];e&&(n.baseId=(0,N6.resolveUrl)(n.opts.uriResolver,n.baseId,e))}function U6(n){if(n.schema.$async&&!n.schemaEnv.$async)throw new Error("async schema in sync schema")}function Jx({gen:n,schemaEnv:e,schema:t,errSchemaPath:r,opts:i}){const s=t.$comment;if(i.$comment===!0)n.code((0,re._)`${ae.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,re.str)`${r}/$comment`,a=n.scopeValue("root",{ref:e.root});n.code((0,re._)`${ae.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function K6(n){const{gen:e,schemaEnv:t,validateName:r,ValidationError:i,opts:s}=n;t.$async?e.if((0,re._)`${ae.default.errors} === 0`,()=>e.return(ae.default.data),()=>e.throw((0,re._)`new ${i}(${ae.default.vErrors})`)):(e.assign((0,re._)`${r}.errors`,ae.default.vErrors),s.unevaluated&&G6(n),e.return((0,re._)`${ae.default.errors} === 0`))}function G6({gen:n,evaluated:e,props:t,items:r}){t instanceof re.Name&&n.assign((0,re._)`${e}.props`,t),r instanceof re.Name&&n.assign((0,re._)`${e}.items`,r)}function lv(n,e,t,r){const{gen:i,schema:s,data:o,allErrors:a,opts:l,self:c}=n,{RULES:u}=c;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,fr.schemaHasRulesButRef)(s,u))){i.block(()=>tw(n,"$ref",u.all.$ref.definition));return}l.jtd||X6(n,e),i.block(()=>{for(const h of u.rules)f(h);f(u.post)});function f(h){(0,Id.shouldUseGroup)(s,h)&&(h.type?(i.if((0,Bl.checkDataType)(h.type,o,l.strictNumbers)),cv(n,h),e.length===1&&e[0]===h.type&&t&&(i.else(),(0,Bl.reportTypeError)(n)),i.endIf()):cv(n,h),a||i.if((0,re._)`${ae.default.errors} === ${r||0}`))}}function cv(n,e){const{gen:t,schema:r,opts:{useDefaults:i}}=n;i&&(0,R6.assignDefaults)(n,e.type),t.block(()=>{for(const s of e.rules)(0,Id.shouldUseRule)(r,s)&&tw(n,s.keyword,s.definition,e.type)})}function X6(n,e){n.schemaEnv.meta||!n.opts.strictTypes||(Y6(n,e),n.opts.allowUnionTypes||Q6(n,e),J6(n,n.dataTypes))}function Y6(n,e){if(e.length){if(!n.dataTypes.length){n.dataTypes=e;return}e.forEach(t=>{Zx(n.dataTypes,t)||Rd(n,`type "${t}" not allowed by context "${n.dataTypes.join(",")}"`)}),e5(n,e)}}function Q6(n,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Rd(n,"use allowUnionTypes to allow union type keyword")}function J6(n,e){const t=n.self.RULES.all;for(const r in t){const i=t[r];if(typeof i=="object"&&(0,Id.shouldUseRule)(n.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Z6(e,o))&&Rd(n,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Z6(n,e){return n.includes(e)||e==="number"&&n.includes("integer")}function Zx(n,e){return n.includes(e)||e==="integer"&&n.includes("number")}function e5(n,e){const t=[];for(const r of n.dataTypes)Zx(e,r)?t.push(r):e.includes("integer")&&r==="number"&&t.push("integer");n.dataTypes=t}function Rd(n,e){const t=n.schemaEnv.baseId+n.errSchemaPath;e+=` at "${t}" (strictTypes)`,(0,fr.checkStrictMode)(n,e,n.opts.strictTypes)}class ew{constructor(e,t,r){if((0,ho.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,fr.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",nw(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,ho.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:t.errors!==!1)&&(this.errsCount=e.gen.const("_errs",ae.default.errors))}result(e,t,r){this.failResult((0,re.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,re.not)(e),void 0,t)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail((0,re._)`${t} !== undefined && (${(0,re.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t){this.setParams(t),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,t){(e?Gs.reportExtraError:Gs.reportError)(this,this.def.error,t)}$dataError(){(0,Gs.reportError)(this,this.def.$dataError||Gs.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Gs.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=re.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=re.nil,t=re.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,re.or)((0,re._)`${i} === undefined`,t)),e!==re.nil&&r.assign(e,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==re.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:i,it:s}=this;return(0,re.or)(o(),a());function o(){if(r.length){if(!(t instanceof re.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,re._)`${(0,Bl.checkDataTypes)(l,t,s.opts.strictNumbers,Bl.DataType.Wrong)}`}return re.nil}function a(){if(i.validateSchema){const l=e.scopeValue("validate$data",{ref:i.validateSchema});return(0,re._)`!${l}(${t})`}return re.nil}}subschema(e,t){const r=(0,Ku.getSubschema)(this.it,e);(0,Ku.extendSubschemaData)(r,this.it,e),(0,Ku.extendSubschemaMode)(r,e);const i={...this.it,...r,items:void 0,props:void 0};return V6(i,t),i}mergeEvaluated(e,t){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&e.props!==void 0&&(r.props=fr.mergeEvaluated.props(i,e.props,r.props,t)),r.items!==!0&&e.items!==void 0&&(r.items=fr.mergeEvaluated.items(i,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(t,()=>this.mergeEvaluated(e,re.Name)),!0}}Sn.KeywordCxt=ew;function tw(n,e,t,r){const i=new ew(n,t,e);"code"in t?t.code(i,r):i.$data&&t.validate?(0,ho.funcKeywordCode)(i,t):"macro"in t?(0,ho.macroKeywordCode)(i,t):(t.compile||t.validate)&&(0,ho.funcKeywordCode)(i,t)}const t5=/^\/(?:[^~]|~0|~1)*$/,n5=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function nw(n,{dataLevel:e,dataNames:t,dataPathArr:r}){let i,s;if(n==="")return ae.default.rootData;if(n[0]==="/"){if(!t5.test(n))throw new Error(`Invalid JSON-pointer: ${n}`);i=n,s=ae.default.rootData}else{const c=n5.exec(n);if(!c)throw new Error(`Invalid JSON-pointer: ${n}`);const u=+c[1];if(i=c[2],i==="#"){if(u>=e)throw new Error(l("property/index",u));return r[e-u]}if(u>e)throw new Error(l("data",u));if(s=t[e-u],!i)return s}let o=s;const a=i.split("/");for(const c of a)c&&(s=(0,re._)`${s}${(0,re.getProperty)((0,fr.unescapeJsonPointer)(c))}`,o=(0,re._)`${o} && ${s}`);return o;function l(c,u){return`Cannot access ${c} ${u} levels up, current level is ${e}`}}Sn.getData=nw;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});class r5 extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Uo.default=r5;var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});const Gu=gt;class i5 extends Error{constructor(e,t,r,i){super(i||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,Gu.resolveUrl)(e,t,r),this.missingSchema=(0,Gu.normalizeId)((0,Gu.getFullPath)(e,this.missingRef))}}Ko.default=i5;var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.resolveSchema=Lt.getCompilingSchema=Lt.resolveRef=Lt.compileSchema=Lt.SchemaEnv=void 0;const pn=ye,s5=Uo,Jr=Zn,yn=gt,uv=$e,o5=Sn;class xc{constructor(e){var t;this.refs={},this.dynamicAnchors={};let r;typeof e.schema=="object"&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(t=e.baseId)!==null&&t!==void 0?t:(0,yn.normalizeId)(r?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=r?.$async,this.refs={}}}Lt.SchemaEnv=xc;function Nd(n){const e=rw.call(this,n);if(e)return e;const t=(0,yn.getFullPath)(this.opts.uriResolver,n.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new pn.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;n.$async&&(a=o.scopeValue("Error",{ref:s5.default,code:(0,pn._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");n.validateName=l;const c={gen:o,allErrors:this.opts.allErrors,data:Jr.default.data,parentData:Jr.default.parentData,parentDataProperty:Jr.default.parentDataProperty,dataNames:[Jr.default.data],dataPathArr:[pn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:n.schema,code:(0,pn.stringify)(n.schema)}:{ref:n.schema}),validateName:l,ValidationError:a,schema:n.schema,schemaEnv:n,rootId:t,baseId:n.baseId||t,schemaPath:pn.nil,errSchemaPath:n.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,pn._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(n),(0,o5.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);const f=o.toString();u=`${o.scopeRefs(Jr.default.scope)}return ${f}`,this.opts.code.process&&(u=this.opts.code.process(u,n));const d=new Function(`${Jr.default.self}`,`${Jr.default.scope}`,u)(this,this.scope.get());if(this.scope.value(l,{ref:d}),d.errors=null,d.schema=n.schema,d.schemaEnv=n,n.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:l,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:g}=c;d.evaluated={props:p instanceof pn.Name?void 0:p,items:g instanceof pn.Name?void 0:g,dynamicProps:p instanceof pn.Name,dynamicItems:g instanceof pn.Name},d.source&&(d.source.evaluated=(0,pn.stringify)(d.evaluated))}return n.validate=d,n}catch(f){throw delete n.validate,delete n.validateName,u&&this.logger.error("Error compiling schema, function code:",u),f}finally{this._compilations.delete(n)}}Lt.compileSchema=Nd;function a5(n,e,t){var r;t=(0,yn.resolveUrl)(this.opts.uriResolver,e,t);const i=n.refs[t];if(i)return i;let s=u5.call(this,n,t);if(s===void 0){const o=(r=n.localRefs)===null||r===void 0?void 0:r[t],{schemaId:a}=this.opts;o&&(s=new xc({schema:o,schemaId:a,root:n,baseId:e}))}if(s!==void 0)return n.refs[t]=l5.call(this,s)}Lt.resolveRef=a5;function l5(n){return(0,yn.inlineRef)(n.schema,this.opts.inlineRefs)?n.schema:n.validate?n:Nd.call(this,n)}function rw(n){for(const e of this._compilations)if(c5(e,n))return e}Lt.getCompilingSchema=rw;function c5(n,e){return n.schema===e.schema&&n.root===e.root&&n.baseId===e.baseId}function u5(n,e){let t;for(;typeof(t=this.refs[e])=="string";)e=t;return t||this.schemas[e]||wc.call(this,n,e)}function wc(n,e){const t=this.opts.uriResolver.parse(e),r=(0,yn._getFullPath)(this.opts.uriResolver,t);let i=(0,yn.getFullPath)(this.opts.uriResolver,n.baseId,void 0);if(Object.keys(n.schema).length>0&&r===i)return Xu.call(this,t,n);const s=(0,yn.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=wc.call(this,n,o);return typeof a?.schema!="object"?void 0:Xu.call(this,t,a)}if(typeof o?.schema=="object"){if(o.validate||Nd.call(this,o),s===(0,yn.normalizeId)(e)){const{schema:a}=o,{schemaId:l}=this.opts,c=a[l];return c&&(i=(0,yn.resolveUrl)(this.opts.uriResolver,i,c)),new xc({schema:a,schemaId:l,root:n,baseId:i})}return Xu.call(this,t,o)}}Lt.resolveSchema=wc;const f5=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Xu(n,{baseId:e,schema:t,root:r}){var i;if(((i=n.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of n.fragment.slice(1).split("/")){if(typeof t=="boolean")return;const l=t[(0,uv.unescapeFragment)(a)];if(l===void 0)return;t=l;const c=typeof t=="object"&&t[this.opts.schemaId];!f5.has(a)&&c&&(e=(0,yn.resolveUrl)(this.opts.uriResolver,e,c))}let s;if(typeof t!="boolean"&&t.$ref&&!(0,uv.schemaHasRulesButRef)(t,this.RULES)){const a=(0,yn.resolveUrl)(this.opts.uriResolver,e,t.$ref);s=wc.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new xc({schema:t,schemaId:o,root:r,baseId:e}),s.schema!==s.root.schema)return s}const h5="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",d5="Meta-schema for $data reference (JSON AnySchema extension proposal)",p5="object",g5=["$data"],m5={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},v5=!1,y5={$id:h5,description:d5,type:p5,required:g5,properties:m5,additionalProperties:v5};var Md={},yh={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(n,e){(function(t,r){r(e)})(fe,function(t){function r(){for(var N=arguments.length,A=Array(N),B=0;B<N;B++)A[B]=arguments[B];if(A.length>1){A[0]=A[0].slice(0,-1);for(var j=A.length-1,F=1;F<j;++F)A[F]=A[F].slice(1,-1);return A[j]=A[j].slice(1),A.join("")}else return A[0]}function i(N){return"(?:"+N+")"}function s(N){return N===void 0?"undefined":N===null?"null":Object.prototype.toString.call(N).split(" ").pop().split("]").shift().toLowerCase()}function o(N){return N.toUpperCase()}function a(N){return N!=null?N instanceof Array?N:typeof N.length!="number"||N.split||N.setInterval||N.call?[N]:Array.prototype.slice.call(N):[]}function l(N,A){var B=N;if(A)for(var j in A)B[j]=A[j];return B}function c(N){var A="[A-Za-z]",B="[0-9]",j=r(B,"[A-Fa-f]"),F=i(i("%[EFef]"+j+"%"+j+j+"%"+j+j)+"|"+i("%[89A-Fa-f]"+j+"%"+j+j)+"|"+i("%"+j+j)),ie="[\\:\\/\\?\\#\\[\\]\\@]",se="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Se=r(ie,se),Be=N?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ye=N?"[\\uE000-\\uF8FF]":"[]",be=r(A,B,"[\\-\\.\\_\\~]",Be);i(A+r(A,B,"[\\+\\-\\.]")+"*"),i(i(F+"|"+r(be,se,"[\\:]"))+"*");var De=i(i("25[0-5]")+"|"+i("2[0-4]"+B)+"|"+i("1"+B+B)+"|"+i("0?[1-9]"+B)+"|0?0?"+B),Qe=i(De+"\\."+De+"\\."+De+"\\."+De),ue=i(j+"{1,4}"),He=i(i(ue+"\\:"+ue)+"|"+Qe),et=i(i(ue+"\\:")+"{6}"+He),ze=i("\\:\\:"+i(ue+"\\:")+"{5}"+He),br=i(i(ue)+"?\\:\\:"+i(ue+"\\:")+"{4}"+He),Dn=i(i(i(ue+"\\:")+"{0,1}"+ue)+"?\\:\\:"+i(ue+"\\:")+"{3}"+He),In=i(i(i(ue+"\\:")+"{0,2}"+ue)+"?\\:\\:"+i(ue+"\\:")+"{2}"+He),Oi=i(i(i(ue+"\\:")+"{0,3}"+ue)+"?\\:\\:"+ue+"\\:"+He),Gr=i(i(i(ue+"\\:")+"{0,4}"+ue)+"?\\:\\:"+He),Zt=i(i(i(ue+"\\:")+"{0,5}"+ue)+"?\\:\\:"+ue),Rn=i(i(i(ue+"\\:")+"{0,6}"+ue)+"?\\:\\:"),Xr=i([et,ze,br,Dn,In,Oi,Gr,Zt,Rn].join("|")),tr=i(i(be+"|"+F)+"+");i("[vV]"+j+"+\\."+r(be,se,"[\\:]")+"+"),i(i(F+"|"+r(be,se))+"*");var Ns=i(F+"|"+r(be,se,"[\\:\\@]"));return i(i(F+"|"+r(be,se,"[\\@]"))+"+"),i(i(Ns+"|"+r("[\\/\\?]",Ye))+"*"),{NOT_SCHEME:new RegExp(r("[^]",A,B,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",be,se),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",be,se),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",be,se),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",be,se),"g"),NOT_QUERY:new RegExp(r("[^\\%]",be,se,"[\\:\\@\\/\\?]",Ye),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",be,se,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",be,se),"g"),UNRESERVED:new RegExp(be,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",be,Se),"g"),PCT_ENCODED:new RegExp(F,"g"),IPV4ADDRESS:new RegExp("^("+Qe+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Xr+")"+i(i("\\%25|\\%(?!"+j+"{2})")+"("+tr+")")+"?\\]?$")}}var u=c(!1),f=c(!0),h=function(){function N(A,B){var j=[],F=!0,ie=!1,se=void 0;try{for(var Se=A[Symbol.iterator](),Be;!(F=(Be=Se.next()).done)&&(j.push(Be.value),!(B&&j.length===B));F=!0);}catch(Ye){ie=!0,se=Ye}finally{try{!F&&Se.return&&Se.return()}finally{if(ie)throw se}}return j}return function(A,B){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return N(A,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(N){if(Array.isArray(N)){for(var A=0,B=Array(N.length);A<N.length;A++)B[A]=N[A];return B}else return Array.from(N)},p=2147483647,g=36,m=1,v=26,y=38,b=700,w=72,k=128,x="-",C=/^xn--/,P=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,$={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=g-m,O=Math.floor,M=String.fromCharCode;function V(N){throw new RangeError($[N])}function W(N,A){for(var B=[],j=N.length;j--;)B[j]=A(N[j]);return B}function q(N,A){var B=N.split("@"),j="";B.length>1&&(j=B[0]+"@",N=B[1]),N=N.replace(I,".");var F=N.split("."),ie=W(F,A).join(".");return j+ie}function te(N){for(var A=[],B=0,j=N.length;B<j;){var F=N.charCodeAt(B++);if(F>=55296&&F<=56319&&B<j){var ie=N.charCodeAt(B++);(ie&64512)==56320?A.push(((F&1023)<<10)+(ie&1023)+65536):(A.push(F),B--)}else A.push(F)}return A}var ee=function(A){return String.fromCodePoint.apply(String,d(A))},J=function(A){return A-48<10?A-22:A-65<26?A-65:A-97<26?A-97:g},H=function(A,B){return A+22+75*(A<26)-((B!=0)<<5)},E=function(A,B,j){var F=0;for(A=j?O(A/b):A>>1,A+=O(A/B);A>_*v>>1;F+=g)A=O(A/_);return O(F+(_+1)*A/(A+y))},R=function(A){var B=[],j=A.length,F=0,ie=k,se=w,Se=A.lastIndexOf(x);Se<0&&(Se=0);for(var Be=0;Be<Se;++Be)A.charCodeAt(Be)>=128&&V("not-basic"),B.push(A.charCodeAt(Be));for(var Ye=Se>0?Se+1:0;Ye<j;){for(var be=F,De=1,Qe=g;;Qe+=g){Ye>=j&&V("invalid-input");var ue=J(A.charCodeAt(Ye++));(ue>=g||ue>O((p-F)/De))&&V("overflow"),F+=ue*De;var He=Qe<=se?m:Qe>=se+v?v:Qe-se;if(ue<He)break;var et=g-He;De>O(p/et)&&V("overflow"),De*=et}var ze=B.length+1;se=E(F-be,ze,be==0),O(F/ze)>p-ie&&V("overflow"),ie+=O(F/ze),F%=ze,B.splice(F++,0,ie)}return String.fromCodePoint.apply(String,B)},T=function(A){var B=[];A=te(A);var j=A.length,F=k,ie=0,se=w,Se=!0,Be=!1,Ye=void 0;try{for(var be=A[Symbol.iterator](),De;!(Se=(De=be.next()).done);Se=!0){var Qe=De.value;Qe<128&&B.push(M(Qe))}}catch(Ms){Be=!0,Ye=Ms}finally{try{!Se&&be.return&&be.return()}finally{if(Be)throw Ye}}var ue=B.length,He=ue;for(ue&&B.push(x);He<j;){var et=p,ze=!0,br=!1,Dn=void 0;try{for(var In=A[Symbol.iterator](),Oi;!(ze=(Oi=In.next()).done);ze=!0){var Gr=Oi.value;Gr>=F&&Gr<et&&(et=Gr)}}catch(Ms){br=!0,Dn=Ms}finally{try{!ze&&In.return&&In.return()}finally{if(br)throw Dn}}var Zt=He+1;et-F>O((p-ie)/Zt)&&V("overflow"),ie+=(et-F)*Zt,F=et;var Rn=!0,Xr=!1,tr=void 0;try{for(var Ns=A[Symbol.iterator](),g0;!(Rn=(g0=Ns.next()).done);Rn=!0){var m0=g0.value;if(m0<F&&++ie>p&&V("overflow"),m0==F){for(var ea=ie,ta=g;;ta+=g){var na=ta<=se?m:ta>=se+v?v:ta-se;if(ea<na)break;var v0=ea-na,y0=g-na;B.push(M(H(na+v0%y0,0))),ea=O(v0/y0)}B.push(M(H(ea,0))),se=E(ie,Zt,He==ue),ie=0,++He}}}catch(Ms){Xr=!0,tr=Ms}finally{try{!Rn&&Ns.return&&Ns.return()}finally{if(Xr)throw tr}}++ie,++F}return B.join("")},S=function(A){return q(A,function(B){return C.test(B)?R(B.slice(4).toLowerCase()):B})},D=function(A){return q(A,function(B){return P.test(B)?"xn--"+T(B):B})},L={version:"2.1.0",ucs2:{decode:te,encode:ee},decode:R,encode:T,toASCII:D,toUnicode:S},X={};function U(N){var A=N.charCodeAt(0),B=void 0;return A<16?B="%0"+A.toString(16).toUpperCase():A<128?B="%"+A.toString(16).toUpperCase():A<2048?B="%"+(A>>6|192).toString(16).toUpperCase()+"%"+(A&63|128).toString(16).toUpperCase():B="%"+(A>>12|224).toString(16).toUpperCase()+"%"+(A>>6&63|128).toString(16).toUpperCase()+"%"+(A&63|128).toString(16).toUpperCase(),B}function he(N){for(var A="",B=0,j=N.length;B<j;){var F=parseInt(N.substr(B+1,2),16);if(F<128)A+=String.fromCharCode(F),B+=3;else if(F>=194&&F<224){if(j-B>=6){var ie=parseInt(N.substr(B+4,2),16);A+=String.fromCharCode((F&31)<<6|ie&63)}else A+=N.substr(B,6);B+=6}else if(F>=224){if(j-B>=9){var se=parseInt(N.substr(B+4,2),16),Se=parseInt(N.substr(B+7,2),16);A+=String.fromCharCode((F&15)<<12|(se&63)<<6|Se&63)}else A+=N.substr(B,9);B+=9}else A+=N.substr(B,3),B+=3}return A}function de(N,A){function B(j){var F=he(j);return F.match(A.UNRESERVED)?F:j}return N.scheme&&(N.scheme=String(N.scheme).replace(A.PCT_ENCODED,B).toLowerCase().replace(A.NOT_SCHEME,"")),N.userinfo!==void 0&&(N.userinfo=String(N.userinfo).replace(A.PCT_ENCODED,B).replace(A.NOT_USERINFO,U).replace(A.PCT_ENCODED,o)),N.host!==void 0&&(N.host=String(N.host).replace(A.PCT_ENCODED,B).toLowerCase().replace(A.NOT_HOST,U).replace(A.PCT_ENCODED,o)),N.path!==void 0&&(N.path=String(N.path).replace(A.PCT_ENCODED,B).replace(N.scheme?A.NOT_PATH:A.NOT_PATH_NOSCHEME,U).replace(A.PCT_ENCODED,o)),N.query!==void 0&&(N.query=String(N.query).replace(A.PCT_ENCODED,B).replace(A.NOT_QUERY,U).replace(A.PCT_ENCODED,o)),N.fragment!==void 0&&(N.fragment=String(N.fragment).replace(A.PCT_ENCODED,B).replace(A.NOT_FRAGMENT,U).replace(A.PCT_ENCODED,o)),N}function Te(N){return N.replace(/^0*(.*)/,"$1")||"0"}function yt(N,A){var B=N.match(A.IPV4ADDRESS)||[],j=h(B,2),F=j[1];return F?F.split(".").map(Te).join("."):N}function lt(N,A){var B=N.match(A.IPV6ADDRESS)||[],j=h(B,3),F=j[1],ie=j[2];if(F){for(var se=F.toLowerCase().split("::").reverse(),Se=h(se,2),Be=Se[0],Ye=Se[1],be=Ye?Ye.split(":").map(Te):[],De=Be.split(":").map(Te),Qe=A.IPV4ADDRESS.test(De[De.length-1]),ue=Qe?7:8,He=De.length-ue,et=Array(ue),ze=0;ze<ue;++ze)et[ze]=be[ze]||De[He+ze]||"";Qe&&(et[ue-1]=yt(et[ue-1],A));var br=et.reduce(function(Zt,Rn,Xr){if(!Rn||Rn==="0"){var tr=Zt[Zt.length-1];tr&&tr.index+tr.length===Xr?tr.length++:Zt.push({index:Xr,length:1})}return Zt},[]),Dn=br.sort(function(Zt,Rn){return Rn.length-Zt.length})[0],In=void 0;if(Dn&&Dn.length>1){var Oi=et.slice(0,Dn.index),Gr=et.slice(Dn.index+Dn.length);In=Oi.join(":")+"::"+Gr.join(":")}else In=et.join(":");return ie&&(In+="%"+ie),In}else return N}var it=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,On="".match(/(){0}/)[1]===void 0;function st(N){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B={},j=A.iri!==!1?f:u;A.reference==="suffix"&&(N=(A.scheme?A.scheme+":":"")+"//"+N);var F=N.match(it);if(F){On?(B.scheme=F[1],B.userinfo=F[3],B.host=F[4],B.port=parseInt(F[5],10),B.path=F[6]||"",B.query=F[7],B.fragment=F[8],isNaN(B.port)&&(B.port=F[5])):(B.scheme=F[1]||void 0,B.userinfo=N.indexOf("@")!==-1?F[3]:void 0,B.host=N.indexOf("//")!==-1?F[4]:void 0,B.port=parseInt(F[5],10),B.path=F[6]||"",B.query=N.indexOf("?")!==-1?F[7]:void 0,B.fragment=N.indexOf("#")!==-1?F[8]:void 0,isNaN(B.port)&&(B.port=N.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?F[4]:void 0)),B.host&&(B.host=lt(yt(B.host,j),j)),B.scheme===void 0&&B.userinfo===void 0&&B.host===void 0&&B.port===void 0&&!B.path&&B.query===void 0?B.reference="same-document":B.scheme===void 0?B.reference="relative":B.fragment===void 0?B.reference="absolute":B.reference="uri",A.reference&&A.reference!=="suffix"&&A.reference!==B.reference&&(B.error=B.error||"URI is not a "+A.reference+" reference.");var ie=X[(A.scheme||B.scheme||"").toLowerCase()];if(!A.unicodeSupport&&(!ie||!ie.unicodeSupport)){if(B.host&&(A.domainHost||ie&&ie.domainHost))try{B.host=L.toASCII(B.host.replace(j.PCT_ENCODED,he).toLowerCase())}catch(se){B.error=B.error||"Host's domain name can not be converted to ASCII via punycode: "+se}de(B,u)}else de(B,j);ie&&ie.parse&&ie.parse(B,A)}else B.error=B.error||"URI can not be parsed.";return B}function An(N,A){var B=A.iri!==!1?f:u,j=[];return N.userinfo!==void 0&&(j.push(N.userinfo),j.push("@")),N.host!==void 0&&j.push(lt(yt(String(N.host),B),B).replace(B.IPV6ADDRESS,function(F,ie,se){return"["+ie+(se?"%25"+se:"")+"]"})),(typeof N.port=="number"||typeof N.port=="string")&&(j.push(":"),j.push(String(N.port))),j.length?j.join(""):void 0}var Yt=/^\.\.?\//,Pn=/^\/\.(\/|$)/,Qt=/^\/\.\.(\/|$)/,ft=/^\/?(?:.|\n)*?(?=\/|$)/;function We(N){for(var A=[];N.length;)if(N.match(Yt))N=N.replace(Yt,"");else if(N.match(Pn))N=N.replace(Pn,"/");else if(N.match(Qt))N=N.replace(Qt,"/"),A.pop();else if(N==="."||N==="..")N="";else{var B=N.match(ft);if(B){var j=B[0];N=N.slice(j.length),A.push(j)}else throw new Error("Unexpected dot segment condition")}return A.join("")}function qe(N){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=A.iri?f:u,j=[],F=X[(A.scheme||N.scheme||"").toLowerCase()];if(F&&F.serialize&&F.serialize(N,A),N.host&&!B.IPV6ADDRESS.test(N.host)){if(A.domainHost||F&&F.domainHost)try{N.host=A.iri?L.toUnicode(N.host):L.toASCII(N.host.replace(B.PCT_ENCODED,he).toLowerCase())}catch(Se){N.error=N.error||"Host's domain name can not be converted to "+(A.iri?"Unicode":"ASCII")+" via punycode: "+Se}}de(N,B),A.reference!=="suffix"&&N.scheme&&(j.push(N.scheme),j.push(":"));var ie=An(N,A);if(ie!==void 0&&(A.reference!=="suffix"&&j.push("//"),j.push(ie),N.path&&N.path.charAt(0)!=="/"&&j.push("/")),N.path!==void 0){var se=N.path;!A.absolutePath&&(!F||!F.absolutePath)&&(se=We(se)),ie===void 0&&(se=se.replace(/^\/\//,"/%2F")),j.push(se)}return N.query!==void 0&&(j.push("?"),j.push(N.query)),N.fragment!==void 0&&(j.push("#"),j.push(N.fragment)),j.join("")}function un(N,A){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},j=arguments[3],F={};return j||(N=st(qe(N,B),B),A=st(qe(A,B),B)),B=B||{},!B.tolerant&&A.scheme?(F.scheme=A.scheme,F.userinfo=A.userinfo,F.host=A.host,F.port=A.port,F.path=We(A.path||""),F.query=A.query):(A.userinfo!==void 0||A.host!==void 0||A.port!==void 0?(F.userinfo=A.userinfo,F.host=A.host,F.port=A.port,F.path=We(A.path||""),F.query=A.query):(A.path?(A.path.charAt(0)==="/"?F.path=We(A.path):((N.userinfo!==void 0||N.host!==void 0||N.port!==void 0)&&!N.path?F.path="/"+A.path:N.path?F.path=N.path.slice(0,N.path.lastIndexOf("/")+1)+A.path:F.path=A.path,F.path=We(F.path)),F.query=A.query):(F.path=N.path,A.query!==void 0?F.query=A.query:F.query=N.query),F.userinfo=N.userinfo,F.host=N.host,F.port=N.port),F.scheme=N.scheme),F.fragment=A.fragment,F}function mr(N,A,B){var j=l({scheme:"null"},B);return qe(un(st(N,j),st(A,j),j,!0),j)}function Dt(N,A){return typeof N=="string"?N=qe(st(N,A),A):s(N)==="object"&&(N=st(qe(N,A),A)),N}function fn(N,A,B){return typeof N=="string"?N=qe(st(N,B),B):s(N)==="object"&&(N=qe(N,B)),typeof A=="string"?A=qe(st(A,B),B):s(A)==="object"&&(A=qe(A,B)),N===A}function Ei(N,A){return N&&N.toString().replace(!A||!A.iri?u.ESCAPE:f.ESCAPE,U)}function _t(N,A){return N&&N.toString().replace(!A||!A.iri?u.PCT_ENCODED:f.PCT_ENCODED,he)}var Tn={scheme:"http",domainHost:!0,parse:function(A,B){return A.host||(A.error=A.error||"HTTP URIs must have a host."),A},serialize:function(A,B){var j=String(A.scheme).toLowerCase()==="https";return(A.port===(j?443:80)||A.port==="")&&(A.port=void 0),A.path||(A.path="/"),A}},er={scheme:"https",domainHost:Tn.domainHost,parse:Tn.parse,serialize:Tn.serialize};function vr(N){return typeof N.secure=="boolean"?N.secure:String(N.scheme).toLowerCase()==="wss"}var Kr={scheme:"ws",domainHost:!0,parse:function(A,B){var j=A;return j.secure=vr(j),j.resourceName=(j.path||"/")+(j.query?"?"+j.query:""),j.path=void 0,j.query=void 0,j},serialize:function(A,B){if((A.port===(vr(A)?443:80)||A.port==="")&&(A.port=void 0),typeof A.secure=="boolean"&&(A.scheme=A.secure?"wss":"ws",A.secure=void 0),A.resourceName){var j=A.resourceName.split("?"),F=h(j,2),ie=F[0],se=F[1];A.path=ie&&ie!=="/"?ie:void 0,A.query=se,A.resourceName=void 0}return A.fragment=void 0,A}},Ps={scheme:"wss",domainHost:Kr.domainHost,parse:Kr.parse,serialize:Kr.serialize},Xo={},Yo="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Jt="[0-9A-Fa-f]",Qo=i(i("%[EFef]"+Jt+"%"+Jt+Jt+"%"+Jt+Jt)+"|"+i("%[89A-Fa-f]"+Jt+"%"+Jt+Jt)+"|"+i("%"+Jt+Jt)),kc="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Jo="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Cc=r(Jo,'[\\"\\\\]'),Zo="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",_c=new RegExp(Yo,"g"),yr=new RegExp(Qo,"g"),$c=new RegExp(r("[^]",kc,"[\\.]",'[\\"]',Cc),"g"),Ts=new RegExp(r("[^]",Yo,Zo),"g"),Ec=Ts;function Ds(N){var A=he(N);return A.match(_c)?A:N}var Is={scheme:"mailto",parse:function(A,B){var j=A,F=j.to=j.path?j.path.split(","):[];if(j.path=void 0,j.query){for(var ie=!1,se={},Se=j.query.split("&"),Be=0,Ye=Se.length;Be<Ye;++Be){var be=Se[Be].split("=");switch(be[0]){case"to":for(var De=be[1].split(","),Qe=0,ue=De.length;Qe<ue;++Qe)F.push(De[Qe]);break;case"subject":j.subject=_t(be[1],B);break;case"body":j.body=_t(be[1],B);break;default:ie=!0,se[_t(be[0],B)]=_t(be[1],B);break}}ie&&(j.headers=se)}j.query=void 0;for(var He=0,et=F.length;He<et;++He){var ze=F[He].split("@");if(ze[0]=_t(ze[0]),B.unicodeSupport)ze[1]=_t(ze[1],B).toLowerCase();else try{ze[1]=L.toASCII(_t(ze[1],B).toLowerCase())}catch(br){j.error=j.error||"Email address's domain name can not be converted to ASCII via punycode: "+br}F[He]=ze.join("@")}return j},serialize:function(A,B){var j=A,F=a(A.to);if(F){for(var ie=0,se=F.length;ie<se;++ie){var Se=String(F[ie]),Be=Se.lastIndexOf("@"),Ye=Se.slice(0,Be).replace(yr,Ds).replace(yr,o).replace($c,U),be=Se.slice(Be+1);try{be=B.iri?L.toUnicode(be):L.toASCII(_t(be,B).toLowerCase())}catch(He){j.error=j.error||"Email address's domain name can not be converted to "+(B.iri?"Unicode":"ASCII")+" via punycode: "+He}F[ie]=Ye+"@"+be}j.path=F.join(",")}var De=A.headers=A.headers||{};A.subject&&(De.subject=A.subject),A.body&&(De.body=A.body);var Qe=[];for(var ue in De)De[ue]!==Xo[ue]&&Qe.push(ue.replace(yr,Ds).replace(yr,o).replace(Ts,U)+"="+De[ue].replace(yr,Ds).replace(yr,o).replace(Ec,U));return Qe.length&&(j.query=Qe.join("&")),j}},Oc=/^([^\:]+)\:(.*)/,Rs={scheme:"urn",parse:function(A,B){var j=A.path&&A.path.match(Oc),F=A;if(j){var ie=B.scheme||F.scheme||"urn",se=j[1].toLowerCase(),Se=j[2],Be=ie+":"+(B.nid||se),Ye=X[Be];F.nid=se,F.nss=Se,F.path=void 0,Ye&&(F=Ye.parse(F,B))}else F.error=F.error||"URN can not be parsed.";return F},serialize:function(A,B){var j=B.scheme||A.scheme||"urn",F=A.nid,ie=j+":"+(B.nid||F),se=X[ie];se&&(A=se.serialize(A,B));var Se=A,Be=A.nss;return Se.path=(F||B.nid)+":"+Be,Se}},$t=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,hn={scheme:"urn:uuid",parse:function(A,B){var j=A;return j.uuid=j.nss,j.nss=void 0,!B.tolerant&&(!j.uuid||!j.uuid.match($t))&&(j.error=j.error||"UUID is not valid."),j},serialize:function(A,B){var j=A;return j.nss=(A.uuid||"").toLowerCase(),j}};X[Tn.scheme]=Tn,X[er.scheme]=er,X[Kr.scheme]=Kr,X[Ps.scheme]=Ps,X[Is.scheme]=Is,X[Rs.scheme]=Rs,X[hn.scheme]=hn,t.SCHEMES=X,t.pctEncChar=U,t.pctDecChars=he,t.parse=st,t.removeDotSegments=We,t.serialize=qe,t.resolveComponents=un,t.resolve=mr,t.normalize=Dt,t.equal=fn,t.escapeComponent=Ei,t.unescapeComponent=_t,Object.defineProperty(t,"__esModule",{value:!0})})})(yh,yh.exports);var b5=yh.exports;Object.defineProperty(Md,"__esModule",{value:!0});const iw=b5;iw.code='require("ajv/dist/runtime/uri").default';Md.default=iw;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;var e=Sn;Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var t=ye;Object.defineProperty(n,"_",{enumerable:!0,get:function(){return t._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return t.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return t.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return t.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return t.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return t.CodeGen}});const r=Uo,i=Ko,s=bi,o=Lt,a=ye,l=gt,c=qo,u=$e,f=y5,h=Md,d=(H,E)=>new RegExp(H,E);d.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},y=200;function b(H){var E,R,T,S,D,L,X,U,he,de,Te,yt,lt,it,On,st,An,Yt,Pn,Qt,ft,We,qe,un,mr;const Dt=H.strict,fn=(E=H.code)===null||E===void 0?void 0:E.optimize,Ei=fn===!0||fn===void 0?1:fn||0,_t=(T=(R=H.code)===null||R===void 0?void 0:R.regExp)!==null&&T!==void 0?T:d,Tn=(S=H.uriResolver)!==null&&S!==void 0?S:h.default;return{strictSchema:(L=(D=H.strictSchema)!==null&&D!==void 0?D:Dt)!==null&&L!==void 0?L:!0,strictNumbers:(U=(X=H.strictNumbers)!==null&&X!==void 0?X:Dt)!==null&&U!==void 0?U:!0,strictTypes:(de=(he=H.strictTypes)!==null&&he!==void 0?he:Dt)!==null&&de!==void 0?de:"log",strictTuples:(yt=(Te=H.strictTuples)!==null&&Te!==void 0?Te:Dt)!==null&&yt!==void 0?yt:"log",strictRequired:(it=(lt=H.strictRequired)!==null&&lt!==void 0?lt:Dt)!==null&&it!==void 0?it:!1,code:H.code?{...H.code,optimize:Ei,regExp:_t}:{optimize:Ei,regExp:_t},loopRequired:(On=H.loopRequired)!==null&&On!==void 0?On:y,loopEnum:(st=H.loopEnum)!==null&&st!==void 0?st:y,meta:(An=H.meta)!==null&&An!==void 0?An:!0,messages:(Yt=H.messages)!==null&&Yt!==void 0?Yt:!0,inlineRefs:(Pn=H.inlineRefs)!==null&&Pn!==void 0?Pn:!0,schemaId:(Qt=H.schemaId)!==null&&Qt!==void 0?Qt:"$id",addUsedSchema:(ft=H.addUsedSchema)!==null&&ft!==void 0?ft:!0,validateSchema:(We=H.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(qe=H.validateFormats)!==null&&qe!==void 0?qe:!0,unicodeRegExp:(un=H.unicodeRegExp)!==null&&un!==void 0?un:!0,int32range:(mr=H.int32range)!==null&&mr!==void 0?mr:!0,uriResolver:Tn}}class w{constructor(E={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,E=this.opts={...E,...b(E)};const{es5:R,lines:T}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:g,es5:R,lines:T}),this.logger=O(E.logger);const S=E.validateFormats;E.validateFormats=!1,this.RULES=(0,s.getRules)(),k.call(this,m,E,"NOT SUPPORTED"),k.call(this,v,E,"DEPRECATED","warn"),this._metaOpts=$.call(this),E.formats&&P.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),E.keywords&&I.call(this,E.keywords),typeof E.meta=="object"&&this.addMetaSchema(E.meta),C.call(this),E.validateFormats=S}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:E,meta:R,schemaId:T}=this.opts;let S=f;T==="id"&&(S={...f},S.id=S.$id,delete S.$id),R&&E&&this.addMetaSchema(S,S[T],!1)}defaultMeta(){const{meta:E,schemaId:R}=this.opts;return this.opts.defaultMeta=typeof E=="object"?E[R]||E:void 0}validate(E,R){let T;if(typeof E=="string"){if(T=this.getSchema(E),!T)throw new Error(`no schema with key or ref "${E}"`)}else T=this.compile(E);const S=T(R);return"$async"in T||(this.errors=T.errors),S}compile(E,R){const T=this._addSchema(E,R);return T.validate||this._compileSchemaEnv(T)}compileAsync(E,R){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:T}=this.opts;return S.call(this,E,R);async function S(de,Te){await D.call(this,de.$schema);const yt=this._addSchema(de,Te);return yt.validate||L.call(this,yt)}async function D(de){de&&!this.getSchema(de)&&await S.call(this,{$ref:de},!0)}async function L(de){try{return this._compileSchemaEnv(de)}catch(Te){if(!(Te instanceof i.default))throw Te;return X.call(this,Te),await U.call(this,Te.missingSchema),L.call(this,de)}}function X({missingSchema:de,missingRef:Te}){if(this.refs[de])throw new Error(`AnySchema ${de} is loaded but ${Te} cannot be resolved`)}async function U(de){const Te=await he.call(this,de);this.refs[de]||await D.call(this,Te.$schema),this.refs[de]||this.addSchema(Te,de,R)}async function he(de){const Te=this._loading[de];if(Te)return Te;try{return await(this._loading[de]=T(de))}finally{delete this._loading[de]}}}addSchema(E,R,T,S=this.opts.validateSchema){if(Array.isArray(E)){for(const L of E)this.addSchema(L,void 0,T,S);return this}let D;if(typeof E=="object"){const{schemaId:L}=this.opts;if(D=E[L],D!==void 0&&typeof D!="string")throw new Error(`schema ${L} must be string`)}return R=(0,l.normalizeId)(R||D),this._checkUnique(R),this.schemas[R]=this._addSchema(E,T,R,S,!0),this}addMetaSchema(E,R,T=this.opts.validateSchema){return this.addSchema(E,R,!0,T),this}validateSchema(E,R){if(typeof E=="boolean")return!0;let T;if(T=E.$schema,T!==void 0&&typeof T!="string")throw new Error("$schema must be a string");if(T=T||this.opts.defaultMeta||this.defaultMeta(),!T)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const S=this.validate(T,E);if(!S&&R){const D="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(D);else throw new Error(D)}return S}getSchema(E){let R;for(;typeof(R=x.call(this,E))=="string";)E=R;if(R===void 0){const{schemaId:T}=this.opts,S=new o.SchemaEnv({schema:{},schemaId:T});if(R=o.resolveSchema.call(this,S,E),!R)return;this.refs[E]=R}return R.validate||this._compileSchemaEnv(R)}removeSchema(E){if(E instanceof RegExp)return this._removeAllSchemas(this.schemas,E),this._removeAllSchemas(this.refs,E),this;switch(typeof E){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const R=x.call(this,E);return typeof R=="object"&&this._cache.delete(R.schema),delete this.schemas[E],delete this.refs[E],this}case"object":{const R=E;this._cache.delete(R);let T=E[this.opts.schemaId];return T&&(T=(0,l.normalizeId)(T),delete this.schemas[T],delete this.refs[T]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(E){for(const R of E)this.addKeyword(R);return this}addKeyword(E,R){let T;if(typeof E=="string")T=E,typeof R=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),R.keyword=T);else if(typeof E=="object"&&R===void 0){if(R=E,T=R.keyword,Array.isArray(T)&&!T.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(V.call(this,T,R),!R)return(0,u.eachItem)(T,D=>W.call(this,D)),this;te.call(this,R);const S={...R,type:(0,c.getJSONTypes)(R.type),schemaType:(0,c.getJSONTypes)(R.schemaType)};return(0,u.eachItem)(T,S.type.length===0?D=>W.call(this,D,S):D=>S.type.forEach(L=>W.call(this,D,S,L))),this}getKeyword(E){const R=this.RULES.all[E];return typeof R=="object"?R.definition:!!R}removeKeyword(E){const{RULES:R}=this;delete R.keywords[E],delete R.all[E];for(const T of R.rules){const S=T.rules.findIndex(D=>D.keyword===E);S>=0&&T.rules.splice(S,1)}return this}addFormat(E,R){return typeof R=="string"&&(R=new RegExp(R)),this.formats[E]=R,this}errorsText(E=this.errors,{separator:R=", ",dataVar:T="data"}={}){return!E||E.length===0?"No errors":E.map(S=>`${T}${S.instancePath} ${S.message}`).reduce((S,D)=>S+R+D)}$dataMetaSchema(E,R){const T=this.RULES.all;E=JSON.parse(JSON.stringify(E));for(const S of R){const D=S.split("/").slice(1);let L=E;for(const X of D)L=L[X];for(const X in T){const U=T[X];if(typeof U!="object")continue;const{$data:he}=U.definition,de=L[X];he&&de&&(L[X]=J(de))}}return E}_removeAllSchemas(E,R){for(const T in E){const S=E[T];(!R||R.test(T))&&(typeof S=="string"?delete E[T]:S&&!S.meta&&(this._cache.delete(S.schema),delete E[T]))}}_addSchema(E,R,T,S=this.opts.validateSchema,D=this.opts.addUsedSchema){let L;const{schemaId:X}=this.opts;if(typeof E=="object")L=E[X];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof E!="boolean")throw new Error("schema must be object or boolean")}let U=this._cache.get(E);if(U!==void 0)return U;T=(0,l.normalizeId)(L||T);const he=l.getSchemaRefs.call(this,E,T);return U=new o.SchemaEnv({schema:E,schemaId:X,meta:R,baseId:T,localRefs:he}),this._cache.set(U.schema,U),D&&!T.startsWith("#")&&(T&&this._checkUnique(T),this.refs[T]=U),S&&this.validateSchema(E,!0),U}_checkUnique(E){if(this.schemas[E]||this.refs[E])throw new Error(`schema with key or id "${E}" already exists`)}_compileSchemaEnv(E){if(E.meta?this._compileMetaSchema(E):o.compileSchema.call(this,E),!E.validate)throw new Error("ajv implementation error");return E.validate}_compileMetaSchema(E){const R=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,E)}finally{this.opts=R}}}n.default=w,w.ValidationError=r.default,w.MissingRefError=i.default;function k(H,E,R,T="error"){for(const S in H){const D=S;D in E&&this.logger[T](`${R}: option ${S}. ${H[D]}`)}}function x(H){return H=(0,l.normalizeId)(H),this.schemas[H]||this.refs[H]}function C(){const H=this.opts.schemas;if(H)if(Array.isArray(H))this.addSchema(H);else for(const E in H)this.addSchema(H[E],E)}function P(){for(const H in this.opts.formats){const E=this.opts.formats[H];E&&this.addFormat(H,E)}}function I(H){if(Array.isArray(H)){this.addVocabulary(H);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const E in H){const R=H[E];R.keyword||(R.keyword=E),this.addKeyword(R)}}function $(){const H={...this.opts};for(const E of p)delete H[E];return H}const _={log(){},warn(){},error(){}};function O(H){if(H===!1)return _;if(H===void 0)return console;if(H.log&&H.warn&&H.error)return H;throw new Error("logger must implement log, warn and error methods")}const M=/^[a-z_$][a-z0-9_$:-]*$/i;function V(H,E){const{RULES:R}=this;if((0,u.eachItem)(H,T=>{if(R.keywords[T])throw new Error(`Keyword ${T} is already defined`);if(!M.test(T))throw new Error(`Keyword ${T} has invalid name`)}),!!E&&E.$data&&!("code"in E||"validate"in E))throw new Error('$data keyword must have "code" or "validate" function')}function W(H,E,R){var T;const S=E?.post;if(R&&S)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:D}=this;let L=S?D.post:D.rules.find(({type:U})=>U===R);if(L||(L={type:R,rules:[]},D.rules.push(L)),D.keywords[H]=!0,!E)return;const X={keyword:H,definition:{...E,type:(0,c.getJSONTypes)(E.type),schemaType:(0,c.getJSONTypes)(E.schemaType)}};E.before?q.call(this,L,X,E.before):L.rules.push(X),D.all[H]=X,(T=E.implements)===null||T===void 0||T.forEach(U=>this.addKeyword(U))}function q(H,E,R){const T=H.rules.findIndex(S=>S.keyword===R);T>=0?H.rules.splice(T,0,E):(H.rules.push(E),this.logger.warn(`rule ${R} is not defined`))}function te(H){let{metaSchema:E}=H;E!==void 0&&(H.$data&&this.opts.$data&&(E=J(E)),H.validateSchema=this.compile(E,!0))}const ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function J(H){return{anyOf:[H,ee]}}})(Ix);var Bd={},Ld={},Fd={};Object.defineProperty(Fd,"__esModule",{value:!0});const x5={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Fd.default=x5;var xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.callRef=xi.getValidate=void 0;const w5=Ko,fv=me,Rt=ye,Ri=Zn,hv=Lt,Ea=$e,S5={keyword:"$ref",schemaType:"string",code(n){const{gen:e,schema:t,it:r}=n,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:l}=r,{root:c}=s;if((t==="#"||t==="#/")&&i===c.baseId)return f();const u=hv.resolveRef.call(l,c,i,t);if(u===void 0)throw new w5.default(r.opts.uriResolver,i,t);if(u instanceof hv.SchemaEnv)return h(u);return d(u);function f(){if(s===c)return Ga(n,o,s,s.$async);const p=e.scopeValue("root",{ref:c});return Ga(n,(0,Rt._)`${p}.validate`,c,c.$async)}function h(p){const g=sw(n,p);Ga(n,g,p,p.$async)}function d(p){const g=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Rt.stringify)(p)}:{ref:p}),m=e.name("valid"),v=n.subschema({schema:p,dataTypes:[],schemaPath:Rt.nil,topSchemaRef:g,errSchemaPath:t},m);n.mergeEvaluated(v),n.ok(m)}}};function sw(n,e){const{gen:t}=n;return e.validate?t.scopeValue("validate",{ref:e.validate}):(0,Rt._)`${t.scopeValue("wrapper",{ref:e})}.validate`}xi.getValidate=sw;function Ga(n,e,t,r){const{gen:i,it:s}=n,{allErrors:o,schemaEnv:a,opts:l}=s,c=l.passContext?Ri.default.this:Rt.nil;r?u():f();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Rt._)`await ${(0,fv.callValidateCode)(n,e,c)}`),d(e),o||i.assign(p,!0)},g=>{i.if((0,Rt._)`!(${g} instanceof ${s.ValidationError})`,()=>i.throw(g)),h(g),o||i.assign(p,!1)}),n.ok(p)}function f(){n.result((0,fv.callValidateCode)(n,e,c),()=>d(e),()=>h(e))}function h(p){const g=(0,Rt._)`${p}.errors`;i.assign(Ri.default.vErrors,(0,Rt._)`${Ri.default.vErrors} === null ? ${g} : ${Ri.default.vErrors}.concat(${g})`),i.assign(Ri.default.errors,(0,Rt._)`${Ri.default.vErrors}.length`)}function d(p){var g;if(!s.opts.unevaluated)return;const m=(g=t?.validate)===null||g===void 0?void 0:g.evaluated;if(s.props!==!0)if(m&&!m.dynamicProps)m.props!==void 0&&(s.props=Ea.mergeEvaluated.props(i,m.props,s.props));else{const v=i.var("props",(0,Rt._)`${p}.evaluated.props`);s.props=Ea.mergeEvaluated.props(i,v,s.props,Rt.Name)}if(s.items!==!0)if(m&&!m.dynamicItems)m.items!==void 0&&(s.items=Ea.mergeEvaluated.items(i,m.items,s.items));else{const v=i.var("items",(0,Rt._)`${p}.evaluated.items`);s.items=Ea.mergeEvaluated.items(i,v,s.items,Rt.Name)}}}xi.callRef=Ga;xi.default=S5;Object.defineProperty(Ld,"__esModule",{value:!0});const k5=Fd,C5=xi,_5=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",k5.default,C5.default];Ld.default=_5;var jd={},Vd={};Object.defineProperty(Vd,"__esModule",{value:!0});const Ll=ye,wr=Ll.operators,Fl={maximum:{okStr:"<=",ok:wr.LTE,fail:wr.GT},minimum:{okStr:">=",ok:wr.GTE,fail:wr.LT},exclusiveMaximum:{okStr:"<",ok:wr.LT,fail:wr.GTE},exclusiveMinimum:{okStr:">",ok:wr.GT,fail:wr.LTE}},$5={message:({keyword:n,schemaCode:e})=>(0,Ll.str)`must be ${Fl[n].okStr} ${e}`,params:({keyword:n,schemaCode:e})=>(0,Ll._)`{comparison: ${Fl[n].okStr}, limit: ${e}}`},E5={keyword:Object.keys(Fl),type:"number",schemaType:"number",$data:!0,error:$5,code(n){const{keyword:e,data:t,schemaCode:r}=n;n.fail$data((0,Ll._)`${t} ${Fl[e].fail} ${r} || isNaN(${t})`)}};Vd.default=E5;var Hd={};Object.defineProperty(Hd,"__esModule",{value:!0});const po=ye,O5={message:({schemaCode:n})=>(0,po.str)`must be multiple of ${n}`,params:({schemaCode:n})=>(0,po._)`{multipleOf: ${n}}`},A5={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:O5,code(n){const{gen:e,data:t,schemaCode:r,it:i}=n,s=i.opts.multipleOfPrecision,o=e.let("res"),a=s?(0,po._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,po._)`${o} !== parseInt(${o})`;n.fail$data((0,po._)`(${r} === 0 || (${o} = ${t}/${r}, ${a}))`)}};Hd.default=A5;var zd={},Wd={};Object.defineProperty(Wd,"__esModule",{value:!0});function ow(n){const e=n.length;let t=0,r=0,i;for(;r<e;)t++,i=n.charCodeAt(r++),i>=55296&&i<=56319&&r<e&&(i=n.charCodeAt(r),(i&64512)===56320&&r++);return t}Wd.default=ow;ow.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(zd,"__esModule",{value:!0});const oi=ye,P5=$e,T5=Wd,D5={message({keyword:n,schemaCode:e}){const t=n==="maxLength"?"more":"fewer";return(0,oi.str)`must NOT have ${t} than ${e} characters`},params:({schemaCode:n})=>(0,oi._)`{limit: ${n}}`},I5={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:D5,code(n){const{keyword:e,data:t,schemaCode:r,it:i}=n,s=e==="maxLength"?oi.operators.GT:oi.operators.LT,o=i.opts.unicode===!1?(0,oi._)`${t}.length`:(0,oi._)`${(0,P5.useFunc)(n.gen,T5.default)}(${t})`;n.fail$data((0,oi._)`${o} ${s} ${r}`)}};zd.default=I5;var qd={};Object.defineProperty(qd,"__esModule",{value:!0});const R5=me,jl=ye,N5={message:({schemaCode:n})=>(0,jl.str)`must match pattern "${n}"`,params:({schemaCode:n})=>(0,jl._)`{pattern: ${n}}`},M5={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:N5,code(n){const{data:e,$data:t,schema:r,schemaCode:i,it:s}=n,o=s.opts.unicodeRegExp?"u":"",a=t?(0,jl._)`(new RegExp(${i}, ${o}))`:(0,R5.usePattern)(n,r);n.fail$data((0,jl._)`!${a}.test(${e})`)}};qd.default=M5;var Ud={};Object.defineProperty(Ud,"__esModule",{value:!0});const go=ye,B5={message({keyword:n,schemaCode:e}){const t=n==="maxProperties"?"more":"fewer";return(0,go.str)`must NOT have ${t} than ${e} properties`},params:({schemaCode:n})=>(0,go._)`{limit: ${n}}`},L5={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:B5,code(n){const{keyword:e,data:t,schemaCode:r}=n,i=e==="maxProperties"?go.operators.GT:go.operators.LT;n.fail$data((0,go._)`Object.keys(${t}).length ${i} ${r}`)}};Ud.default=L5;var Kd={};Object.defineProperty(Kd,"__esModule",{value:!0});const Xs=me,mo=ye,F5=$e,j5={message:({params:{missingProperty:n}})=>(0,mo.str)`must have required property '${n}'`,params:({params:{missingProperty:n}})=>(0,mo._)`{missingProperty: ${n}}`},V5={keyword:"required",type:"object",schemaType:"array",$data:!0,error:j5,code(n){const{gen:e,schema:t,schemaCode:r,data:i,$data:s,it:o}=n,{opts:a}=o;if(!s&&t.length===0)return;const l=t.length>=a.loopRequired;if(o.allErrors?c():u(),a.strictRequired){const d=n.parentSchema.properties,{definedProperties:p}=n.it;for(const g of t)if(d?.[g]===void 0&&!p.has(g)){const m=o.schemaEnv.baseId+o.errSchemaPath,v=`required property "${g}" is not defined at "${m}" (strictRequired)`;(0,F5.checkStrictMode)(o,v,o.opts.strictRequired)}}function c(){if(l||s)n.block$data(mo.nil,f);else for(const d of t)(0,Xs.checkReportMissingProp)(n,d)}function u(){const d=e.let("missing");if(l||s){const p=e.let("valid",!0);n.block$data(p,()=>h(d,p)),n.ok(p)}else e.if((0,Xs.checkMissingProp)(n,t,d)),(0,Xs.reportMissingProp)(n,d),e.else()}function f(){e.forOf("prop",r,d=>{n.setParams({missingProperty:d}),e.if((0,Xs.noPropertyInData)(e,i,d,a.ownProperties),()=>n.error())})}function h(d,p){n.setParams({missingProperty:d}),e.forOf(d,r,()=>{e.assign(p,(0,Xs.propertyInData)(e,i,d,a.ownProperties)),e.if((0,mo.not)(p),()=>{n.error(),e.break()})},mo.nil)}}};Kd.default=V5;var Gd={};Object.defineProperty(Gd,"__esModule",{value:!0});const vo=ye,H5={message({keyword:n,schemaCode:e}){const t=n==="maxItems"?"more":"fewer";return(0,vo.str)`must NOT have ${t} than ${e} items`},params:({schemaCode:n})=>(0,vo._)`{limit: ${n}}`},z5={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:H5,code(n){const{keyword:e,data:t,schemaCode:r}=n,i=e==="maxItems"?vo.operators.GT:vo.operators.LT;n.fail$data((0,vo._)`${t}.length ${i} ${r}`)}};Gd.default=z5;var Xd={},Go={};Object.defineProperty(Go,"__esModule",{value:!0});const aw=Vx;aw.code='require("ajv/dist/runtime/equal").default';Go.default=aw;Object.defineProperty(Xd,"__esModule",{value:!0});const Yu=qo,ht=ye,W5=$e,q5=Go,U5={message:({params:{i:n,j:e}})=>(0,ht.str)`must NOT have duplicate items (items ## ${e} and ${n} are identical)`,params:({params:{i:n,j:e}})=>(0,ht._)`{i: ${n}, j: ${e}}`},K5={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:U5,code(n){const{gen:e,data:t,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=n;if(!r&&!i)return;const l=e.let("valid"),c=s.items?(0,Yu.getSchemaTypes)(s.items):[];n.block$data(l,u,(0,ht._)`${o} === false`),n.ok(l);function u(){const p=e.let("i",(0,ht._)`${t}.length`),g=e.let("j");n.setParams({i:p,j:g}),e.assign(l,!0),e.if((0,ht._)`${p} > 1`,()=>(f()?h:d)(p,g))}function f(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function h(p,g){const m=e.name("item"),v=(0,Yu.checkDataTypes)(c,m,a.opts.strictNumbers,Yu.DataType.Wrong),y=e.const("indices",(0,ht._)`{}`);e.for((0,ht._)`;${p}--;`,()=>{e.let(m,(0,ht._)`${t}[${p}]`),e.if(v,(0,ht._)`continue`),c.length>1&&e.if((0,ht._)`typeof ${m} == "string"`,(0,ht._)`${m} += "_"`),e.if((0,ht._)`typeof ${y}[${m}] == "number"`,()=>{e.assign(g,(0,ht._)`${y}[${m}]`),n.error(),e.assign(l,!1).break()}).code((0,ht._)`${y}[${m}] = ${p}`)})}function d(p,g){const m=(0,W5.useFunc)(e,q5.default),v=e.name("outer");e.label(v).for((0,ht._)`;${p}--;`,()=>e.for((0,ht._)`${g} = ${p}; ${g}--;`,()=>e.if((0,ht._)`${m}(${t}[${p}], ${t}[${g}])`,()=>{n.error(),e.assign(l,!1).break(v)})))}}};Xd.default=K5;var Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});const bh=ye,G5=$e,X5=Go,Y5={message:"must be equal to constant",params:({schemaCode:n})=>(0,bh._)`{allowedValue: ${n}}`},Q5={keyword:"const",$data:!0,error:Y5,code(n){const{gen:e,data:t,$data:r,schemaCode:i,schema:s}=n;r||s&&typeof s=="object"?n.fail$data((0,bh._)`!${(0,G5.useFunc)(e,X5.default)}(${t}, ${i})`):n.fail((0,bh._)`${s} !== ${t}`)}};Yd.default=Q5;var Qd={};Object.defineProperty(Qd,"__esModule",{value:!0});const io=ye,J5=$e,Z5=Go,eF={message:"must be equal to one of the allowed values",params:({schemaCode:n})=>(0,io._)`{allowedValues: ${n}}`},tF={keyword:"enum",schemaType:"array",$data:!0,error:eF,code(n){const{gen:e,data:t,$data:r,schema:i,schemaCode:s,it:o}=n;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let l;const c=()=>l??(l=(0,J5.useFunc)(e,Z5.default));let u;if(a||r)u=e.let("valid"),n.block$data(u,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const d=e.const("vSchema",s);u=(0,io.or)(...i.map((p,g)=>h(d,g)))}n.pass(u);function f(){e.assign(u,!1),e.forOf("v",s,d=>e.if((0,io._)`${c()}(${t}, ${d})`,()=>e.assign(u,!0).break()))}function h(d,p){const g=i[p];return typeof g=="object"&&g!==null?(0,io._)`${c()}(${t}, ${d}[${p}])`:(0,io._)`${t} === ${g}`}}};Qd.default=tF;Object.defineProperty(jd,"__esModule",{value:!0});const nF=Vd,rF=Hd,iF=zd,sF=qd,oF=Ud,aF=Kd,lF=Gd,cF=Xd,uF=Yd,fF=Qd,hF=[nF.default,rF.default,iF.default,sF.default,oF.default,aF.default,lF.default,cF.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},uF.default,fF.default];jd.default=hF;var Jd={},Os={};Object.defineProperty(Os,"__esModule",{value:!0});Os.validateAdditionalItems=void 0;const ai=ye,xh=$e,dF={message:({params:{len:n}})=>(0,ai.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,ai._)`{limit: ${n}}`},pF={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:dF,code(n){const{parentSchema:e,it:t}=n,{items:r}=e;if(!Array.isArray(r)){(0,xh.checkStrictMode)(t,'"additionalItems" is ignored when "items" is not an array of schemas');return}lw(n,r)}};function lw(n,e){const{gen:t,schema:r,data:i,keyword:s,it:o}=n;o.items=!0;const a=t.const("len",(0,ai._)`${i}.length`);if(r===!1)n.setParams({len:e.length}),n.pass((0,ai._)`${a} <= ${e.length}`);else if(typeof r=="object"&&!(0,xh.alwaysValidSchema)(o,r)){const c=t.var("valid",(0,ai._)`${a} <= ${e.length}`);t.if((0,ai.not)(c),()=>l(c)),n.ok(c)}function l(c){t.forRange("i",e.length,a,u=>{n.subschema({keyword:s,dataProp:u,dataPropType:xh.Type.Num},c),o.allErrors||t.if((0,ai.not)(c),()=>t.break())})}}Os.validateAdditionalItems=lw;Os.default=pF;var Zd={},As={};Object.defineProperty(As,"__esModule",{value:!0});As.validateTuple=void 0;const dv=ye,Xa=$e,gF=me,mF={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(n){const{schema:e,it:t}=n;if(Array.isArray(e))return cw(n,"additionalItems",e);t.items=!0,!(0,Xa.alwaysValidSchema)(t,e)&&n.ok((0,gF.validateArray)(n))}};function cw(n,e,t=n.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=n;u(i),a.opts.unevaluated&&t.length&&a.items!==!0&&(a.items=Xa.mergeEvaluated.items(r,t.length,a.items));const l=r.name("valid"),c=r.const("len",(0,dv._)`${s}.length`);t.forEach((f,h)=>{(0,Xa.alwaysValidSchema)(a,f)||(r.if((0,dv._)`${c} > ${h}`,()=>n.subschema({keyword:o,schemaProp:h,dataProp:h},l)),n.ok(l))});function u(f){const{opts:h,errSchemaPath:d}=a,p=t.length,g=p===f.minItems&&(p===f.maxItems||f[e]===!1);if(h.strictTuples&&!g){const m=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Xa.checkStrictMode)(a,m,h.strictTuples)}}}As.validateTuple=cw;As.default=mF;Object.defineProperty(Zd,"__esModule",{value:!0});const vF=As,yF={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,vF.validateTuple)(n,"items")};Zd.default=yF;var e0={};Object.defineProperty(e0,"__esModule",{value:!0});const pv=ye,bF=$e,xF=me,wF=Os,SF={message:({params:{len:n}})=>(0,pv.str)`must NOT have more than ${n} items`,params:({params:{len:n}})=>(0,pv._)`{limit: ${n}}`},kF={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:SF,code(n){const{schema:e,parentSchema:t,it:r}=n,{prefixItems:i}=t;r.items=!0,!(0,bF.alwaysValidSchema)(r,e)&&(i?(0,wF.validateAdditionalItems)(n,i):n.ok((0,xF.validateArray)(n)))}};e0.default=kF;var t0={};Object.defineProperty(t0,"__esModule",{value:!0});const nn=ye,Oa=$e,CF={message:({params:{min:n,max:e}})=>e===void 0?(0,nn.str)`must contain at least ${n} valid item(s)`:(0,nn.str)`must contain at least ${n} and no more than ${e} valid item(s)`,params:({params:{min:n,max:e}})=>e===void 0?(0,nn._)`{minContains: ${n}}`:(0,nn._)`{minContains: ${n}, maxContains: ${e}}`},_F={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:CF,code(n){const{gen:e,schema:t,parentSchema:r,data:i,it:s}=n;let o,a;const{minContains:l,maxContains:c}=r;s.opts.next?(o=l===void 0?1:l,a=c):o=1;const u=e.const("len",(0,nn._)`${i}.length`);if(n.setParams({min:o,max:a}),a===void 0&&o===0){(0,Oa.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Oa.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),n.fail();return}if((0,Oa.alwaysValidSchema)(s,t)){let g=(0,nn._)`${u} >= ${o}`;a!==void 0&&(g=(0,nn._)`${g} && ${u} <= ${a}`),n.pass(g);return}s.items=!0;const f=e.name("valid");a===void 0&&o===1?d(f,()=>e.if(f,()=>e.break())):o===0?(e.let(f,!0),a!==void 0&&e.if((0,nn._)`${i}.length > 0`,h)):(e.let(f,!1),h()),n.result(f,()=>n.reset());function h(){const g=e.name("_valid"),m=e.let("count",0);d(g,()=>e.if(g,()=>p(m)))}function d(g,m){e.forRange("i",0,u,v=>{n.subschema({keyword:"contains",dataProp:v,dataPropType:Oa.Type.Num,compositeRule:!0},g),m()})}function p(g){e.code((0,nn._)`${g}++`),a===void 0?e.if((0,nn._)`${g} >= ${o}`,()=>e.assign(f,!0).break()):(e.if((0,nn._)`${g} > ${a}`,()=>e.assign(f,!1).break()),o===1?e.assign(f,!0):e.if((0,nn._)`${g} >= ${o}`,()=>e.assign(f,!0)))}}};t0.default=_F;var uw={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSchemaDeps=n.validatePropertyDeps=n.error=void 0;const e=ye,t=$e,r=me;n.error={message:({params:{property:l,depsCount:c,deps:u}})=>{const f=c===1?"property":"properties";return(0,e.str)`must have ${f} ${u} when property ${l} is present`},params:({params:{property:l,depsCount:c,deps:u,missingProperty:f}})=>(0,e._)`{property: ${l},
    missingProperty: ${f},
    depsCount: ${c},
    deps: ${u}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:n.error,code(l){const[c,u]=s(l);o(l,c),a(l,u)}};function s({schema:l}){const c={},u={};for(const f in l){if(f==="__proto__")continue;const h=Array.isArray(l[f])?c:u;h[f]=l[f]}return[c,u]}function o(l,c=l.schema){const{gen:u,data:f,it:h}=l;if(Object.keys(c).length===0)return;const d=u.let("missing");for(const p in c){const g=c[p];if(g.length===0)continue;const m=(0,r.propertyInData)(u,f,p,h.opts.ownProperties);l.setParams({property:p,depsCount:g.length,deps:g.join(", ")}),h.allErrors?u.if(m,()=>{for(const v of g)(0,r.checkReportMissingProp)(l,v)}):(u.if((0,e._)`${m} && (${(0,r.checkMissingProp)(l,g,d)})`),(0,r.reportMissingProp)(l,d),u.else())}}n.validatePropertyDeps=o;function a(l,c=l.schema){const{gen:u,data:f,keyword:h,it:d}=l,p=u.name("valid");for(const g in c)(0,t.alwaysValidSchema)(d,c[g])||(u.if((0,r.propertyInData)(u,f,g,d.opts.ownProperties),()=>{const m=l.subschema({keyword:h,schemaProp:g},p);l.mergeValidEvaluated(m,p)},()=>u.var(p,!0)),l.ok(p))}n.validateSchemaDeps=a,n.default=i})(uw);var n0={};Object.defineProperty(n0,"__esModule",{value:!0});const fw=ye,$F=$e,EF={message:"property name must be valid",params:({params:n})=>(0,fw._)`{propertyName: ${n.propertyName}}`},OF={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:EF,code(n){const{gen:e,schema:t,data:r,it:i}=n;if((0,$F.alwaysValidSchema)(i,t))return;const s=e.name("valid");e.forIn("key",r,o=>{n.setParams({propertyName:o}),n.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),e.if((0,fw.not)(s),()=>{n.error(!0),i.allErrors||e.break()})}),n.ok(s)}};n0.default=OF;var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0});const Aa=me,gn=ye,AF=Zn,Pa=$e,PF={message:"must NOT have additional properties",params:({params:n})=>(0,gn._)`{additionalProperty: ${n.additionalProperty}}`},TF={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:PF,code(n){const{gen:e,schema:t,parentSchema:r,data:i,errsCount:s,it:o}=n;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,Pa.alwaysValidSchema)(o,t))return;const c=(0,Aa.allSchemaProperties)(r.properties),u=(0,Aa.allSchemaProperties)(r.patternProperties);f(),n.ok((0,gn._)`${s} === ${AF.default.errors}`);function f(){e.forIn("key",i,m=>{!c.length&&!u.length?p(m):e.if(h(m),()=>p(m))})}function h(m){let v;if(c.length>8){const y=(0,Pa.schemaRefOrVal)(o,r.properties,"properties");v=(0,Aa.isOwnProperty)(e,y,m)}else c.length?v=(0,gn.or)(...c.map(y=>(0,gn._)`${m} === ${y}`)):v=gn.nil;return u.length&&(v=(0,gn.or)(v,...u.map(y=>(0,gn._)`${(0,Aa.usePattern)(n,y)}.test(${m})`))),(0,gn.not)(v)}function d(m){e.code((0,gn._)`delete ${i}[${m}]`)}function p(m){if(l.removeAdditional==="all"||l.removeAdditional&&t===!1){d(m);return}if(t===!1){n.setParams({additionalProperty:m}),n.error(),a||e.break();return}if(typeof t=="object"&&!(0,Pa.alwaysValidSchema)(o,t)){const v=e.name("valid");l.removeAdditional==="failing"?(g(m,v,!1),e.if((0,gn.not)(v),()=>{n.reset(),d(m)})):(g(m,v),a||e.if((0,gn.not)(v),()=>e.break()))}}function g(m,v,y){const b={keyword:"additionalProperties",dataProp:m,dataPropType:Pa.Type.Str};y===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),n.subschema(b,v)}}};Sc.default=TF;var r0={};Object.defineProperty(r0,"__esModule",{value:!0});const DF=Sn,gv=me,Qu=$e,mv=Sc,IF={keyword:"properties",type:"object",schemaType:"object",code(n){const{gen:e,schema:t,parentSchema:r,data:i,it:s}=n;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&mv.default.code(new DF.KeywordCxt(s,mv.default,"additionalProperties"));const o=(0,gv.allSchemaProperties)(t);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Qu.mergeEvaluated.props(e,(0,Qu.toHash)(o),s.props));const a=o.filter(f=>!(0,Qu.alwaysValidSchema)(s,t[f]));if(a.length===0)return;const l=e.name("valid");for(const f of a)c(f)?u(f):(e.if((0,gv.propertyInData)(e,i,f,s.opts.ownProperties)),u(f),s.allErrors||e.else().var(l,!0),e.endIf()),n.it.definedProperties.add(f),n.ok(l);function c(f){return s.opts.useDefaults&&!s.compositeRule&&t[f].default!==void 0}function u(f){n.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};r0.default=IF;var i0={};Object.defineProperty(i0,"__esModule",{value:!0});const vv=me,Ta=ye,yv=$e,bv=$e,RF={keyword:"patternProperties",type:"object",schemaType:"object",code(n){const{gen:e,schema:t,data:r,parentSchema:i,it:s}=n,{opts:o}=s,a=(0,vv.allSchemaProperties)(t),l=a.filter(g=>(0,yv.alwaysValidSchema)(s,t[g]));if(a.length===0||l.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const c=o.strictSchema&&!o.allowMatchingProperties&&i.properties,u=e.name("valid");s.props!==!0&&!(s.props instanceof Ta.Name)&&(s.props=(0,bv.evaluatedPropsToName)(e,s.props));const{props:f}=s;h();function h(){for(const g of a)c&&d(g),s.allErrors?p(g):(e.var(u,!0),p(g),e.if(u))}function d(g){for(const m in c)new RegExp(g).test(m)&&(0,yv.checkStrictMode)(s,`property ${m} matches pattern ${g} (use allowMatchingProperties)`)}function p(g){e.forIn("key",r,m=>{e.if((0,Ta._)`${(0,vv.usePattern)(n,g)}.test(${m})`,()=>{const v=l.includes(g);v||n.subschema({keyword:"patternProperties",schemaProp:g,dataProp:m,dataPropType:bv.Type.Str},u),s.opts.unevaluated&&f!==!0?e.assign((0,Ta._)`${f}[${m}]`,!0):!v&&!s.allErrors&&e.if((0,Ta.not)(u),()=>e.break())})})}}};i0.default=RF;var s0={};Object.defineProperty(s0,"__esModule",{value:!0});const NF=$e,MF={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:e,schema:t,it:r}=n;if((0,NF.alwaysValidSchema)(r,t)){n.fail();return}const i=e.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),n.failResult(i,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};s0.default=MF;var o0={};Object.defineProperty(o0,"__esModule",{value:!0});const BF=me,LF={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:BF.validateUnion,error:{message:"must match a schema in anyOf"}};o0.default=LF;var a0={};Object.defineProperty(a0,"__esModule",{value:!0});const Ya=ye,FF=$e,jF={message:"must match exactly one schema in oneOf",params:({params:n})=>(0,Ya._)`{passingSchemas: ${n.passing}}`},VF={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:jF,code(n){const{gen:e,schema:t,parentSchema:r,it:i}=n;if(!Array.isArray(t))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=t,o=e.let("valid",!1),a=e.let("passing",null),l=e.name("_valid");n.setParams({passing:a}),e.block(c),n.result(o,()=>n.reset(),()=>n.error(!0));function c(){s.forEach((u,f)=>{let h;(0,FF.alwaysValidSchema)(i,u)?e.var(l,!0):h=n.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,Ya._)`${l} && ${o}`).assign(o,!1).assign(a,(0,Ya._)`[${a}, ${f}]`).else(),e.if(l,()=>{e.assign(o,!0),e.assign(a,f),h&&n.mergeEvaluated(h,Ya.Name)})})}}};a0.default=VF;var l0={};Object.defineProperty(l0,"__esModule",{value:!0});const HF=$e,zF={keyword:"allOf",schemaType:"array",code(n){const{gen:e,schema:t,it:r}=n;if(!Array.isArray(t))throw new Error("ajv implementation error");const i=e.name("valid");t.forEach((s,o)=>{if((0,HF.alwaysValidSchema)(r,s))return;const a=n.subschema({keyword:"allOf",schemaProp:o},i);n.ok(i),n.mergeEvaluated(a)})}};l0.default=zF;var c0={};Object.defineProperty(c0,"__esModule",{value:!0});const Vl=ye,hw=$e,WF={message:({params:n})=>(0,Vl.str)`must match "${n.ifClause}" schema`,params:({params:n})=>(0,Vl._)`{failingKeyword: ${n.ifClause}}`},qF={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:WF,code(n){const{gen:e,parentSchema:t,it:r}=n;t.then===void 0&&t.else===void 0&&(0,hw.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=xv(r,"then"),s=xv(r,"else");if(!i&&!s)return;const o=e.let("valid",!0),a=e.name("_valid");if(l(),n.reset(),i&&s){const u=e.let("ifClause");n.setParams({ifClause:u}),e.if(a,c("then",u),c("else",u))}else i?e.if(a,c("then")):e.if((0,Vl.not)(a),c("else"));n.pass(o,()=>n.error(!0));function l(){const u=n.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);n.mergeEvaluated(u)}function c(u,f){return()=>{const h=n.subschema({keyword:u},a);e.assign(o,a),n.mergeValidEvaluated(h,o),f?e.assign(f,(0,Vl._)`${u}`):n.setParams({ifClause:u})}}}};function xv(n,e){const t=n.schema[e];return t!==void 0&&!(0,hw.alwaysValidSchema)(n,t)}c0.default=qF;var u0={};Object.defineProperty(u0,"__esModule",{value:!0});const UF=$e,KF={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:e,it:t}){e.if===void 0&&(0,UF.checkStrictMode)(t,`"${n}" without "if" is ignored`)}};u0.default=KF;Object.defineProperty(Jd,"__esModule",{value:!0});const GF=Os,XF=Zd,YF=As,QF=e0,JF=t0,ZF=uw,ej=n0,tj=Sc,nj=r0,rj=i0,ij=s0,sj=o0,oj=a0,aj=l0,lj=c0,cj=u0;function uj(n=!1){const e=[ij.default,sj.default,oj.default,aj.default,lj.default,cj.default,ej.default,tj.default,ZF.default,nj.default,rj.default];return n?e.push(XF.default,QF.default):e.push(GF.default,YF.default),e.push(JF.default),e}Jd.default=uj;var f0={},h0={};Object.defineProperty(h0,"__esModule",{value:!0});const Je=ye,fj={message:({schemaCode:n})=>(0,Je.str)`must match format "${n}"`,params:({schemaCode:n})=>(0,Je._)`{format: ${n}}`},hj={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:fj,code(n,e){const{gen:t,data:r,$data:i,schema:s,schemaCode:o,it:a}=n,{opts:l,errSchemaPath:c,schemaEnv:u,self:f}=a;if(!l.validateFormats)return;i?h():d();function h(){const p=t.scopeValue("formats",{ref:f.formats,code:l.code.formats}),g=t.const("fDef",(0,Je._)`${p}[${o}]`),m=t.let("fType"),v=t.let("format");t.if((0,Je._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>t.assign(m,(0,Je._)`${g}.type || "string"`).assign(v,(0,Je._)`${g}.validate`),()=>t.assign(m,(0,Je._)`"string"`).assign(v,g)),n.fail$data((0,Je.or)(y(),b()));function y(){return l.strictSchema===!1?Je.nil:(0,Je._)`${o} && !${v}`}function b(){const w=u.$async?(0,Je._)`(${g}.async ? await ${v}(${r}) : ${v}(${r}))`:(0,Je._)`${v}(${r})`,k=(0,Je._)`(typeof ${v} == "function" ? ${w} : ${v}.test(${r}))`;return(0,Je._)`${v} && ${v} !== true && ${m} === ${e} && !${k}`}}function d(){const p=f.formats[s];if(!p){y();return}if(p===!0)return;const[g,m,v]=b(p);g===e&&n.pass(w());function y(){if(l.strictSchema===!1){f.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${s}" ignored in schema at path "${c}"`}}function b(k){const x=k instanceof RegExp?(0,Je.regexpCode)(k):l.code.formats?(0,Je._)`${l.code.formats}${(0,Je.getProperty)(s)}`:void 0,C=t.scopeValue("formats",{key:s,ref:k,code:x});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,Je._)`${C}.validate`]:["string",k,C]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Je._)`await ${v}(${r})`}return typeof m=="function"?(0,Je._)`${v}(${r})`:(0,Je._)`${v}.test(${r})`}}}};h0.default=hj;Object.defineProperty(f0,"__esModule",{value:!0});const dj=h0,pj=[dj.default];f0.default=pj;var fs={};Object.defineProperty(fs,"__esModule",{value:!0});fs.contentVocabulary=fs.metadataVocabulary=void 0;fs.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];fs.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Bd,"__esModule",{value:!0});const gj=Ld,mj=jd,vj=Jd,yj=f0,wv=fs,bj=[gj.default,mj.default,(0,vj.default)(),yj.default,wv.metadataVocabulary,wv.contentVocabulary];Bd.default=bj;var d0={},dw={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(n.DiscrError||(n.DiscrError={}))})(dw);Object.defineProperty(d0,"__esModule",{value:!0});const Mi=ye,wh=dw,Sv=Lt,xj=$e,wj={message:({params:{discrError:n,tagName:e}})=>n===wh.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:n,tag:e,tagName:t}})=>(0,Mi._)`{error: ${n}, tag: ${t}, tagValue: ${e}}`},Sj={keyword:"discriminator",type:"object",schemaType:"object",error:wj,code(n){const{gen:e,data:t,schema:r,parentSchema:i,it:s}=n,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=e.let("valid",!1),c=e.const("tag",(0,Mi._)`${t}${(0,Mi.getProperty)(a)}`);e.if((0,Mi._)`typeof ${c} == "string"`,()=>u(),()=>n.error(!1,{discrError:wh.DiscrError.Tag,tag:c,tagName:a})),n.ok(l);function u(){const d=h();e.if(!1);for(const p in d)e.elseIf((0,Mi._)`${c} === ${p}`),e.assign(l,f(d[p]));e.else(),n.error(!1,{discrError:wh.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function f(d){const p=e.name("valid"),g=n.subschema({keyword:"oneOf",schemaProp:d},p);return n.mergeEvaluated(g,Mi.Name),p}function h(){var d;const p={},g=v(i);let m=!0;for(let w=0;w<o.length;w++){let k=o[w];k?.$ref&&!(0,xj.schemaHasRulesButRef)(k,s.self.RULES)&&(k=Sv.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,k?.$ref),k instanceof Sv.SchemaEnv&&(k=k.schema));const x=(d=k?.properties)===null||d===void 0?void 0:d[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);m=m&&(g||v(k)),y(x,w)}if(!m)throw new Error(`discriminator: "${a}" must be required`);return p;function v({required:w}){return Array.isArray(w)&&w.includes(a)}function y(w,k){if(w.const)b(w.const,k);else if(w.enum)for(const x of w.enum)b(x,k);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,k){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=k}}}};d0.default=Sj;const kj="http://json-schema.org/draft-07/schema#",Cj="http://json-schema.org/draft-07/schema#",_j="Core schema meta-schema",$j={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Ej=["object","boolean"],Oj={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Aj={$schema:kj,$id:Cj,title:_j,definitions:$j,type:Ej,properties:Oj,default:!0};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;const t=Ix,r=Bd,i=d0,s=Aj,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends t.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}n.exports=e=l,Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var c=Sn;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var u=ye;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var f=Uo;Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return f.default}});var h=Ko;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(gh,gh.exports);var Pj=gh.exports;const Tj=Kl(Pj),Dj=we('<div class="mt-2 text-danger text-sm">'),Ij=we('<div class="w-full h-full flex flex-col"><div class=" flex-none flex items-center gap-2"></div><div class="mt-2 flex-none">'),Rj=new Tj,Nj=()=>{const[n,{functions:e}]=Mr(qr),[t,r]=tt(n.functions.length>0?n.functions[0].id:""),[i,s]=tt("");Ot([()=>n.functions],()=>{!t()&&n.functions.length>0?r(n.functions[0].id):n.functions.length===0&&r("")});const o=_e(()=>n.functions.find(f=>f.id===t())),a=_e(()=>n.functions.map(f=>({value:f.id,label:f.name})));function l(){const f=e.create(Uh());r(f.id)}function c(){const f=t();f&&(e.delete(f),n.functions.length>0?r(n.functions[0].id):r(""))}Ot([o],()=>{u(o()?.parameters??"")});function u(f){let h="";if(f)try{const d=JSON.parse(f);Rj.compile(d)}catch{h="*Invalid JSON Schema format. Check the API Reference for details."}s(h)}return(()=>{const f=Ij(),h=f.firstChild,d=h.nextSibling;return Q(f,G(sd,{class:"flex-none mb-2",children:"Functions"}),h),Q(h,G(rd,{get options(){return a()},get value(){return t()},onChange:r,placeholder:"Select a function",class:"w-72"}),null),Q(h,G(At,{"aria-label":"new function",variation:"secondary",onClick:l,class:"square-button hocus-visible:text-primary",get children(){return G(_h,{fill:"currentColor",size:14})}}),null),Q(h,G(At,{"aria-label":"delete function",variation:"secondary",onClick:c,class:"square-button hocus-visible:text-danger",get children(){return G(Mv,{fill:"currentColor",size:14})}}),null),Q(f,G(gl,{get value(){return o()?.name??""},onInput:p=>{const g=t();g&&e.setName(g,p.currentTarget.value)},placeholder:"Function name",label:"Name",get disabled(){return!t()},class:"mt-2 w-72 flex-none"}),d),Q(f,G(o1,{get value(){return o()?.description??""},onInput:p=>{const g=t();g&&e.setDescription(g,p.currentTarget.value)},placeholder:"A short description of the function",label:"Description",get disabled(){return!t()},class:"mt-2 w-full flex-none",inputClass:"resize-none"}),d),Q(d,G(Pt,{get when(){return!!i()},get children(){const p=Dj();return Q(p,i),p}}),null),Q(d,G(Ad,{label:"Parameters",get value(){return o()?.parameters??""},onInput:p=>{const g=t();g&&e.setParameters(g,p)},placeholder:"Describe function parameters in JSON format",get disabled(){return!t()},onChange:u,height:"15rem",class:"w-full"}),null),f})()},Mj=fi("slider").parts("root","label","thumb","hiddenInput","output","track","range","control","markerGroup","marker"),Fn=Mj.build();function Bj(n,e,t){return n===0?t:e[n-1]}function Lj(n,e,t){return n===e.length-1?t:e[n+1]}function Fj(n,e,t){return Math.round((n-e)/t)*t+e}function p0(n,e,t){return Math.min(Math.max(n,e),t)}function Hl(n,e,t){return(n-e)/(t-e)}function pw(n,e,t,r){const i=n*(t-e)+e,s=Fj(i,e,r);return p0(s,e,t)}function gw(n,e,t,r){let i=(n-(isNaN(e)?0:e))%r,s=Math.abs(i)*2>=r?n+Math.sign(i)*(r-Math.abs(i)):n-i;isNaN(e)?!isNaN(t)&&s>t&&(s=Math.floor(t/r)*r):s<e?s=e:!isNaN(t)&&s>t&&(s=e+Math.floor((t-e)/r)*r);let o=r.toString(),a=o.indexOf("."),l=a>=0?o.length-a:0;if(l>0){let c=Math.pow(10,l);s=Math.round(s*c)/c}return s}function jj(n,e,t){return n[e]===t?n:[...n.slice(0,e),t,...n.slice(e+1)]}function mw(n,e){const t=Bj(n,e.values,e.min),r=Lj(n,e.values,e.max);let i=e.values.slice();return function(o){let a=gw(o,t,r,e.step);return i=jj(i,n,o),i[n]=a,i}}function Vj(n,e){const t=e.values[n]+e.step;return mw(n,e)(t)}function Hj(n,e){const t=e.values[n]-e.step;return mw(n,e)(t)}function Sh(n,e){const t={min:n[0],max:n[1]},r={min:e[0],max:e[1]};return function(s){if(t.min===t.max||r.min===r.max)return r.min;const o=(r.max-r.min)/(t.max-t.min);return r.min+o*(s-t.min)}}function zj(n){const{height:e=0}=n.thumbSize??{},t=Sh([n.min,n.max],[-e/2,e/2]);return parseFloat(t(n.value).toFixed(2))}function Wj(n){const{width:e=0}=n.thumbSize??{};if(n.isRtl){const r=Sh([n.max,n.min],[-e*1.5,-e/2]);return-1*parseFloat(r(n.value).toFixed(2))}const t=Sh([n.min,n.max],[-e/2,e/2]);return parseFloat(t(n.value).toFixed(2))}function vw(n){const e=Hl(n.value,n.min,n.max)*100;if(n.thumbAlignment==="center")return`${e}%`;const t=n.isVertical?zj(n):Wj(n);return`calc(${e}% - ${t}px)`}function qj(n){let e="visible";return n.thumbAlignment==="contain"&&!n.hasMeasuredThumbSize&&(e="hidden"),e}function Uj(n){const e=n.isVertical?"bottom":n.isRtl?"right":"left";return{visibility:qj(n),position:"absolute",transform:"var(--slider-thumb-transform)",[e]:"var(--slider-thumb-offset)"}}function Kj(n){let e="0%",t=`${100-n.valuePercent}%`;if(n.origin==="center"){const r=n.valuePercent<50;e=r?`${n.valuePercent}%`:"50%",t=r?"50%":t}return{start:e,end:t}}function Gj(n){return n.isVertical?{position:"absolute",bottom:"var(--slider-range-start)",top:"var(--slider-range-end)"}:{position:"absolute",[n.isRtl?"right":"left"]:"var(--slider-range-start)",[n.isRtl?"left":"right"]:"var(--slider-range-end)"}}function Xj(){return{touchAction:"none",userSelect:"none",position:"relative"}}function Yj(n){const e=Kj(n);return{"--slider-thumb-transform":n.isVertical?"translateY(50%)":"translateX(-50%)","--slider-thumb-offset":vw(n),"--slider-range-start":e.start,"--slider-range-end":e.end}}function Qj(n,e){return{position:"absolute",pointerEvents:"none",[n.isHorizontal?"left":"bottom"]:`${(n.isRtl?1-e:e)*100}%`}}function Jj(){return{userSelect:"none"}}function Zj(){return{position:"relative"}}function eV(){return{userSelect:"none",pointerEvents:"none",position:"relative"}}const tV={getThumbOffset:vw,getControlStyle:Xj,getThumbStyle:Uj,getRangeStyle:Gj,getRootStyle:Yj,getMarkerStyle:Qj,getLabelStyle:Jj,getTrackStyle:Zj,getMarkerGroupStyle:eV},ge=nc({...tV,getRootId:n=>n.ids?.root??`slider:${n.id}`,getThumbId:n=>n.ids?.thumb??`slider:${n.id}:thumb`,getControlId:n=>n.ids?.control??`slider:${n.id}:control`,getHiddenInputId:n=>n.ids?.hiddenInput??`slider:${n.id}:input`,getOutputId:n=>n.ids?.output??`slider:${n.id}:output`,getTrackId:n=>n.ids?.track??`slider:${n.id}track`,getRangeId:n=>n.ids?.track??`slider:${n.id}:range`,getLabelId:n=>n.ids?.label??`slider:${n.id}:label`,getMarkerId:(n,e)=>`slider:${n.id}:marker:${e}`,getRootEl:n=>ge.getById(n,ge.getRootId(n)),getThumbEl:n=>ge.getById(n,ge.getThumbId(n)),getControlEl:n=>ge.queryById(n,ge.getControlId(n)),getHiddenInputEl:n=>ge.getById(n,ge.getHiddenInputId(n)),getValueFromPoint(n,e){const r=YD(e,ge.getControlEl(n)).getPercentValue({orientation:n.orientation,dir:n.dir,inverted:{y:!0}});return pw(r,n.min,n.max,n.step)},dispatchChangeEvent(n){const e=ge.getHiddenInputEl(n);e&&HI(e,{value:n.value})}});function nV(n,e,t){const r=n.context["aria-label"],i=n.context["aria-labelledby"],s=n.context.getAriaValueText?.(n.context.value),o=n.matches("focus"),a=n.matches("dragging"),l=n.context.disabled,c=n.context.isInteractive,u=n.context.invalid;function f(d){return pw(d,n.context.min,n.context.max,n.context.step)}function h(d){return Hl(d,n.context.min,n.context.max)}return{isFocused:o,isDragging:a,value:n.context.value,percent:Hl(n.context.value,n.context.min,n.context.max),setValue(d){e({type:"SET_VALUE",value:d})},getPercentValue:f,getValuePercent:h,focus(){ge.getThumbEl(n.context)?.focus()},increment(){e("INCREMENT")},decrement(){e("DECREMENT")},rootProps:t.element({...Fn.root.attrs,"data-disabled":le(l),"data-focus":le(o),"data-orientation":n.context.orientation,"data-invalid":le(u),id:ge.getRootId(n.context),dir:n.context.dir,style:ge.getRootStyle(n.context)}),labelProps:t.label({...Fn.label.attrs,"data-disabled":le(l),"data-invalid":le(u),"data-focus":le(o),id:ge.getLabelId(n.context),htmlFor:ge.getHiddenInputId(n.context),onClick(d){c&&(d.preventDefault(),ge.getThumbEl(n.context)?.focus())},style:ge.getLabelStyle()}),thumbProps:t.element({...Fn.thumb.attrs,id:ge.getThumbId(n.context),"data-disabled":le(l),"data-orientation":n.context.orientation,"data-focus":le(o),draggable:!1,"aria-invalid":pf(u),"data-invalid":le(u),"aria-disabled":pf(l),"aria-label":r,"aria-labelledby":r?void 0:i??ge.getLabelId(n.context),"aria-orientation":n.context.orientation,"aria-valuemax":n.context.max,"aria-valuemin":n.context.min,"aria-valuenow":n.context.value,"aria-valuetext":s,role:"slider",tabIndex:l?void 0:0,onBlur(){c&&e("BLUR")},onFocus(){c&&e("FOCUS")},onKeyDown(d){if(!c)return;const p=XD(d)*n.context.step;let g=!0;const m={ArrowUp(){e({type:"ARROW_UP",step:p}),g=n.context.isVertical},ArrowDown(){e({type:"ARROW_DOWN",step:p}),g=n.context.isVertical},ArrowLeft(){e({type:"ARROW_LEFT",step:p}),g=n.context.isHorizontal},ArrowRight(){e({type:"ARROW_RIGHT",step:p}),g=n.context.isHorizontal},PageUp(){e({type:"PAGE_UP",step:p})},PageDown(){e({type:"PAGE_DOWN",step:p})},Home(){e("HOME")},End(){e("END")}},v=_y(d,n.context),y=m[v];y&&(y(d),g&&d.preventDefault())},style:ge.getThumbStyle(n.context)}),hiddenInputProps:t.input({...Fn.hiddenInput.attrs,type:"text",defaultValue:n.context.value,name:n.context.name,form:n.context.form,id:ge.getHiddenInputId(n.context),hidden:!0}),outputProps:t.output({...Fn.output.attrs,"data-disabled":le(l),"data-invalid":le(u),id:ge.getOutputId(n.context),htmlFor:ge.getHiddenInputId(n.context),"aria-live":"off"}),trackProps:t.element({...Fn.track.attrs,id:ge.getTrackId(n.context),"data-disabled":le(l),"data-focus":le(o),"data-invalid":le(u),"data-orientation":n.context.orientation,style:ge.getTrackStyle()}),rangeProps:t.element({...Fn.range.attrs,id:ge.getRangeId(n.context),"data-focus":le(o),"data-invalid":le(u),"data-disabled":le(l),"data-orientation":n.context.orientation,style:ge.getRangeStyle(n.context)}),controlProps:t.element({...Fn.control.attrs,id:ge.getControlId(n.context),"data-disabled":le(l),"data-invalid":le(u),"data-orientation":n.context.orientation,"data-focus":le(o),onPointerDown(d){if(!c)return;const p=Ra(d);if(!df(p)||jD(p))return;const g=$y(p);e({type:"POINTER_DOWN",point:g}),d.preventDefault(),d.stopPropagation()},style:ge.getControlStyle()}),markerGroupProps:t.element({...Fn.markerGroup.attrs,role:"presentation","aria-hidden":!0,"data-orientation":n.context.orientation,style:ge.getMarkerGroupStyle()}),getMarkerProps({value:d}){const p=h(d),g=ge.getMarkerStyle(n.context,p),m=d>n.context.value?"over-value":d<n.context.value?"under-value":"at-value";return t.element({...Fn.marker.attrs,id:ge.getMarkerId(n.context,d),role:"presentation","data-orientation":n.context.orientation,"data-value":d,"data-disabled":le(l),"data-state":m,style:g})}}}function rV(n,e){if(!n){e(void 0);return}e({width:n.offsetWidth,height:n.offsetHeight});const t=n.ownerDocument.defaultView??window,r=new t.ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const[s]=i;let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=n.offsetWidth,a=n.offsetHeight;e({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}function kv(n,e){const t=gw(e,n.min,n.max,n.step);return p0(t,n.min,n.max)}function iV(n,e){return Hj(0,{...n,step:e??n.step,values:[n.value]})[0]}function sV(n,e){return Vj(0,{...n,step:e??n.step,values:[n.value]})[0]}function oV(n){const e=Fo(n);return sc({id:"slider",initial:"idle",context:{thumbSize:null,thumbAlignment:"contain",disabled:!1,threshold:5,dir:"ltr",origin:"start",orientation:"horizontal",initialValue:null,value:0,step:1,min:0,max:100,...e},computed:{isHorizontal:t=>t.orientation==="horizontal",isVertical:t=>t.orientation==="vertical",isRtl:t=>t.orientation==="horizontal"&&t.dir==="rtl",isInteractive:t=>!(t.disabled||t.readOnly),hasMeasuredThumbSize:t=>t.thumbSize!==null,valuePercent:t=>100*Hl(t.value,t.min,t.max)},watch:{value:["invokeOnChange","dispatchChangeEvent"]},activities:["trackFormControlState","trackThumbSize"],on:{SET_VALUE:{actions:"setValue"},INCREMENT:{actions:"increment"},DECREMENT:{actions:"decrement"}},entry:["checkValue"],states:{idle:{on:{POINTER_DOWN:{target:"dragging",actions:["setPointerValue","invokeOnChangeStart","focusThumb"]},FOCUS:"focus"}},focus:{entry:"focusThumb",on:{POINTER_DOWN:{target:"dragging",actions:["setPointerValue","invokeOnChangeStart","focusThumb"]},ARROW_LEFT:{guard:"isHorizontal",actions:"decrement"},ARROW_RIGHT:{guard:"isHorizontal",actions:"increment"},ARROW_UP:{guard:"isVertical",actions:"increment"},ARROW_DOWN:{guard:"isVertical",actions:"decrement"},PAGE_UP:{actions:"increment"},PAGE_DOWN:{actions:"decrement"},HOME:{actions:"setToMin"},END:{actions:"setToMax"},BLUR:"idle"}},dragging:{entry:"focusThumb",activities:"trackPointerMove",on:{POINTER_UP:{target:"focus",actions:"invokeOnChangeEnd"},POINTER_MOVE:{actions:"setPointerValue"}}}}},{guards:{isHorizontal:t=>t.isHorizontal,isVertical:t=>t.isVertical},activities:{trackFormControlState(t){return s1(ge.getHiddenInputEl(t),{onFieldsetDisabled(){t.disabled=!0},onFormReset(){t.initialValue!=null&&(t.value=t.initialValue)}})},trackPointerMove(t,r,{send:i}){return f4(ge.getDoc(t),{onPointerMove(s){i({type:"POINTER_MOVE",point:s.point})},onPointerUp(){i("POINTER_UP")}})},trackThumbSize(t,r){if(t.thumbAlignment==="contain")return rV(ge.getThumbEl(t),i=>{i&&(t.thumbSize=i)})}},actions:{checkValue(t){const r=kv(t,t.value);t.value=r,t.initialValue=r},invokeOnChangeStart(t){t.onChangeStart?.({value:t.value})},invokeOnChangeEnd(t){t.onChangeEnd?.({value:t.value})},invokeOnChange(t){t.onChange?.({value:t.value})},dispatchChangeEvent(t){ge.dispatchChangeEvent(t)},setPointerValue(t,r){const i=ge.getValueFromPoint(t,r.point);i!=null&&(t.value=p0(i,t.min,t.max))},focusThumb(t){xt(()=>ge.getThumbEl(t)?.focus())},decrement(t,r){t.value=iV(t,r.step)},increment(t,r){t.value=sV(t,r.step)},setToMin(t){t.value=t.min},setToMax(t){t.value=t.max},setValue(t,r){t.value=kv(t,r.value)}}})}const aV=we('<div><div class="flex justify-between"><label></label><output><input type="number" class="w-full outline-none bg-transparent border border-transparent rounded hover:border-grey-300 focus:border-primary-light text-right px-1 hide-terrible-firefox-spinners-sorry-moz-i-love-you-but-please-give-me-a-pseudoclass-for-spinners"></output></div><div><div><div></div></div><div><input>'),Ys=n=>{const e=_n(n,{label:"",min:0,max:100,step:1,origin:"start",class:""});let t;const[r,i]=tt(e.value??e.min);Ot([()=>e.value],()=>{e.value!==void 0&&i(e.value)});function s(h){let d;Number.isNaN(h)||h<e.min?d=e.min:h>e.max?d=e.max:d=h,t.value=String(d),i(d),e.onChange?.(d)}const o=_e(()=>{const[,h]=e.step.toExponential().split("e-");return h?Number(h):0}),a=_e(()=>{const h=o(),d=new RegExp(`0{0,${h}}$`);return p=>h<=1?p.toString():p.toFixed(h+1).replace(d,"")}),l=_e(()=>({min:e.min,max:e.max,step:e.step,origin:e.origin,value:r(),onChange:h=>{const d=a()(h.value);s(Number(d))}})),[c,u]=ac(oV({id:ds()}),{context:l}),f=_e(()=>nV(c,u,oc));return(()=>{const h=aV(),d=h.firstChild,p=d.firstChild,g=p.nextSibling,m=g.firstChild,v=d.nextSibling,y=v.firstChild,b=y.firstChild,w=y.nextSibling,k=w.firstChild;Ee(h,xe(()=>f().rootProps,{get class(){return`w-60 ${e.class}`}}),!1,!0),Ee(p,xe(()=>f().labelProps),!1,!0),Q(p,()=>e.label),Ee(g,xe(()=>f().outputProps,{class:"w-16"}),!1,!0),m.addEventListener("change",C=>{const P=Number(C.currentTarget.value);s(P)});const x=t;return typeof x=="function"?Ch(x,m):t=m,Ee(v,xe(()=>f().controlProps,{class:"relative flex mt-2 items-center py-1"}),!1,!0),Ee(y,xe(()=>f().trackProps,{class:"h-1 flex-1 bg-grey-300 rounded-full"}),!1,!0),Ee(b,xe(()=>f().rangeProps,{class:"h-full bg-primary rounded-full"}),!1,!1),Ee(w,xe(()=>f().thumbProps,{class:"h-4 w-4 rounded-full bg-white shadow-sm outline-none border border-grey-300 focus:border-primary-light transition-colors duration-100"}),!1,!0),Ee(k,xe(()=>f().hiddenInputProps),!1,!1),ut(()=>Qi(m,"step",e.step)),ut(()=>m.value=r()),h})()},lV=we('<div class="relative"><div class="absolute top-3 right-6">'),cV=()=>{const[n]=Mr(qr),[e,t]=tt(""),[r,i]=tt(!1);let s=null;wi(()=>{const a=Sy(n);try{const l=JSON.stringify(a,null,2);t(l)}catch{t("")}});function o(){navigator.clipboard.writeText(e()),i(!0),s&&clearTimeout(s),s=setTimeout(()=>{i(!1)},2e3)}return(()=>{const a=lV(),l=a.firstChild;return Q(a,G(Ad,{disabled:!0,get value(){return e()},height:"30rem"}),l),Q(l,G(At,{onClick:o,variation:"secondary",class:"h-[2rem] px-[0.6rem]",get children(){return G(Pt,{get when(){return!r()},fallback:"Copied!",get children(){return G(B8,{})}})}})),a})()},uV=we('<div class="w-full h-full flex flex-col">'),fV=Object.entries(TD).map(([n,e])=>({value:n,label:e})),hV=()=>{const[n,e]=Mr(qr);return(()=>{const t=uV();return Q(t,G(rd,{label:"Model",placeholder:"Select a model",options:fV,get value(){return n.modelOptions.model},onChange:r=>e.setModel(r),class:"w-full"}),null),Q(t,G(Ys,{label:"Temperature",min:0,max:2,step:.01,get value(){return n.modelOptions.temperature},onChange:r=>e.setTemperature(r),class:"mt-4 w-full"}),null),Q(t,G(Ys,{label:"Max Tokens",min:1,max:8e3,step:1,get value(){return n.modelOptions.maxTokens},onChange:r=>e.setMaxTokens(r),class:"mt-4 w-full"}),null),Q(t,G(Ys,{label:"Top P",min:0,max:1,step:.01,get value(){return n.modelOptions.topP},onChange:r=>e.setTopP(r),class:"mt-4 w-full"}),null),Q(t,G(Ys,{label:"Frequency Penalty",min:0,max:2,step:.01,get value(){return n.modelOptions.frequencyPenalty},onChange:r=>e.setFreqencyPenalty(r),class:"mt-4 w-full"}),null),Q(t,G(Ys,{label:"Presence Penalty",min:0,max:2,step:.01,get value(){return n.modelOptions.presencePenalty},onChange:r=>e.setPresencePenalty(r),class:"mt-4 w-full"}),null),Q(t,G($f,{title:"View Code",description:"Summary of the request parameters in JSON format",trigger:r=>G(At,xe(r,{variation:"secondary",class:"mt-6",children:"View Code"})),get children(){return G(cV,{})}}),null),t})()},dV=we('<div class="w-full h-full p-4 flex flex-col rounded border border-grey-300 focus-within:border-primary-light transition-colors"><textarea placeholder="You are a helpful assistant." aria-label="system message input" class="w-full flex-1 outline-none bg-transparent appearance-none resize-none overflow-auto">'),pV=()=>{const[n,{setSystemMessage:e}]=Mr(qr);return(()=>{const t=dV(),r=t.firstChild;return Q(t,G(sd,{class:"mb-2 flex-none",children:"System"}),r),r.$$input=i=>{e(i.currentTarget.value)},ut(()=>r.value=n.systemMessage),t})()};Ul(["input"]);const gV=we('<div class="w-screen h-screen bg-grey-0 text-black flex flex-col"><div class="p-6 flex-1 overflow-auto flex justify-between gap-6 h-full"><div class="flex flex-col gap-6 flex-none w-[25%] min-w-[30rem]"><div class="flex-1 min-h-[12rem]"></div><div class="flex-none"></div></div><div class="flex-1"></div><div class="flex-none w-52">'),mV=()=>(()=>{const n=gV(),e=n.firstChild,t=e.firstChild,r=t.firstChild,i=r.nextSibling,s=t.nextSibling,o=s.nextSibling;return Q(n,G(rR,{}),e),Q(r,G(pV,{})),Q(i,G(Nj,{})),Q(s,G(FL,{})),Q(o,G(hV,{})),n})(),vV=()=>G(ID,{get children(){return G(RD,{get children(){return G(mV,{})}})}}),yV=document.getElementById("root");Uw(()=>G(vV,{}),yV);
